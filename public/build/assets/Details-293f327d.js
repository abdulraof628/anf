import{a as ce,c as m,b as k,u as B,w,F as N,H as K,L as he,ac as q,o as g,d as n,f as ue,l as fe,j as _e,h as G,t as p,k as U}from"./app-12888b4d.js";import{B as pe}from"./Authenticated-779f768d.js";import{B as F}from"./Button-41830fb8.js";import{r as ve}from"./PencilIcon-6c3ce390.js";import{r as ye}from"./SearchIcon-9c3ddd61.js";import{r as me}from"./TrashIcon-29fdd0f2.js";import{C as ge}from"./ConfirmationModal-b56db038.js";import{P as Q}from"./Pagination-9a16ec5f.js";import{h as L}from"./moment-fbc5633a.js";import{s as xe}from"./multiselect-5744fcff.js";import{M as ee}from"./Modal-e03da153.js";import"./auto-47003362.js";import{m as S,t as be,e as f,f as we,g as ke,v as Me,h as te,i as A,A as Ce,P as Ae,c as Ie,j as Te,k as Se,C as X}from"./chart-df6387c1.js";import"./ApplicationLogo-b5274700.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./XIcon-9c4d3b64.js";import"./TimeAgo-8d7bb5af.js";import"./transition-7c15faa2.js";import"./VueFinalModal.esm-7dcb9103.js";/* empty css                                                              *//*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Z=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),I={toTextLines:function(e){var r=[],t;for(e=[].concat(e);e.length;)t=e.pop(),typeof t=="string"?r.unshift.apply(r,t.split(`
`)):Array.isArray(t)?e.push.apply(e,t):A(e)||r.unshift(""+t);return r},textSize:function(e,r,t){var a=[].concat(r),s=a.length,i=e.font,o=0,l;for(e.font=t.string,l=0;l<s;++l)o=Math.max(e.measureText(a[l]).width,o);return e.font=i,{height:s*t.lineHeight,width:o}},bound:function(e,r,t){return Math.max(e,Math.min(r,t))},arrayDiff:function(e,r){var t=e.slice(),a=[],s,i,o,l;for(s=0,o=r.length;s<o;++s)l=r[s],i=t.indexOf(l),i===-1?a.push([l,1]):t.splice(i,1);for(s=0,o=t.length;s<o;++s)a.push([t[s],-1]);return a},rasterize:function(e){return Math.round(e*Z)/Z}};function V(e,r){var t=r.x,a=r.y;if(t===null)return{x:0,y:-1};if(a===null)return{x:1,y:0};var s=e.x-t,i=e.y-a,o=Math.sqrt(s*s+i*i);return{x:o?s/o:0,y:o?i/o:-1}}function Pe(e,r,t,a,s){switch(s){case"center":t=a=0;break;case"bottom":t=0,a=1;break;case"right":t=1,a=0;break;case"left":t=-1,a=0;break;case"top":t=0,a=-1;break;case"start":t=-t,a=-a;break;case"end":break;default:s*=Math.PI/180,t=Math.cos(s),a=Math.sin(s);break}return{x:e,y:r,vx:t,vy:a}}var Ee=0,re=1,ae=2,se=4,ie=8;function $(e,r,t){var a=Ee;return e<t.left?a|=re:e>t.right&&(a|=ae),r<t.top?a|=ie:r>t.bottom&&(a|=se),a}function Be(e,r){for(var t=e.x0,a=e.y0,s=e.x1,i=e.y1,o=$(t,a,r),l=$(s,i,r),d,c,h;!(!(o|l)||o&l);)d=o||l,d&ie?(c=t+(s-t)*(r.top-a)/(i-a),h=r.top):d&se?(c=t+(s-t)*(r.bottom-a)/(i-a),h=r.bottom):d&ae?(h=a+(i-a)*(r.right-t)/(s-t),c=r.right):d&re&&(h=a+(i-a)*(r.left-t)/(s-t),c=r.left),d===o?(t=c,a=h,o=$(t,a,r)):(s=c,i=h,l=$(s,i,r));return{x0:t,x1:s,y0:a,y1:i}}function j(e,r){var t=r.anchor,a=e,s,i;return r.clamp&&(a=Be(a,r.area)),t==="start"?(s=a.x0,i=a.y0):t==="end"?(s=a.x1,i=a.y1):(s=(a.x0+a.x1)/2,i=(a.y0+a.y1)/2),Pe(s,i,e.vx,e.vy,r.align)}var R={arc:function(e,r){var t=(e.startAngle+e.endAngle)/2,a=Math.cos(t),s=Math.sin(t),i=e.innerRadius,o=e.outerRadius;return j({x0:e.x+a*i,y0:e.y+s*i,x1:e.x+a*o,y1:e.y+s*o,vx:a,vy:s},r)},point:function(e,r){var t=V(e,r.origin),a=t.x*e.options.radius,s=t.y*e.options.radius;return j({x0:e.x-a,y0:e.y-s,x1:e.x+a,y1:e.y+s,vx:t.x,vy:t.y},r)},bar:function(e,r){var t=V(e,r.origin),a=e.x,s=e.y,i=0,o=0;return e.horizontal?(a=Math.min(e.x,e.base),i=Math.abs(e.base-e.x)):(s=Math.min(e.y,e.base),o=Math.abs(e.base-e.y)),j({x0:a,y0:s+o,x1:a+i,y1:s,vx:t.x,vy:t.y},r)},fallback:function(e,r){var t=V(e,r.origin);return j({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:t.x,vy:t.y},r)}},b=I.rasterize;function $e(e){var r=e.borderWidth||0,t=e.padding,a=e.size.height,s=e.size.width,i=-s/2,o=-a/2;return{frame:{x:i-t.left-r,y:o-t.top-r,w:s+t.width+r*2,h:a+t.height+r*2},text:{x:i,y:o,w:s,h:a}}}function je(e,r){var t=r.chart.getDatasetMeta(r.datasetIndex).vScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var a=t.getBasePixel();return e.horizontal?{x:a,y:null}:{x:null,y:a}}function Re(e){return e instanceof Ce?R.arc:e instanceof Ae?R.point:e instanceof Ie?R.bar:R.fallback}function De(e,r,t,a,s,i){var o=Math.PI/2;if(i){var l=Math.min(i,s/2,a/2),d=r+l,c=t+l,h=r+a-l,u=t+s-l;e.moveTo(r,c),d<h&&c<u?(e.arc(d,c,l,-Math.PI,-o),e.arc(h,c,l,-o,0),e.arc(h,u,l,0,o),e.arc(d,u,l,o,Math.PI)):d<h?(e.moveTo(d,t),e.arc(h,c,l,-o,o),e.arc(d,c,l,o,Math.PI+o)):c<u?(e.arc(d,c,l,-Math.PI,0),e.arc(d,u,l,0,Math.PI)):e.arc(d,c,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(r,t)}else e.rect(r,t,a,s)}function Le(e,r,t){var a=t.backgroundColor,s=t.borderColor,i=t.borderWidth;!a&&(!s||!i)||(e.beginPath(),De(e,b(r.x)+i/2,b(r.y)+i/2,b(r.w)-i,b(r.h)-i,t.borderRadius),e.closePath(),a&&(e.fillStyle=a,e.fill()),s&&i&&(e.strokeStyle=s,e.lineWidth=i,e.lineJoin="miter",e.stroke()))}function ze(e,r,t){var a=t.lineHeight,s=e.w,i=e.x,o=e.y+a/2;return r==="center"?i+=s/2:(r==="end"||r==="right")&&(i+=s),{h:a,w:s,x:i,y:o}}function Oe(e,r,t){var a=e.shadowBlur,s=t.stroked,i=b(t.x),o=b(t.y),l=b(t.w);s&&e.strokeText(r,i,o,l),t.filled&&(a&&s&&(e.shadowBlur=0),e.fillText(r,i,o,l),a&&s&&(e.shadowBlur=a))}function We(e,r,t,a){var s=a.textAlign,i=a.color,o=!!i,l=a.font,d=r.length,c=a.textStrokeColor,h=a.textStrokeWidth,u=c&&h,v;if(!(!d||!o&&!u))for(t=ze(t,s,l),e.font=l.string,e.textAlign=s,e.textBaseline="middle",e.shadowBlur=a.textShadowBlur,e.shadowColor=a.textShadowColor,o&&(e.fillStyle=i),u&&(e.lineJoin="round",e.lineWidth=h,e.strokeStyle=c),v=0,d=r.length;v<d;++v)Oe(e,r[v],{stroked:u,filled:o,w:t.w,x:t.x,y:t.y+t.h*v})}var oe=function(e,r,t,a){var s=this;s._config=e,s._index=a,s._model=null,s._rects=null,s._ctx=r,s._el=t};S(oe.prototype,{_modelize:function(e,r,t,a){var s=this,i=s._index,o=be(f([t.font,{}],a,i)),l=f([t.color,we.color],a,i);return{align:f([t.align,"center"],a,i),anchor:f([t.anchor,"center"],a,i),area:a.chart.chartArea,backgroundColor:f([t.backgroundColor,null],a,i),borderColor:f([t.borderColor,null],a,i),borderRadius:f([t.borderRadius,0],a,i),borderWidth:f([t.borderWidth,0],a,i),clamp:f([t.clamp,!1],a,i),clip:f([t.clip,!1],a,i),color:l,display:e,font:o,lines:r,offset:f([t.offset,4],a,i),opacity:f([t.opacity,1],a,i),origin:je(s._el,a),padding:ke(f([t.padding,4],a,i)),positioner:Re(s._el),rotation:f([t.rotation,0],a,i)*(Math.PI/180),size:I.textSize(s._ctx,r,o),textAlign:f([t.textAlign,"start"],a,i),textShadowBlur:f([t.textShadowBlur,0],a,i),textShadowColor:f([t.textShadowColor,l],a,i),textStrokeColor:f([t.textStrokeColor,l],a,i),textStrokeWidth:f([t.textStrokeWidth,0],a,i)}},update:function(e){var r=this,t=null,a=null,s=r._index,i=r._config,o,l,d,c=f([i.display,!0],e,s);c&&(o=e.dataset.data[s],l=Me(te(i.formatter,[o,e]),o),d=A(l)?[]:I.toTextLines(l),d.length&&(t=r._modelize(c,d,i,e),a=$e(t))),r._model=t,r._rects=a},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,r){var t=this,a=e.ctx,s=t._model,i=t._rects,o;this.visible()&&(a.save(),s.clip&&(o=s.area,a.beginPath(),a.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),a.clip()),a.globalAlpha=I.bound(0,s.opacity,1),a.translate(b(r.x),b(r.y)),a.rotate(s.rotation),Le(a,i.frame,s),We(a,s.lines,i.text,s),a.restore())}});var Ne=Number.MIN_SAFE_INTEGER||-9007199254740991,Fe=Number.MAX_SAFE_INTEGER||9007199254740991;function C(e,r,t){var a=Math.cos(t),s=Math.sin(t),i=r.x,o=r.y;return{x:i+a*(e.x-i)-s*(e.y-o),y:o+s*(e.x-i)+a*(e.y-o)}}function J(e,r){var t=Fe,a=Ne,s=r.origin,i,o,l,d,c;for(i=0;i<e.length;++i)o=e[i],l=o.x-s.x,d=o.y-s.y,c=r.vx*l+r.vy*d,t=Math.min(t,c),a=Math.max(a,c);return{min:t,max:a}}function D(e,r){var t=r.x-e.x,a=r.y-e.y,s=Math.sqrt(t*t+a*a);return{vx:(r.x-e.x)/s,vy:(r.y-e.y)/s,origin:e,ln:s}}var ne=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};S(ne.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,r,t){this._rotation=t,this._rect={x:r.x+e.x,y:r.y+e.y,w:r.w,h:r.h}},contains:function(e){var r=this,t=1,a=r._rect;return e=C(e,r.center(),-r._rotation),!(e.x<a.x-t||e.y<a.y-t||e.x>a.x+a.w+t*2||e.y>a.y+a.h+t*2)},intersects:function(e){var r=this._points(),t=e._points(),a=[D(r[0],r[1]),D(r[0],r[3])],s,i,o;for(this._rotation!==e._rotation&&a.push(D(t[0],t[1]),D(t[0],t[3])),s=0;s<a.length;++s)if(i=J(r,a[s]),o=J(t,a[s]),i.max<o.min||o.max<i.min)return!1;return!0},_points:function(){var e=this,r=e._rect,t=e._rotation,a=e.center();return[C({x:r.x,y:r.y},a,t),C({x:r.x+r.w,y:r.y},a,t),C({x:r.x+r.w,y:r.y+r.h},a,t),C({x:r.x,y:r.y+r.h},a,t)]}});function le(e,r,t){var a=r.positioner(e,r),s=a.vx,i=a.vy;if(!s&&!i)return{x:a.x,y:a.y};var o=t.w,l=t.h,d=r.rotation,c=Math.abs(o/2*Math.cos(d))+Math.abs(l/2*Math.sin(d)),h=Math.abs(o/2*Math.sin(d))+Math.abs(l/2*Math.cos(d)),u=1/Math.max(Math.abs(s),Math.abs(i));return c*=s*u,h*=i*u,c+=r.offset*s,h+=r.offset*i,{x:a.x+c,y:a.y+h}}function Ve(e,r){var t,a,s,i;for(t=e.length-1;t>=0;--t)for(s=e[t].$layout,a=t-1;a>=0&&s._visible;--a)i=e[a].$layout,i._visible&&s._box.intersects(i._box)&&r(s,i);return e}function He(e){var r,t,a,s,i,o,l;for(r=0,t=e.length;r<t;++r)a=e[r],s=a.$layout,s._visible&&(l=new Proxy(a._el,{get:(d,c)=>d.getProps([c],!0)[c]}),i=a.geometry(),o=le(l,a.model(),i),s._box.update(o,i,a.rotation()));return Ve(e,function(d,c){var h=d._hidable,u=c._hidable;h&&u||u?c._visible=!1:h&&(d._visible=!1)})}var T={prepare:function(e){var r=[],t,a,s,i,o;for(t=0,s=e.length;t<s;++t)for(a=0,i=e[t].length;a<i;++a)o=e[t][a],r.push(o),o.$layout={_box:new ne,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return r.sort(function(l,d){var c=l.$layout,h=d.$layout;return c._idx===h._idx?h._set-c._set:h._idx-c._idx}),this.update(r),r},update:function(e){var r=!1,t,a,s,i,o;for(t=0,a=e.length;t<a;++t)s=e[t],i=s.model(),o=s.$layout,o._hidable=i&&i.display==="auto",o._visible=s.visible(),r|=o._hidable;r&&He(e)},lookup:function(e,r){var t,a;for(t=e.length-1;t>=0;--t)if(a=e[t].$layout,a&&a._visible&&a._box.contains(r))return e[t];return null},draw:function(e,r){var t,a,s,i,o,l;for(t=0,a=r.length;t<a;++t)s=r[t],i=s.$layout,i._visible&&(o=s.geometry(),l=le(s._el,s.model(),o),i._box.update(l,o,s.rotation()),s.draw(e,l))}},Ye=function(e){if(A(e))return null;var r=e,t,a,s;if(Se(e))if(!A(e.label))r=e.label;else if(!A(e.r))r=e.r;else for(r="",t=Object.keys(e),s=0,a=t.length;s<a;++s)r+=(s!==0?", ":"")+t[s]+": "+e[t[s]];return""+r},qe={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Ye,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},_="$datalabels",de="$default";function Ge(e,r){var t=e.datalabels,a={},s=[],i,o;return t===!1?null:(t===!0&&(t={}),r=S({},[r,t]),i=r.labels||{},o=Object.keys(i),delete r.labels,o.length?o.forEach(function(l){i[l]&&s.push(S({},[r,i[l],{_key:l}]))}):s.push(r),a=s.reduce(function(l,d){return Te(d.listeners||{},function(c,h){l[h]=l[h]||{},l[h][d._key||de]=c}),delete d.listeners,l},{}),{labels:s,listeners:a})}function H(e,r,t,a){if(r){var s=t.$context,i=t.$groups,o;r[i._set]&&(o=r[i._set][i._key],o&&te(o,[s,a])===!0&&(e[_]._dirty=!0,t.update(s)))}}function Ue(e,r,t,a,s){var i,o;!t&&!a||(t?a?t!==a&&(o=i=!0):o=!0:i=!0,o&&H(e,r.leave,t,s),i&&H(e,r.enter,a,s))}function Xe(e,r){var t=e[_],a=t._listeners,s,i;if(!(!a.enter&&!a.leave)){if(r.type==="mousemove")i=T.lookup(t._labels,r);else if(r.type!=="mouseout")return;s=t._hovered,t._hovered=i,Ue(e,a,s,i,r)}}function Ze(e,r){var t=e[_],a=t._listeners.click,s=a&&T.lookup(t._labels,r);s&&H(e,a,s,r)}var Je={id:"datalabels",defaults:qe,beforeInit:function(e){e[_]={_actives:[]}},beforeUpdate:function(e){var r=e[_];r._listened=!1,r._listeners={},r._datasets=[],r._labels=[]},afterDatasetUpdate:function(e,r,t){var a=r.index,s=e[_],i=s._datasets[a]=[],o=e.isDatasetVisible(a),l=e.data.datasets[a],d=Ge(l,t),c=r.meta.data||[],h=e.ctx,u,v,z,O,P,W,x,y;for(h.save(),u=0,z=c.length;u<z;++u)if(x=c[u],x[_]=[],o&&x&&e.getDataVisibility(u)&&!x.skip)for(v=0,O=d.labels.length;v<O;++v)P=d.labels[v],W=P._key,y=new oe(P,h,x,u),y.$groups={_set:a,_key:W||de},y.$context={active:!1,chart:e,dataIndex:u,dataset:l,datasetIndex:a},y.update(y.$context),x[_].push(y),i.push(y);h.restore(),S(s._listeners,d.listeners,{merger:function(M,E,Y){E[M]=E[M]||{},E[M][r.index]=Y[M],s._listened=!0}})},afterUpdate:function(e){e[_]._labels=T.prepare(e[_]._datasets)},afterDatasetsDraw:function(e){T.draw(e,e[_]._labels)},beforeEvent:function(e,r){if(e[_]._listened){var t=r.event;switch(t.type){case"mousemove":case"mouseout":Xe(e,t);break;case"click":Ze(e,t);break}}},afterEvent:function(e){var r=e[_],t=r._actives,a=r._actives=e.getActiveElements(),s=I.arrayDiff(t,a),i,o,l,d,c,h,u;for(i=0,o=s.length;i<o;++i)if(c=s[i],c[1])for(u=c[0].element[_]||[],l=0,d=u.length;l<d;++l)h=u[l],h.$context.active=c[1]===1,h.update(h.$context);(r._dirty||s.length)&&(T.update(r._labels),e.render()),delete r._dirty}};const Ke={class:"py-4 px-4"},Qe={class:"mx-auto"},et={class:"align-middle inline-block min-w-full"},tt={class:"flex justify-between pb-4 relative text-gray-400 focus-within:text-gray-600 items-center"},rt={class:"flex space-x-2"},at={class:"relative"},st=n("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[n("svg",{class:"h-10 w-4 text-gray-400",viewBox:"0 0 24 24",fill:"none"},[n("path",{d:"M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),it={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},ot={class:"min-w-full divide-y divide-gray-200"},nt=n("thead",{class:"bg-gray-300"},[n("tr",null,[n("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/14"},"#"),n("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-3/14"},"Level"),n("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/14"},"Result"),n("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/14"},"Date Taken"),n("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-2/14"},"Action")])],-1),lt={class:"bg-white divide-y divide-gray-200"},dt={key:0},ct=n("td",{class:"text-center",colspan:"10"},[n("div",{class:"p-3"}," No Record Found! ")],-1),ht=[ct],ut={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm font-medium text-gray-700"},_t={class:"px-6 py-4 whitespace-nowrap"},pt={class:"text-sm font-medium text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm font-medium text-gray-900"},mt={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm font-medium text-gray-900"},xt={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium"},bt={class:"flex justify-center space-x-2"},wt={key:0,class:"flex items-center space-x-2"},kt=n("svg",{class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",viewBox:"0 0 24 24"},null,-1),Mt=n("span",null,"Generating...",-1),Ct=[kt,Mt],At={key:1},It=n("h3",{class:"text-gray-900 text-xl font-semibold"}," Diagnostic Test Report ",-1),Tt={class:"h-[297mm] overflow-y-auto no-scrollbar",id:"report"},St={class:"flex flex-col justify-between space-y-2"},Pt={class:"grid grid-rows-1"},Et={class:"flex justify-center"},Bt={class:"font-bold text-slate-800 text-2xl py-4 uppercase"},$t={class:"grid grid-rows-1"},jt={class:"grid grid-cols-2 px-4 space-x-4"},Rt=n("div",{class:"flex items-center justify-center border-2 p-6 rounded-lg h-[300px]"},[n("div",{id:"chart_image"}),n("canvas",{id:"scatter-chart",class:"hidden m-0"}),n("canvas",{id:"bar-chart",class:"hidden m-0"})],-1),Dt={class:"border-2 p-6 rounded-lg"},Lt={class:"mt-2 divide-y divide-gray-300"},zt={class:"py-3 flex justify-between text-sm font-medium"},Ot=n("dt",{class:"text-gray-500 min-w-[70px]"},"Name : ",-1),Wt={class:"text-gray-900 break-word"},Nt={class:"py-3 flex justify-between text-sm font-medium"},Ft=n("dt",{class:"text-gray-500"},"Age :",-1),Vt={class:"text-gray-900"},Ht={class:"py-3 flex justify-between text-sm font-medium"},Yt=n("dt",{class:"text-gray-500"},"Result :",-1),qt={class:"text-gray-900"},Gt={class:"py-3 flex justify-between text-sm font-medium"},Ut=n("dt",{class:"text-gray-500"},"Date :",-1),Xt={class:"text-gray-900"},Zt={class:"py-3 flex justify-between text-sm font-medium"},Jt=n("dt",{class:"text-gray-500"},"Time :",-1),Kt={class:"text-gray-900"},Qt={class:"grid grid-rows-1"},er={class:"grid grid-cols-1"},tr={class:"flex justify-center px-4"},rr={class:"w-full"},ar=n("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-indigo-100"},[n("tr",null,[n("th",{class:"p-2 whitespace-nowrap border-2 rounded-tr",width:"3"},[n("div",{class:"flex justify-center font-semibold text-left text-gray-700"},"#")]),n("th",{class:"p-2 whitespace-nowrap border-2"},[n("div",{class:"flex font-semibold justify-center text-gray-700"},"Question")]),n("th",{class:"p-2 whitespace-nowrap border-2 w-8"},[n("div",{class:"flex justify-center font-semibold text-left text-gray-700"},"Result")])])],-1),sr={class:"text-sm divide-y divide-gray-100"},ir={class:"p-2 whitespace-nowrap border-2 text-center align-middle"},or={class:"p-2 whitespace-nowrap border-2 align-middle"},nr={class:"flex flex-wrap"},lr={class:"whitespace-normal font-semibold"},dr={class:"p-2 whitespace-nowrap border-2 text-center align-middle"},cr={class:"flex justify-center"},hr={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-check-circle-fill text-green-500",viewBox:"0 0 16 16"},ur=n("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1),fr=[ur],_r={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-x-circle-fill text-red-500",viewBox:"0 0 16 16"},pr=n("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1),vr=[pr],yr={class:"flex justify-between space-x-2 items-center p-4 border-t border-gray-200 rounded-b"},mr={name:"_blank",specs:[],styles:["http://127.0.0.1:8000/css/app.css"],timeout:1e3,autoClose:!0,windowTitle:window.document.title},gr={components:{SearchIcon:ye,TrashIcon:me,PencilIcon:ve,ConfirmationModal:ge,Head:K,Link:he,Multiselect:xe,Modal:ee,Pagination:Q},props:{filter:Object},data(){return{current_chart_type:"",processing:!1,processing_item:[],bar_chart:"",scatter_chart:"",show_report:!1,report:{title:"",name:"",age:"",result:"",datetime:""},params:{search:this.filter.search?this.filter.search:""},chart_data:{categories:{label:[],data:[]},total_answers:4},answer_data:[]}},watch:{params:{handler(){this.params&&this.$inertia.get(this.route("diagnostic_test.saved_result.details"),this.params,{replace:!0,preserveState:!0})},deep:!0}},methods:{async waitTwoSeconds(){await new Promise(e=>setTimeout(e,2e3))},print(){this.current_chart_type==1?(document.getElementById("bar-chart").style.display="none",document.getElementById("chart_image").style.display="block"):(document.getElementById("scatter-chart").style.display="none",document.getElementById("chart_image").style.display="block"),this.waitTwoSeconds(),this.$htmlToPaper("report",mr,()=>{this.current_chart_type==1?(document.getElementById("bar-chart").style.display="block",document.getElementById("chart_image").style.display="none"):(document.getElementById("scatter-chart").style.display="block",document.getElementById("chart_image").style.display="none")})},viewReport(e,r,t,a){this.current_chart_type=a,this.processing=!0,this.processing_item[e].process=!0,this.chart_data.total_answers=t,this.bar_chart&&this.bar_chart.destroy(),this.scatter_chart&&this.scatter_chart.destroy(),this.displayChart(e,r,a)},displayChart(e,r,t){q.get(route("diagnostic_test.get_dt_categories"),{params:{dt_id:r,chart_type:t}}).then(a=>{this.chart_data.categories.label=a.data.label,this.chart_data.categories.data=a.data.data,this.chart_data.categories.data=this.splitResultByCategory(e),this.initChart(t),this.initAnswers(e),this.initInfos(e)}).catch(a=>{console.error(a)})},initChart(e){if(e==1){let t=document.getElementById("bar-chart").getContext("2d");const a=new X(t,{type:"bar",data:{labels:this.chart_data.categories.label,datasets:[{data:this.chart_data.categories.data,borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{onComplete:function(){document.getElementById("chart_image").innerHTML='<img src="'+this.toBase64Image()+'">'}},plugins:{legend:{display:!1},datalabels:{anchor:"end",align:"end",color:"#000000",font:{size:14},formatter:function(s,i){return s}}},scales:{y:{min:0,max:this.chart_data.total_answers,stepSize:1,ticks:{beginAtZero:!0}},x:{min:0,max:this.chart_data.total_answers,stepSize:1,ticks:{beginAtZero:!0}}},ticks:{precision:0}},plugins:[Je]});this.bar_chart=a}if(e==2){const r=this.chart_data.total_answers,t={id:"scatterArbitraryLine",beforeDatasetDraw(l,d,c){const{ctx:h,chartArea:{top:u,bottom:v,left:z,right:O,width:P,height:W},scales:{x,y}}=l;M();function M(E,Y,xr,br){h.save(),h.beginPath(),h.strokeStyle="rgba(170, 170, 170, 1)",h.lineWidth=3,h.moveTo(x.getPixelForValue(0),y.getPixelForValue(0)),h.lineTo(x.getPixelForValue(r),y.getPixelForValue(r)),h.stroke(),h.restore()}}},a={id:"scatterAnnotationLine",beforeDraw:l=>{if(l.tooltip._active&&l.tooltip._active.length){const d=l.ctx;d.save();const c=l.tooltip._active[0];d.beginPath(),d.moveTo(c.element.x,l.chartArea.top),d.lineTo(c.element.x,c.element.y),d.lineWidth=2,d.strokeStyle="white",d.stroke(),d.restore(),d.beginPath(),d.moveTo(c.element.x,c.element.y),d.lineTo(c.element.x,l.chartArea.bottom),d.lineWidth=2,d.strokeStyle="red",d.stroke(),d.restore(),d.beginPath(),d.moveTo(l.chartArea.left,c.element.y),d.lineTo(c.element.x,c.element.y),d.lineWidth=2,d.strokeStyle="red",d.stroke(),d.restore()}}};let i=document.getElementById("scatter-chart").getContext("2d");const o=new X(i,{type:"scatter",data:{labels:this.chart_data.total_answers,datasets:[{data:[{x:this.chart_data.categories.data[0],y:this.chart_data.categories.data[1]}],borderColor:"rgba(255, 8, 0, 1)",pointStyle:"crossRot",radius:6,hoverRadius:10,fill:!1}]},options:{animation:{onComplete:function(){document.getElementById("chart_image").innerHTML='<img src="'+this.toBase64Image()+'">'}},plugins:{legend:{display:!1}},scales:{y:{min:0,max:this.chart_data.total_answers,stepSize:1,ticks:{beginAtZero:!0},title:{display:!0,text:"Operations"}},x:{min:0,max:this.chart_data.total_answers,stepSize:1,ticks:{beginAtZero:!0},title:{display:!0,text:"Numbers"}}},ticks:{precision:0}},plugins:[t,a]});this.scatter_chart=o}},splitResultByCategory(e){const t=this.$page.props.answer_record.data[e].answer_record.filter(s=>s.correct).reduce((s,i)=>(i.correct&&(s[i.question_category_id]?s[i.question_category_id]++:s[i.question_category_id]=1),s),{}),a={};return Object.keys(t).forEach((s,i)=>{a[i]=t[s]}),Object.values(a)},initAnswers(e){this.answer_data=this.$page.props.answer_record.data[e].answer_record},initInfos(e){q.get(route("diagnostic_test.get_saved_result_info"),{params:{result_id:this.$page.props.result_id}}).then(r=>{this.report.title=this.$page.props.answer_record.data[e].dt_name,this.report.name=r.data.child_name,this.report.age=r.data.child_age,this.report.result=this.$page.props.answer_record.data[e].total_correct_answers+"/"+this.$page.props.answer_record.data[e].total_answers,this.report.datetime=L(r.data.created_at).format("DD/MM/YYYY, hh:mm A"),this.show_report=!0,this.processing=!1,this.processing_item[e].process=!1}).catch(r=>{console.error(r)})}},created(){this.$page.props.answer_record.data.map(()=>{this.processing_item.push({process:!1})})}},Fr=Object.assign(gr,{__name:"Details",setup(e){return(r,t)=>{const a=ce("debounce");return g(),m(N,null,[k(B(K),{title:"Diagnostic Test"}),k(pe,null,{header:w(()=>[]),default:w(()=>[n("div",Ke,[n("div",Qe,[n("div",et,[n("div",tt,[n("div",rt,[n("div",at,[st,ue(n("input",{type:"text",class:"h-10 border-2 border-gray-300 w-full appearance-none focus:ring-0 focus:border-gray-300 py-1 pl-10 pr-4 text-gray-700 bg-white rounded-md",placeholder:"Search","onUpdate:modelValue":t[0]||(t[0]=s=>r.params.search=s)},null,512),[[a,r.search,"800ms"],[fe,r.params.search]])])])]),n("div",it,[n("table",ot,[nt,n("tbody",lt,[r.$page.props.answer_record.data.length?_e("",!0):(g(),m("tr",dt,ht)),(g(!0),m(N,null,G(r.$page.props.answer_record.data,(s,i)=>(g(),m("tr",{class:"hover:bg-gray-200",key:s.id},[n("td",ut,[n("div",ft,p(i+1),1)]),n("td",_t,[n("div",pt,p(s.dt_name),1)]),n("td",vt,[n("div",yt,p(s.total_correct_answers+"/"+s.total_answers),1)]),n("td",mt,[n("div",gt,p(B(L)(s.created_at).format("DD/MM/YYYY")),1)]),n("td",xt,[n("div",bt,[k(F,{buttonType:"blue",class:"py-1 px-2",onClick:o=>!r.processing_item[i].process&&!r.processing?r.viewReport(i,s.dt_id,s.total_answers,s.chart_type):""},{default:w(()=>[r.processing_item[i].process&&r.processing?(g(),m("div",wt,Ct)):(g(),m("span",At,"View Report"))]),_:2},1032,["onClick"])])])]))),128))])]),k(Q,{page_data:r.$page.props.answer_record,params:"&result_id="+r.$page.props.result_id},null,8,["page_data","params"]),k(ee,{showModal:r.show_report,onHideModal:t[2]||(t[2]=s=>r.show_report=!1)},{header:w(()=>[It]),content:w(()=>[n("div",Tt,[n("div",St,[n("div",Pt,[n("div",Et,[n("h1",Bt,"Diagnostic Test "+p(r.report.title),1)])]),n("div",$t,[n("div",jt,[Rt,n("div",Dt,[n("dl",Lt,[n("div",zt,[Ot,n("dd",Wt,p(r.report.name),1)]),n("div",Nt,[Ft,n("dd",Vt,p(r.report.age),1)]),n("div",Ht,[Yt,n("dd",qt,p(r.report.result),1)]),n("div",Gt,[Ut,n("dd",Xt,p(B(L)(r.report.datetime).format("DD/MM/Y")),1)]),n("div",Zt,[Jt,n("dd",Kt,p(B(L)(r.report.datetime).format("h:mm A")),1)])])])])]),n("div",Qt,[n("div",er,[n("div",tr,[n("table",rr,[ar,n("tbody",sr,[(g(!0),m(N,null,G(r.answer_data,(s,i)=>(g(),m("tr",null,[n("td",ir,p(++i),1),n("td",or,[n("div",nr,[n("p",lr,p(s.question),1)])]),n("td",dr,[n("div",cr,[s.correct?(g(),m("svg",hr,fr)):(g(),m("svg",_r,vr))])])]))),256))])])])])])])])]),footer:w(()=>[n("div",yr,[k(F,{buttonType:"info",onClick:r.print},{default:w(()=>[U("Print")]),_:1},8,["onClick"]),k(F,{buttonType:"gray",onClick:t[1]||(t[1]=s=>r.show_report=!1)},{default:w(()=>[U("Close")]),_:1})])]),_:1},8,["showModal"])])])])])]),_:1})],64)}}});export{Fr as default};
