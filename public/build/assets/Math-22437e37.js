import{c as n,b as a,u as p,w as d,F as g,H as w,L as U,ad as u,o as i,d as t,e as C,j as x,h as m,t as c,n as y,k as h,C as D,f as v,y as L,l as O,g as P}from"./app-2d0f07b3.js";import{B as T}from"./Authenticated-9a511fb4.js";import{B as b}from"./Button-48eae06c.js";import V from"./StudentInformation-5eb4b59c.js";import{Z as k}from"./main-29e02489.js";import{M as j}from"./Modal-3b9973cc.js";import{h as B}from"./default.css_vue_type_style_index_0_src_true_lang-722ed9a0.js";import{s as _}from"./multiselect-17d6ef58.js";/* empty css                                                         *//* empty css            */import"./ApplicationLogo-365a8141.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./VueFinalModal.esm-6161a46e.js";const M={class:"md:grid md:grid-cols-2"},N={class:"md:mt-0 md:col-span-2"},$={class:"px-4 py-5 bg-indigo-50 space-y-6 sm:p-6"},A={class:"grid grid-rows-1 grid-cols-1 sm:grid-cols-1 grid-flow-col gap-4"},R={class:"sm:row-span-3"},z={class:"grid grid-rows-1 grid-cols-1 sm:grid-cols-1 grid-flow-col gap-4"},H={class:"sm:row-span-3"},E={class:"p-6 bg-white border border-gray-200 rounded-lg shadow-md"},F=t("div",{class:"mb-5"},[t("h1",{class:"font-bold text-indigo-800 self-end"},"Progress Report Listing"),t("div",{class:"border-b border-dashed border-indigo-900 mt-1"})],-1),Z={class:"mb-4"},Y={class:"overflow-x-auto"},q={class:"table-auto min-w-full divide-y divide-gray-200"},G=t("thead",{class:"bg-gray-300"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/12"},"Date"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/12"},"Term / Book"),t("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-2/12"},"Status"),t("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-2/12"},"Action")])],-1),I={class:"bg-white divide-y divide-gray-200"},J={key:0},K=t("td",{class:"text-center",colspan:"10"},[t("div",{class:"p-3"}," No Record Found! ")],-1),Q=[K],W={class:"px-4 py-2 whitespace-nowrap"},X={class:"text-sm font-medium text-gray-700"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"text-sm font-medium text-gray-700"},se={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium"},oe={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium"},re=t("h3",{class:"text-gray-900 text-xl font-semibold"}," Update Progress Report ",-1),ne={class:"p-6 overflow-y-auto no-scrollbar"},ie={class:"grid grid-rows-1"},ae={class:"grid grid-cols-2 gap-4"},de={class:"mb-3"},le=t("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Date ",-1),ce={class:"mt-1 flex rounded-md.shadow-sm"},pe={class:"mb-3"},ue=t("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Term / Book ",-1),ge={class:"mt-1 flex rounded-md.shadow-sm"},me=t("div",{class:"grid grid-cols-1"},[t("hr",{class:"my-4"})],-1),he={class:"grid grid-cols-12 gap-4"},be={class:"col-span-5"},_e={class:"mb-3"},fe=t("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Unit ",-1),xe={class:"mt-1 flex rounded-md.shadow-sm"},ye={class:"col-span-5"},ve={class:"mb-3"},we=t("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Lesson ",-1),ke={class:"mt-1 flex rounded-md.shadow-sm"},je={class:"col-span-2 self-end"},Se={class:"mb-3"},Ue=t("label",{for:"",class:"block text-sm font-bold text-gray-700"},null,-1),Ce={class:"mt-1 flex rounded-md.shadow-sm"},De={key:0,class:"grid grid-cols-1 py-3"},Le=t("label",{for:"",class:"block text-sm font-bold text-gray-700"},"Objectives",-1),Oe={key:0,class:"p-3 bg-gray-50"},Pe={key:1,class:"flex justify-center py-4 items-center space-x-2"},Te=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-arrow-repeat animate-spin",viewBox:"0 0 16 16"},[t("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"}),t("path",{"fill-rule":"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"})],-1),Ve=t("span",null,"Loading...",-1),Be=[Te,Ve],Me={key:1,class:"grid grid-cols-1 divide-y divide-neutral-200 border-x border-t border-b mb-3"},Ne={class:"p-5 bg-gray-50 hover:bg-gray-100"},$e={class:"group space-y-4"},Ae={class:"flex justify-between items-center font-medium cursor-pointer list-none"},Re={class:"ml-2 text-sm"},ze={class:"flex space-x-4"},He={for:"helper-checkbox",class:"font-medium text-gray-900"},Ee=["onClick"],Fe={id:"helper-checkbox-text",class:"text-xs font-normal text-gray-500"},Ze=t("span",{class:"transition group-open:rotate-180"},[t("svg",{fill:"none",height:"24","shape-rendering":"geometricPrecision",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",viewBox:"0 0 24 24",width:"24"},[t("path",{d:"M6 9l6 6 6-6"})])],-1),Ye={class:"text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg"},qe={class:"w-full border-b border-gray-200 rounded-t-lg"},Ge={class:"flex items-center pl-3"},Ie=["id","value","onUpdate:modelValue"],Je=["for"],Ke={class:"grid grid-cols-1"},Qe={class:"mb-3"},We=t("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Comments ",-1),Xe={class:"mt-1 flex rounded-md.shadow-sm"},et={class:"grid grid-cols-2 gap-4"},tt={class:"mb-3"},st=t("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Status ",-1),ot={class:"mt-1 flex rounded-md.shadow-sm"},rt=["value"],nt={class:"flex justify-end space-x-2 items-center p-4 border-t border-gray-200 rounded-b"},it={components:{Head:w,Link:U,Datepicker:k,Modal:j,Multiselect:_},data(){return{show_progress_report:!1,objectives_not_found:!1,progress_report_list:{},disabled:{terms_books:!0,units:!0,lessons:!0},options:{terms_books:[],units:[],lessons:[],objectives:[]},loading:{terms_books:!1,units:!1,lessons:!1,objectives:!1},search:{unit_id:"",lesson_id:""},form:{date:"",term_book_id:"",units_lessons:[],comments:"",attendance_status:""}}},methods:{getTermBookName(s){const e=this.$page.props.math_terms_books.find(o=>o.id==this.progress_report_list[s].math_term_book_id);return(e==null?void 0:e.name)||""},getUnitName(s){const e=this.options.units.find(o=>o.id==s);return(e==null?void 0:e.name)||""},getLessonName(s){const e=this.options.lessons.find(o=>o.id==s);return(e==null?void 0:e.name)||""},getObjectiveName(s){const e=this.options.objectives.find(o=>o.id==s);return(e==null?void 0:e.name)||""},getAttendanceStatus(s){const e=this.$page.props.attendance_status.find(o=>o.id==this.progress_report_list[s].attendance_status);return(e==null?void 0:e.name)||""},getAttendanceStatusColor(s){const e=this.$page.props.attendance_status.find(r=>r.id==this.progress_report_list[s].attendance_status);return{1:"text-green-100 bg-green-600",2:"text-red-100 bg-red-600",3:"text-gray-700 bg-gray-300"}[e==null?void 0:e.id]||""},viewProgressReport(s){this.search.unit_id="",this.search.lesson_id="",this.form.units_lessons=[],this.options.units=[],this.disabled.terms_books=!0,this.disabled.units=!0,this.disabled.lessons=!0;const e=this.progress_report_list[s];this.form.report_id=s,this.form.date=e.date,this.form.term_book_id=e.math_term_book_id??"",this.form.comments=e.comments??"",this.form.attendance_status=e.attendance_status,this.getTermsBooks(s),this.getUnitsLessons(s),this.getUnitsLessonsObjectives(s),this.form.term_book_id&&this.getUnits(this.form.term_book_id,!0),this.show_progress_report=!0},updateProgressReport(){this.$inertia.post(route("progress_report.store_math"),this.form,{onBefore:s=>{},preserveScroll:!0,preserveState:!1})},async getUnitsLessons(s){const e=await u.get(route("progress_report.get_math_units_lessons",s));this.form.units_lessons=e.data.units_lessons,this.options.units=e.data.units,this.options.lessons=e.data.lessons},async getUnitsLessonsObjectives(s){this.loading.objectives=!0,this.objectives_not_found=!1,this.options.objectives=[];const e=await u.get(route("progress_report.get_math_units_lessons_objectives",s));e.data.length?this.options.objectives=e.data:this.objectives_not_found=!0,this.loading.objectives=!1},async getTermsBooks(s){if(s){this.loading.terms_books=!0;const e=await u.get(route("progress_report.get_math_terms_books",s));this.options.terms_books=e.data,this.disabled.terms_books=!1,this.loading.terms_books=!1}},async getUnits(s,e=!1){if(s){this.loading.units=!0,this.disabled.units=!0,this.disabled.lessons=!0,this.options.units=[],this.options.lessons=[],this.search.unit_id="",this.search.lesson_id="";const o=await u.get(route("progress_report.get_math_units",s));this.options.units=o.data,this.disabled.units=!1,this.loading.units=!1}else this.options.units=[],this.options.lessons=[],this.disabled.units=!0,this.disabled.lessons=!0},async getLessons(s,e=!1){if(s){e?this.loading.lessons=!1:this.loading.lessons=!0,this.options.lessons=[],this.disabled.lessons=!0;const o=await u.get(route("progress_report.get_math_lessons",s));this.options.lessons=o.data,e||(this.form.lesson_id=""),this.disabled.lessons=!1,this.loading.lessons=!1}else this.options.lessons=[],this.disabled.lessons=!0},addUnitLesson(){if(this.search.unit_id&&this.search.lesson_id){const s=this.options.objectives.filter(e=>e.lesson_id===this.search.lesson_id);console.log(s),s.length<1?(this.loading.objectives=!0,u.get(route("progress_report.get_math_objectives",this.search.lesson_id)).then(e=>{e.data.forEach(o=>{this.options.objectives.push(o)}),this.form.units_lessons.push({math_unit_id:this.search.unit_id,math_lesson_id:this.search.lesson_id,math_objective_id:[]}),this.loading.objectives=!1})):this.form.units_lessons.push({math_unit_id:this.search.unit_id,math_lesson_id:this.search.lesson_id,math_objective_id:[]})}},deleteUnitLesson(s){this.form.units_lessons.splice(s,1)}},created(){this.$page.props.progress_reports.forEach(s=>{this.progress_report_list[s.id]={id:s.id,date:s.date,math_term_book_id:s.math_term_book_id,comments:s.comments,attendance_status:s.attendance_status}})}},vt=Object.assign(it,{__name:"Math",setup(s){return(e,o)=>(i(),n(g,null,[a(p(w),{title:"Progress Report"}),a(T,null,{header:d(()=>[]),default:d(()=>[t("div",M,[t("div",N,[t("form",{onSubmit:o[0]||(o[0]=C((...r)=>e.submit&&e.submit(...r),["prevent"]))},[t("div",$,[t("div",A,[t("div",R,[a(V)])]),t("div",z,[t("div",H,[t("div",E,[F,t("div",Z,[t("div",Y,[t("table",q,[G,t("tbody",I,[e.$page.props.progress_reports.length?x("",!0):(i(),n("tr",J,Q)),(i(!0),n(g,null,m(e.$page.props.progress_reports,(r,f)=>(i(),n("tr",{class:"hover:bg-gray-200",key:r.report_id},[t("td",W,[t("div",X,c(p(B)(e.progress_report_list[r.id].date).format("DD/MM/Y")),1)]),t("td",ee,[t("div",te,c(e.getTermBookName(r.id)),1)]),t("td",se,[t("span",{class:y(["inline-flex items-center justify-center px-2 py-1 text-xs rounded",e.getAttendanceStatusColor(r.id)])},c(e.getAttendanceStatus(r.id)),3)]),t("td",oe,[a(b,{buttonType:"blue",onClick:l=>e.viewProgressReport(r.id)},{default:d(()=>[h("View / Update")]),_:2},1032,["onClick"])])]))),128))])])])])])])])])],32)])]),a(j,{showModal:e.show_progress_report,onHideModal:o[10]||(o[10]=r=>e.show_progress_report=!1)},{header:d(()=>[re]),content:d(()=>[t("div",ne,[t("div",ie,[t("div",ae,[t("div",de,[le,t("div",ce,[a(p(k),{class:y("w-full rounded-lg shadow-sm"),style:D(e.$page.props.errors.date?"--dp-border-color: #fa9e9e":"--dp-border-color: #cccccc"),enableTimePicker:!1,"auto-apply":!0,placeholder:"Select Date",format:"dd/MM/yyyy",modelValue:e.form.date,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.date=r)},null,8,["style","modelValue"])])]),t("div",pe,[ue,t("div",ge,[a(p(_),{onSelect:o[2]||(o[2]=r=>e.getUnits(e.form.term_book_id)),modelValue:e.form.term_book_id,"onUpdate:modelValue":o[3]||(o[3]=r=>e.form.term_book_id=r),valueProp:"id",appendNewOption:!1,searchable:!0,options:e.options.terms_books,clearOnSelect:!1,canClear:!1,canDeselect:!0,trackBy:"name",label:"name",loading:e.loading.terms_books,placeholder:"Please Select",classes:{container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer rounded-sm bg-white text-base leading-snug border-gray-300",containerDisabled:"cursor-not_allowed bg-gray-100 border focus:border-gray-200 h-10",containerOpen:"rounded-b-none",containerOpenTop:"rounded-t-none",containerActive:"border border-gray-300",search:"w-full absolute inset-0 border-gray-300 focus:outline-none focus:border-transparent focus:ring-0 appearance-none text-base font-sans bg-white rounded-sm",dropdown:"max-h-60 absolute -left-px -right-px bottom-0 transform translate-y-full border border-gray-300 -mt-px overflow-y-scroll z-50 bg-white flex flex-col rounded-b",dropdownTop:"-translate-y-full top-px bottom-auto flex-col-reverse rounded-b-none rounded-t",dropdownHidden:"hidden",options:"flex flex-col p-0 m-0 list-none w-full",optionsTop:"flex-col-reverse",option:"flex items-center justify-start box-border text-left cursor-pointer text-base leading-snug py-2 px-3 text-sm",optionPointed:"text-gray-800 bg-gray-100",optionSelected:"text-white bg-indigo-500",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-indigo-500 opacity-90",optionSelectedDisabled:"text-green-100 bg-green-500 bg-opacity-50 cursor-not-allowed",noOptions:"py-2 px-3 text-gray-600 bg-white text-left",noResults:"py-2 px-3 text-gray-600 bg-white text-left"}},null,8,["modelValue","options","loading"])])])]),me,t("div",he,[t("div",be,[t("div",_e,[fe,t("div",xe,[a(p(_),{onSelect:o[4]||(o[4]=r=>e.getLessons(e.search.unit_id)),modelValue:e.search.unit_id,"onUpdate:modelValue":o[5]||(o[5]=r=>e.search.unit_id=r),valueProp:"id",appendNewOption:!1,searchable:!0,options:e.options.units,clearOnSelect:!1,canClear:!1,canDeselect:!0,trackBy:"name",label:"name",loading:e.loading.units,placeholder:"Please Select",classes:{container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer rounded-sm bg-white text-base leading-snug border-gray-300",containerDisabled:"cursor-not_allowed bg-gray-100 border focus:border-gray-200 h-10",containerOpen:"rounded-b-none",containerOpenTop:"rounded-t-none",containerActive:"border border-gray-300",search:"w-full absolute inset-0 border-gray-300 focus:outline-none focus:border-transparent focus:ring-0 appearance-none text-base font-sans bg-white rounded-sm",dropdown:"max-h-60 absolute -left-px -right-px bottom-0 transform translate-y-full border border-gray-300 -mt-px overflow-y-scroll z-50 bg-white flex flex-col rounded-b",dropdownTop:"-translate-y-full top-px bottom-auto flex-col-reverse rounded-b-none rounded-t",dropdownHidden:"hidden",options:"flex flex-col p-0 m-0 list-none w-full",optionsTop:"flex-col-reverse",option:"flex items-center justify-start box-border text-left cursor-pointer text-base leading-snug py-2 px-3 text-sm",optionPointed:"text-gray-800 bg-gray-100",optionSelected:"text-white bg-indigo-500",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-indigo-500 opacity-90",optionSelectedDisabled:"text-green-100 bg-green-500 bg-opacity-50 cursor-not-allowed",noOptions:"py-2 px-3 text-gray-600 bg-white text-left",noResults:"py-2 px-3 text-gray-600 bg-white text-left"}},null,8,["modelValue","options","loading"])])])]),t("div",ye,[t("div",ve,[we,t("div",ke,[a(p(_),{modelValue:e.search.lesson_id,"onUpdate:modelValue":o[6]||(o[6]=r=>e.search.lesson_id=r),valueProp:"id",appendNewOption:!1,searchable:!0,options:e.options.lessons,clearOnSelect:!1,canClear:!1,canDeselect:!0,trackBy:"name",label:"name",disabled:e.disabled.lessons,placeholder:"Please Select",loading:e.loading.lessons,classes:{container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer rounded-sm bg-white text-base leading-snug border-gray-300",containerDisabled:"cursor-not-allowed bg-gray-100 border focus:border-gray-200 h-10",containerOpen:"rounded-b-none",containerOpenTop:"rounded-t-none",containerActive:"border border-gray-300",search:"w-full absolute inset-0 border-gray-300 focus:outline-none focus:border-transparent focus:ring-0 appearance-none text-base font-sans bg-white rounded-sm",dropdown:"max-h-60 absolute -left-px -right-px bottom-0 transform translate-y-full border border-gray-300 -mt-px overflow-y-scroll z-50 bg-white flex flex-col rounded-b",dropdownTop:"-translate-y-full top-px bottom-auto flex-col-reverse rounded-b-none rounded-t",dropdownHidden:"hidden",options:"flex flex-col p-0 m-0 list-none w-full",optionsTop:"flex-col-reverse",option:"flex items-center justify-start box-border text-left cursor-pointer text-base leading-snug py-2 px-3 text-sm",optionPointed:"text-gray-800 bg-gray-100",optionSelected:"text-white bg-indigo-500",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-indigo-500 opacity-90",optionSelectedDisabled:"text-green-100 bg-green-500 bg-opacity-50 cursor-not-allowed",noOptions:"py-2 px-3 text-gray-600 bg-white text-left",noResults:"py-2 px-3 text-gray-600 bg-white text-left"}},null,8,["modelValue","options","disabled","loading"])])])]),t("div",je,[t("div",Se,[Ue,t("div",Ce,[a(b,{class:"py-3 px-4",buttonType:"info",onClick:e.addUnitLesson},{default:d(()=>[h("Add")]),_:1},8,["onClick"])])])])]),e.form.units_lessons.length?(i(),n("div",Me,[(i(!0),n(g,null,m(e.form.units_lessons,(r,f)=>(i(),n("div",Ne,[t("details",$e,[t("summary",Ae,[t("div",Re,[t("div",ze,[t("label",He,c(e.getUnitName(r.math_unit_id)),1),t("label",{class:"font-medium text-red-500 hover:text-red-600 cursor-pointer",onClick:l=>e.deleteUnitLesson(f)},"Delete",8,Ee)]),t("p",Fe,c(e.getLessonName(r.math_lesson_id)),1)]),Ze]),t("ul",Ye,[(i(!0),n(g,null,m(e.options.objectives.filter(l=>l.lesson_id==r.math_lesson_id),(l,at)=>(i(),n("li",qe,[t("div",Ge,[v(t("input",{id:l.id,type:"checkbox",value:l.id,"onUpdate:modelValue":S=>r.math_objective_id=S,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-gray-300 focus:ring-0"},null,8,Ie),[[L,r.math_objective_id]]),t("label",{for:l.id,class:"w-full py-3 ml-2 text-sm font-medium text-gray-900"},c(e.getObjectiveName(l.id)),9,Je)])]))),256))])])]))),256))])):(i(),n("div",De,[Le,e.objectives_not_found?(i(),n("div",Oe,"No objectives found.")):x("",!0),e.loading.objectives?(i(),n("div",Pe,Be)):x("",!0)])),t("div",Ke,[t("div",Qe,[We,t("div",Xe,[v(t("textarea",{class:"focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm border-gray-300",rows:"4","onUpdate:modelValue":o[7]||(o[7]=r=>e.form.comments=r)},null,512),[[O,e.form.comments]])])])]),t("div",et,[t("div",tt,[st,t("div",ot,[v(t("select",{name:"attendance_status",id:"attendance_status",class:y(["focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm",e.$page.props.errors.attendance_status?"border-red-300":"border-gray-300"]),"onUpdate:modelValue":o[8]||(o[8]=r=>e.form.attendance_status=r),autocomplete:"off"},[(i(!0),n(g,null,m(e.$page.props.attendance_status,(r,f)=>(i(),n("option",{value:r.id},c(r.name),9,rt))),256))],2),[[P,e.form.attendance_status]])])])])])])]),footer:d(()=>[t("div",nt,[a(b,{buttonType:"gray",onClick:o[9]||(o[9]=r=>e.show_progress_report=!1)},{default:d(()=>[h("Cancel")]),_:1}),a(b,{onClick:e.updateProgressReport},{default:d(()=>[h("Save")]),_:1},8,["onClick"])])]),_:1},8,["showModal"])]),_:1})],64))}});export{vt as default};
