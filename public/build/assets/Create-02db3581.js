import{y as b,x as r,u as d,Q as l,F as _,be as f,bf as I,t as m,W as o,z as a,v as u,C as p,K as h,q as x,A as U,bH as F,J as S}from"./@vue-d42dd214.js";import{B as G}from"./Authenticated-e54ea1c2.js";import{H as B,L as H}from"./@inertiajs-dde9cc4c.js";import{h as M}from"./moment-a9aaa855.js";import{_ as C}from"./Card-1dc3a135.js";import{_ as R}from"./DialogModal-27aa9903.js";import{_ as D,d as T,e as y,c as k,a as j,b as V}from"./TableRow-c704adf7.js";import{_ as P}from"./TableCaption-4c9985fa.js";import{C as z}from"./lucide-vue-next-f56ff345.js";import"./ApplicationLogo-aa67088e.js";import"./radix-vue-d95f58a2.js";import"./@floating-ui-61ac2ed2.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-9e9c0f86.js";import"./axios-1779699b.js";import"./pusher-js-fe63a254.js";import"./@vueform-cd27a95b.js";import"./cropperjs-ee227adc.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-4b397a2a.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-7b89e231.js";import"./@radix-icons-4975f794.js";import"./@vuepic-1824abb1.js";import"./@babel-1b80a44a.js";import"./lodash.isequal-375e1553.js";import"./vue-227b0305.js";import"./lodash.clonedeep-ab16d4d4.js";import"./qs-19c2a829.js";import"./side-channel-0fc46420.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-c7e60009.js";import"./deepmerge-89e33937.js";import"./nprogress-cbfeb08c.js";import"./index-a78bcd26.js";import"./DialogDescription-befd605e.js";const O={class:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-4 gap-4"},K={class:"flex flex-col justify-end"},Y={class:"flex justify-between"},q={class:"flex flex-col justify-end"},J={class:"flex justify-between"},Q={class:"xl:col-span-2 2xl:col-span-2"},W={class:"flex flex-col 2xl:flex-row 2xl:flex-wrap gap-4"},X={class:"flex justify-between items-center"},Z={class:"flex items-center justify-end"},ee={class:"flex space-x-2"},te={class:"grid grid-cols-1 gap-4"},le={components:{Head:B,Link:H,Table:D,TableBody:T,TableCaption:P,TableCell:y,TableHead:k,TableHeader:j,TableRow:V},props:{roles:Object},data(){return{show:{add:!1},state_list:[],email_exist:!1,email_valid:!1,checking_email:!1,username_exist:!1,checking_username:!1,form:{email:"",username:"",full_name:"",country_id:"",country_code:"",calling_code:"",contact_number:"",state:"",address:"",selected_roles:[],children:[]},child_form:{name:"",gender:"",dob:""},loading:{country:!1,state:!1}}},watch:{"form.country_id":{handler(){this.form.country_id&&this.setCountryData(this.form.country_id)},immediate:!0}},methods:{checkEmail(){this.checking_email=!1,this.form.email&&(this.isValidEmail(),this.email_valid&&(this.checking_email=!0))},checkUsername(){this.checking_username=!1,this.form.username&&(this.checking_username=!0)},isValidEmail(){const i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.email_valid=i.test(this.form.email)},checkEmailExist(){axios.get("/api/find-email/"+this.form.email).then(i=>{i.data.length!=0?this.email_exist=!0:this.email_exist=!1,this.checking_email=!1})},checkUsernameExist(){axios.get("/api/find-username/"+this.form.username).then(i=>{i.data.length!=0?this.username_exist=!0:this.username_exist=!1,this.checking_username=!1})},setCountryData(i){this.loading.state=!0,axios.get(route("countries.find",i)).then(t=>{this.setStateList(t.data.country_code),this.form.calling_code=t.data.calling_code,this.form.country_name=t.data.name,this.form.country_code=t.data.country_code}).catch(t=>{this.errored=!0})},setStateList(i){var t=this.state_list;t.splice(0),axios({method:"post",url:"https://countriesnow.space/api/v0.1/countries/states",headers:{"Content-Type":"application/json"},data:{iso2:i}}).then(e=>{e.data.data.states.forEach(function(n){t.push(n.name)}),this.loading.state=!1})},clearState(){this.form.country_state=""},submit(){this.$inertia.post(route("users.store"),this.form,{preserveState:!0})},addChild(){this.form.children.push({name:this.child_form.name,gender:this.child_form.gender,dob:this.child_form.dob}),this.child_form.name="",this.child_form.gender="",this.child_form.dob="",this.show.add=!1},deleteChild(i){this.form.children.splice(i,1)},hasPermission(i){return this.$page.props.can.hasOwnProperty(i)&&this.$page.props.can[i]},verifyChecked(i){return this.form.selected_roles.includes(i)}}},Ze=Object.assign(le,{__name:"Create",setup(i){return(t,e)=>{const n=f("Label"),v=f("Input"),c=f("ComboBox"),N=f("Textarea"),L=f("Checkbox"),g=f("Button"),A=f("Datepicker"),w=I("debounce");return m(),b(_,null,[r(d(B),{title:"Users"}),r(G,null,{header:l(()=>e[19]||(e[19]=[])),default:l(()=>[r(C,null,{title:l(()=>e[20]||(e[20]=[o("User Information")])),content:l(()=>[a("div",O,[a("div",K,[a("div",Y,[r(n,null,{default:l(()=>e[21]||(e[21]=[o("Email"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),t.checking_email?(m(),u(n,{key:0,class:"text-xs font-medium text-indigo-600"},{default:l(()=>e[22]||(e[22]=[o(" Checking Email...")])),_:1})):p("",!0),t.form.email!=""&!t.email_valid?(m(),u(n,{key:1,class:"text-xs font-medium text-red-600"},{default:l(()=>e[23]||(e[23]=[o(" Invalid Email ")])),_:1})):p("",!0),!t.checking_email&&t.form.email!=""&t.email_valid?(m(),u(n,{key:2,class:x(["text-xs font-medium",t.email_exist?"text-red-700":"text-green-700"])},{default:l(()=>[o(h(t.email_exist?"Email address has been used.":"Email address is available."),1)]),_:1},8,["class"])):p("",!0)]),U(r(v,{class:"mt-0.5",type:"email",error:t.$page.props.errors.email,modelValue:t.form.email,"onUpdate:modelValue":e[0]||(e[0]=s=>t.form.email=s),onKeyup:e[1]||(e[1]=s=>t.checkEmail())},null,8,["error","modelValue"]),[[w,t.checkEmailExist,"800ms"]])]),a("div",q,[a("div",J,[r(n,null,{default:l(()=>e[24]||(e[24]=[o("Username"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),t.checking_username?(m(),u(n,{key:0,class:"text-xs font-medium text-indigo-600"},{default:l(()=>e[25]||(e[25]=[o(" Checking Username...")])),_:1})):p("",!0),!t.checking_username&&t.form.username!=""?(m(),u(n,{key:1,class:x(["text-xs font-medium",t.username_exist?"text-red-700":"text-green-700"])},{default:l(()=>[o(h(t.username_exist?"Username has been taken.":"Username is available."),1)]),_:1},8,["class"])):p("",!0)]),U(r(v,{class:"mt-0.5",type:"text",error:t.$page.props.errors.username,modelValue:t.form.username,"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.username=s),onKeyup:e[3]||(e[3]=s=>t.checkUsername())},null,8,["error","modelValue"]),[[w,t.checkUsernameExist,"800ms"]])]),a("div",null,[r(n,null,{default:l(()=>e[26]||(e[26]=[o("Full Name"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),r(v,{type:"text",error:t.$page.props.errors.full_name,modelValue:t.form.full_name,"onUpdate:modelValue":e[4]||(e[4]=s=>t.form.full_name=s)},null,8,["error","modelValue"])]),a("div",null,[r(n,null,{default:l(()=>e[27]||(e[27]=[o("Country"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),r(c,{items:t.$page.props.countries,"label-property":"name","value-property":"id",error:t.$page.props.errors.country_id,modelValue:t.form.country_id,"onUpdate:modelValue":e[5]||(e[5]=s=>t.form.country_id=s),"select-placeholder":"Select Country","search-placeholder":"Search country...",onSelect:e[6]||(e[6]=s=>t.clearState())},null,8,["items","error","modelValue"]),U(a("input",{type:"hidden","onUpdate:modelValue":e[7]||(e[7]=s=>t.form.country=s)},null,512),[[F,t.form.country]])]),a("div",null,[r(n,null,{default:l(()=>e[28]||(e[28]=[o("State"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),r(c,{items:t.state_list,"label-property":"name","value-property":"id",error:t.$page.props.errors.country_state,modelValue:t.form.country_state,"onUpdate:modelValue":e[8]||(e[8]=s=>t.form.country_state=s),"select-placeholder":"Select State","search-placeholder":"Search state...",loading:t.loading.state},null,8,["items","error","modelValue","loading"])]),a("div",Q,[r(n,null,{default:l(()=>e[29]||(e[29]=[o("Address"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),r(N,{type:"text",error:t.$page.props.errors.address,modelValue:t.form.address,"onUpdate:modelValue":e[9]||(e[9]=s=>t.form.address=s)},null,8,["error","modelValue"])]),a("div",null,[r(n,null,{default:l(()=>e[30]||(e[30]=[o("Contact Number"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),r(v,{type:"number",inputGroup:t.form.calling_code,error:t.$page.props.errors.contact_number,modelValue:t.form.contact_number,"onUpdate:modelValue":e[10]||(e[10]=s=>t.form.contact_number=s)},null,8,["inputGroup","error","modelValue"])])])]),_:1}),t.$page.props.can.view_user_roles?(m(),u(C,{key:0},{title:l(()=>e[31]||(e[31]=[o("Roles Information")])),content:l(()=>[a("div",W,[(m(!0),b(_,null,S(i.roles,s=>(m(),b("div",{key:s.id},[t.hasPermission(s.permission)?(m(),u(n,{key:0,id:s.id,class:"flex items-center space-x-1 cursor-pointer"},{default:l(()=>[r(L,{class:"mr-1",id:s.id,value:s.id,checked:t.verifyChecked(s.id),modelValue:t.form.selected_roles,"onUpdate:modelValue":e[11]||(e[11]=$=>t.form.selected_roles=$)},null,8,["id","value","checked","modelValue"]),o(" "+h(s.display_name),1)]),_:2},1032,["id"])):p("",!0)]))),128))])]),_:1})):p("",!0),t.$page.props.can.create_child||t.$page.props.can.view_child?(m(),u(C,{key:1},{title:l(()=>[a("div",X,[e[33]||(e[33]=o(" Children Information ")),t.$page.props.can.create_child?(m(),u(g,{key:0,onClick:e[12]||(e[12]=s=>t.show.add=!0)},{default:l(()=>[r(d(z),{class:"h-4 w-4"}),e[32]||(e[32]=a("span",{class:"ml-1 hidden sm:block"},"Add Child",-1))]),_:1})):p("",!0)])]),content:l(()=>[t.$page.props.can.view_child?(m(),u(d(D),{key:0,class:"px-4"},{default:l(()=>[r(d(j),{class:"bg-gray-100"},{default:l(()=>[r(d(V),null,{default:l(()=>[r(d(k),{class:"px-4"},{default:l(()=>e[34]||(e[34]=[o("Name")])),_:1}),r(d(k),null,{default:l(()=>e[35]||(e[35]=[o("Gender")])),_:1}),r(d(k),null,{default:l(()=>e[36]||(e[36]=[o("Date of Birth")])),_:1}),r(d(k),{class:"text-center"},{default:l(()=>e[37]||(e[37]=[o("Action")])),_:1})]),_:1})]),_:1}),r(d(T),null,{default:l(()=>[t.form.children.length?p("",!0):(m(),u(d(V),{key:0},{default:l(()=>[r(d(y),{class:"text-center",colspan:"10"},{default:l(()=>e[38]||(e[38]=[a("div",{class:"p-3"}," No Record Found ",-1)])),_:1})]),_:1})),(m(!0),b(_,null,S(t.form.children,(s,$)=>(m(),u(d(V),null,{default:l(()=>[r(d(y),{class:"px-4"},{default:l(()=>[o(h(s.name),1)]),_:2},1024),r(d(y),null,{default:l(()=>[o(h(t.$page.props.gender_list.find(E=>E.id==s.gender).name),1)]),_:2},1024),r(d(y),null,{default:l(()=>[o(h(d(M)(s.dob).format("DD/MM/Y")),1)]),_:2},1024),r(d(y),{class:"text-center"},{default:l(()=>[r(g,{variant:"destructive",onClick:E=>t.deleteChild($)},{default:l(()=>e[39]||(e[39]=[o("Delete")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})):p("",!0)]),_:1})):p("",!0),r(C,null,{content:l(()=>[a("div",Z,[a("div",ee,[r(g,{variant:"outline",onClick:e[13]||(e[13]=s=>t.$inertia.get(t.route("users")))},{default:l(()=>e[40]||(e[40]=[o("Cancel")])),_:1}),r(g,{onClick:t.submit},{default:l(()=>e[41]||(e[41]=[o("Register")])),_:1},8,["onClick"])])])]),_:1}),r(R,{open:t.show.add,"onUpdate:open":e[18]||(e[18]=s=>t.show.add=s)},{title:l(()=>e[42]||(e[42]=[o("Add Child")])),content:l(()=>[a("div",te,[a("div",null,[r(n,null,{default:l(()=>e[43]||(e[43]=[o("Full Name"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),r(v,{type:"text",error:t.$page.props.errors.child_name,modelValue:t.child_form.name,"onUpdate:modelValue":e[14]||(e[14]=s=>t.child_form.name=s)},null,8,["error","modelValue"])]),a("div",null,[r(n,null,{default:l(()=>e[44]||(e[44]=[o("Gender"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),r(c,{items:t.$page.props.gender_list,"label-property":"name","value-property":"id",error:t.$page.props.errors.gender,modelValue:t.child_form.gender,"onUpdate:modelValue":e[15]||(e[15]=s=>t.child_form.gender=s),"select-placeholder":"Select Gender","search-placeholder":"Search gender..."},null,8,["items","error","modelValue"])]),a("div",null,[r(n,{id:"dob"},{default:l(()=>e[45]||(e[45]=[o("Date of Birth"),a("span",{class:"text-red-500"},"*",-1)])),_:1}),r(A,{mode:"date",format:"dd/MM/Y",teleport:"#dob",teleportCenter:!0,modelValue:t.child_form.dob,"onUpdate:modelValue":e[16]||(e[16]=s=>t.child_form.dob=s)},null,8,["modelValue"])])])]),footer:l(()=>[r(g,{variant:"outline",onClick:e[17]||(e[17]=s=>t.show.add=!1)},{default:l(()=>e[46]||(e[46]=[o("Cancel")])),_:1}),r(g,{onClick:t.addChild},{default:l(()=>e[47]||(e[47]=[o("Add")])),_:1},8,["onClick"])]),_:1},8,["open"])]),_:1})],64)}}});export{Ze as default};
