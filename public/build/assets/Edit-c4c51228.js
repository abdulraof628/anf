import{h as p,a as l,b as v,w as c,F as w,L as C,s as j,o as g,H as B,d as e,f as M,k as a,x as m,n as d,t as x,i as $,y as _,e as r,q as L,z as V}from"./app-825cb09d.js";import{B as D}from"./Authenticated-36680990.js";import{B as h}from"./Button-5cb0f01e.js";import{b as k}from"./toggle-e4d1351e.js";import{C as y}from"./cropper.esm-8cd9f189.js";import"./ApplicationLogo-47fe7a8e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./default.css_vue_type_style_index_0_src_true_lang-ba7b10a7.js";const E={class:"md:grid md:grid-cols-2"},U={class:"md:mt-0 md:col-span-2"},N={class:"px-4 py-5 space-y-6 sm:p-6"},O={class:"grid grid-rows-1 grid-cols-1 sm:grid-cols-1 grid-flow-col gap-4"},I={class:"sm:row-span-3"},F={class:"p-6 bg-white border border-gray-200 rounded-lg shadow-md"},H=e("div",{class:"mb-5"},[e("h1",{class:"text-indigo-800 font-bold"},"Centre Information"),e("div",{class:"border-b border-dashed border-indigo-900 mt-1"})],-1),P={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},R={class:"mb-4"},A=e("label",{for:"centre_name",class:"block text-sm text-gray-700 font-bold"},[r(" Centre Name "),e("span",{class:"text-red-500"},"*")],-1),T={class:"mt-1 flex rounded-md shadow-sm"},z=e("span",{class:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-100 text-gray-500 text-sm"}," ANFC ",-1),S={class:"grid grid-cols-1 sm:grid-cols-2 gap-0 sm:gap-4"},G={class:"mb-4"},J=e("label",{for:"centre_contact",class:"block text-sm text-gray-700 font-bold"},[r(" Centre Contact Number "),e("span",{class:"text-red-500"},"*")],-1),Y={class:"mt-1 flex rounded-md shadow-sm"},W={class:"mb-4"},X=e("label",{for:"centre_email",class:"block text-sm text-gray-700 font-bold"}," Centre Email ",-1),q={class:"mt-1 flex rounded-md shadow-sm"},K={class:"grid grid-cols-1 gap-4"},Q={class:"mb-4"},Z=e("label",{for:"centre_address",class:"block text-sm text-gray-700 font-bold"},[r(" Centre Address "),e("span",{class:"text-red-500"},"*")],-1),ee={class:"mt-1"},te={class:"grid grid-rows-1 grid-cols-1 sm:grid-cols-1 grid-flow-col gap-4"},se={class:"sm:row-span-3"},oe={class:"p-6 bg-white border border-gray-200 rounded-lg shadow-md"},ie=e("div",{class:"mb-5"},[e("h1",{class:"text-indigo-800 font-bold"},"Principal's Information"),e("div",{class:"border-b border-dashed border-indigo-900 mt-1"})],-1),re={class:"grid grid-cols-1 sm:grid-cols-1 gap-0 sm:gap-4"},ae={class:"mb-4"},ne={class:"flex justify-between"},le=e("label",{for:"about",class:"block text-sm text-gray-700 font-bold"},[r(" Email "),e("span",{class:"text-red-500"},"*")],-1),de={class:"mt-1 flex rounded-md shadow-sm"},ce={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},me={class:"mb-4"},_e=e("label",{for:"principal_first_name",class:"block text-sm text-gray-700 font-bold"},[r(" First Name "),e("span",{class:"text-red-500"},"*")],-1),pe={class:"mt-1 flex rounded-md shadow-sm"},ge=["value"],he={class:"mb-4"},fe=e("label",{for:"pricipal_last_name",class:"block text-sm text-gray-700 font-bold"},[r(" Last Name "),e("span",{class:"text-red-500"},"*")],-1),ue={class:"mt-1 flex rounded-md shadow-sm"},be=["value"],ve={class:"grid grid-cols-1 sm:grid-cols-2 gap-0 sm:gap-4"},we={class:"mb-4"},xe=e("label",{for:"principal_contact",class:"block text-sm text-gray-700 font-bold"},[r(" Contact Number "),e("span",{class:"text-red-500"},"*")],-1),ye={class:"mt-1 flex rounded-md shadow-sm"},ke={class:"grid grid-rows-2 grid-cols-1 grid-flow-col gap-4"},Ce={class:"sm:row-span-3"},je={class:"p-6 bg-white border border-gray-200 rounded-lg shadow-md"},Be=e("div",{class:"mb-5"},[e("h1",{class:"text-indigo-800 font-bold"},"Centre View"),e("div",{class:"border-b border-dashed border-indigo-900 mt-1"})],-1),Me={class:"grid grid-cols-1 sm:grid-cols-4 gap-4"},$e={class:"mb-4"},Le=e("label",{class:"block text-sm text-gray-700 font-bold"},[r(" Centre Front View "),e("span",{class:"text-red-500"},"*"),r(" ("),e("span",{class:"text-blue-500"},"1 Image"),r(")")],-1),Ve={class:"space-y-1 text-center"},De=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ee={class:"flex text-sm text-gray-600"},Ue={class:"browse text-indigo-400 hover:text-indigo-800 cursor-pointer font-bold"},Ne={ref:"front_image",id:"file",class:"sr-only",type:"file",accept:"image/*"},Oe=e("p",{class:"pl-1"},"or drag and drop an image",-1),Ie=e("p",{class:"text-xs text-gray-500"},"Image Format : PNG, JPG",-1),Fe={class:"mb-4"},He=e("label",{class:"block text-sm text-gray-700 font-bold"},[r(" Centre Inside View "),e("span",{class:"text-red-500"},"*"),r(" (Max: "),e("span",{class:"text-blue-500"},"5 Images"),r(")")],-1),Pe={class:"space-y-1 text-center"},Re=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ae={class:"flex text-sm text-gray-600"},Te={class:"browse text-indigo-400 hover:text-indigo-800 cursor-pointer font-bold"},ze={ref:"inside_image",id:"file",class:"sr-only",type:"file",accept:"image/*"},Se=e("p",{class:"pl-1"},"or drag and drop an image",-1),Ge=e("p",{class:"text-xs text-gray-500"},"Image Format : PNG, JPG",-1),Je={class:"mb-4"},Ye=e("label",{class:"block text-sm text-gray-900 font-bold"}," Crop Image",-1),We={class:"w-96 h-60 mt-1"},Xe=["src"],qe={class:"mb-4"},Ke={class:"flex flex-row justify-end"},Qe=e("div",{class:"flex-column text-center"},[e("label",{class:"block text-sm text-gray-900 font-bold"}," Image Preview "),e("div",{class:"preview h-52 w-96 mt-1"})],-1),Ze={class:"flex-column pl-1 pt-6"},et={class:"flex flex-col space-y-1"},tt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1),st=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),ot={class:"sm:col-span-2 self-center flex flex-wrap gap-4"},it=["onClick"],rt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),at=[rt],nt=["src"],lt={for:"",class:"text-sm capitalize text-slate-500"},dt={class:"p-6 bg-white border border-gray-200 rounded-lg shadow-md"},ct={class:"flex items-center justify-between"},mt={class:"flex space-x-2"},_t=e("label",{for:"",class:"block text-sm text-gray-700"},"Active",-1),pt={class:"flex space-x-2"},f=window.URL||window.webkitURL,gt=/^image\/\w+$/;let u=null;const ht={components:{Link:C,Toggle:k,Cropper:y},props:{centre_info:Object,centre_images:Object,centre_principal:Object},data(){return{data:{type:Object,default:()=>({})},show_front_upload:!0,show_inside_upload:!0,show_image:!1,image:"",email_exist:[],form:{centre_id:this.centre_info.ID,centre_name:this.centre_info?this.centre_info.label.replace("ANFC ","").replace("ANF ",""):"",centre_contact_number:this.centre_info?this.centre_info.phone:"",centre_email:this.centre_info?this.centre_info.email:"",centre_address:this.centre_info?this.centre_info.address:"",centre_active:this.centre_info.is_active,principal_first_name:this.centre_principal?this.centre_principal.principal_first_name:"",principal_last_name:this.centre_principal?this.centre_principal.principal_last_name:"",principal_email:this.centre_principal?this.centre_principal.email:"",principal_contact:this.centre_principal?this.centre_principal.contact_number:"",image_list:this.centre_images?this.centre_images:[],images_to_delete:[]}}},mounted(){const o=this.$refs.input;o&&(u=new y(o,{aspectRatio:1,cropBoxResizable:!1,cropBoxMovable:!1,viewMode:1,dragMode:"move",movable:!0,rotatable:!0,preview:".preview",minCropBoxWidth:500,minCropBoxHeight:500,modal:!0,background:!1}))},watch:{image:{handler(o){o&&u.replace(o)},deep:!0}},methods:{submit(){this.$inertia.post(route("centres.update"),this.form,{preserveState:!0})},read(o,t){return new Promise((s,n)=>{if(!o){s();return}gt.test(o.type)?f?s({loaded:!0,name:o.name,type:o.type,url:f.createObjectURL(o)}):n(new Error("Your browser is not supported.")):n(new Error("Please select a valid image file."))})},change_front({target:o}){const{files:t}=o;t&&t.length>0&&this.read(t[0],o).then(s=>{this.image=s.url,this.show_front_upload=!1,this.show_inside_upload=!1,this.show_image=!0,this.update(s,"front")}).catch(this.alert)},dragover_front(o){o.preventDefault()},drop_front(o){const{files:t}=o.dataTransfer;o.preventDefault(),t&&t.length>0&&this.read(t[0],o).then(s=>{this.front_image=s.url,this.show_front_upload=!1,this.show_inside_upload=!1,this.update(s)}).catch(this.alert)},change_inside({target:o}){const{files:t}=o;t&&t.length>0&&this.read(t[0],o).then(s=>{this.image=s.url,this.show_front_upload=!1,this.show_inside_upload=!1,this.show_image=!0,this.update(s,"inside")}).catch(this.alert)},dragover_inside(o){o.preventDefault()},drop_inside(o){const{files:t}=o.dataTransfer;o.preventDefault(),t&&t.length>0&&this.read(t[0],o).then(s=>{this.front_image=s.url,this.show_front_upload=!1,this.show_inside_upload=!1,this.update(s)}).catch(this.alert)},alert(o){window.alert(o&&o.message?o.message:o)},update(o,t){Object.assign(this.data,o),Object.assign(this.data,{view_type:t})},reselect_image(){this.show_front_upload=!0,this.show_inside_upload=!0,this.show_image=!1,this.$refs.front_image.value=null,this.$refs.inside_image.value=null},select_cropped_image(){const o=this.form.image_list.filter(s=>{if(s.image_type=="front")return!0}),t=this.form.image_list.filter(s=>{if(s.image_type=="inside")return!0});this.data.view_type=="front"?o.length<1?(u.getCroppedCanvas().toBlob(s=>{var n=f.createObjectURL(s),i=this.blobToFile(s,this.data.name);this.form.image_list.unshift({image_path:n,image_file:i,image_type:this.data.view_type})},"image/jpeg",.1),this.show_front_upload=!0,this.show_inside_upload=!0,this.show_image=!1,this.$refs.front_image.value=null):(alert("Only 1 front view image is allowed!"),this.show_front_upload=!0,this.show_inside_upload=!0,this.show_image=!1,this.$refs.front_image.value=null):this.data.view_type=="inside"&&(t.length<5?(u.getCroppedCanvas().toBlob(s=>{var n=f.createObjectURL(s);this.form.image_list.push({name:this.data.name,image_path:n,image_file:s,image_type:this.data.view_type})},"image/jpeg",.1),this.show_front_upload=!0,this.show_inside_upload=!0,this.show_image=!1,this.$refs.inside_image.value=null):(alert("Only 5 inside view image is allowed!"),this.show_front_upload=!0,this.show_inside_upload=!0,this.show_image=!1,this.$refs.inside_image.value=null))},delete_cropped_image(o){this.form.image_list[o].id&&this.form.images_to_delete.push({image_id:this.form.image_list[o].id}),this.form.image_list.splice(o,1)},blobToFile(o,t){return o.lastModifiedDate=new Date,o.name=t,o},findUser(o){j.debounce(t=>console.log("normal format",t),"400ms")(10),o&&(this.searching_students=!0,axios.get(route("centres.find_user"),{params:{principal_email:o}}).then(t=>{this.email_exist=t.data}))}}},jt=Object.assign(ht,{__name:"Edit",setup(o){return(t,s)=>{const n=V("debounce");return g(),p(w,null,[l(v(B),{title:"Centres"}),l(D,null,{header:c(()=>[]),default:c(()=>[e("div",E,[e("div",U,[e("form",{onSubmit:s[15]||(s[15]=M((...i)=>t.submit&&t.submit(...i),["prevent"]))},[e("div",N,[e("div",O,[e("div",I,[e("div",F,[H,e("div",P,[e("div",R,[A,e("div",T,[z,a(e("input",{type:"text",name:"centre_name",id:"centre_name",class:d(["focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-none rounded-r-md sm:text-sm",t.$page.props.errors.centre_name?"border-red-300":"border-gray-300"]),"onUpdate:modelValue":s[0]||(s[0]=i=>t.form.centre_name=i),autocomplete:"off"},null,2),[[m,t.form.centre_name]])])])]),e("div",S,[e("div",G,[J,e("div",Y,[a(e("input",{type:"text",name:"centre_contact",id:"centre_contact",class:d(["focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm",t.$page.props.errors.centre_contact_number?"border-red-300":"border-gray-300"]),"onUpdate:modelValue":s[1]||(s[1]=i=>t.form.centre_contact_number=i),autocomplete:"off"},null,2),[[m,t.form.centre_contact_number]])])]),e("div",W,[X,e("div",q,[a(e("input",{type:"email",name:"centre_email",id:"centre_email",class:d(["focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm",t.$page.props.errors.centre_email?"border-red-300":"border-gray-300"]),"onUpdate:modelValue":s[2]||(s[2]=i=>t.form.centre_email=i),autocomplete:"off"},null,2),[[m,t.form.centre_email]])])])]),e("div",K,[e("div",Q,[Z,e("div",ee,[a(e("textarea",{id:"centre_address",name:"centre_address",rows:"3",class:d(["shadow-sm focus:ring-0 focus:border-indigo-300 mt-1 block w-full sm:text-sm border rounded-md",t.$page.props.errors.centre_address?"border-red-300":"border-gray-300"]),"onUpdate:modelValue":s[3]||(s[3]=i=>t.form.centre_address=i),autocomplete:"off"},null,2),[[m,t.form.centre_address]])])])])])])]),e("div",te,[e("div",se,[e("div",oe,[ie,e("div",re,[e("div",ae,[e("div",ne,[le,t.form.principal_email?(g(),p("label",{key:0,for:"about",class:d(["font-medium text-sm",t.email_exist?"text-green-700":"text-red-700"])},x(t.email_exist?"Email found!":"Email not found!"),3)):$("",!0)]),e("div",de,[a(e("input",{type:"email",name:"company-website",id:"company-website",class:d(["focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm border-gray-300",[t.$page.props.errors.principal_email?"border-red-300":"border-gray-300",t.email_exist==null&&t.form.principal_email?"border-red-300":"border-gray-300",t.email_exist!=null&&t.form.principal_email?"border-green-500":"border-gray-300"]]),"onUpdate:modelValue":s[4]||(s[4]=i=>t.form.principal_email=i),autocomplete:"none"},null,2),[[n,t.findUser],[m,t.form.principal_email]])])])]),e("div",ce,[e("div",me,[_e,e("div",pe,[e("input",{type:"text",name:"principal_first_name",id:"principal_first_name",class:"focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm border-gray-300 bg-gray-100",disabled:"",value:t.email_exist!=null?t.form.principal_first_name=o.centre_principal?o.centre_principal.first_name:t.email_exist.user_first_name:"",autocomplete:"off"},null,8,ge)])]),e("div",he,[fe,e("div",ue,[e("input",{type:"text",name:"pricipal_last_name",id:"pricipal_last_name",class:"focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm border-gray-300 bg-gray-100",disabled:"",value:t.email_exist!=null?t.form.principal_last_name=o.centre_principal?o.centre_principal.last_name:t.email_exist.user_last_name:"",autocomplete:"off"},null,8,be)])])]),e("div",ve,[e("div",we,[xe,e("div",ye,[a(e("input",{type:"text",name:"principal_contact",id:"principal_contact",class:d(["focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm border-gray-300",t.$page.props.errors.principal_contact?"border-red-300":"border-gray-300"]),"onUpdate:modelValue":s[5]||(s[5]=i=>t.form.principal_contact=i),autocomplete:"off"},null,2),[[m,t.form.principal_contact]])])])])])])]),e("div",ke,[e("div",Ce,[e("div",je,[Be,e("div",Me,[a(e("div",$e,[Le,e("div",{class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",onChange:s[6]||(s[6]=(...i)=>t.change_front&&t.change_front(...i)),onDragover:s[7]||(s[7]=(...i)=>t.dragover_front&&t.dragover_front(...i)),onDrop:s[8]||(s[8]=(...i)=>t.drop_front&&t.drop_front(...i))},[e("div",Ve,[De,e("div",Ee,[e("label",Ue,[r("Click here "),e("input",Ne,null,512)]),Oe]),Ie])],32)],512),[[_,t.show_front_upload]]),a(e("div",Fe,[He,e("div",{class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",onChange:s[9]||(s[9]=(...i)=>t.change_inside&&t.change_inside(...i)),onDragover:s[10]||(s[10]=(...i)=>t.dragover_inside&&t.dragover_inside(...i)),onDrop:s[11]||(s[11]=(...i)=>t.drop_inside&&t.drop_inside(...i))},[e("div",Pe,[Re,e("div",Ae,[e("label",Te,[r("Click here "),e("input",ze,null,512)]),Se]),Ge])],32)],512),[[_,t.show_inside_upload]]),a(e("div",Je,[Ye,e("div",We,[e("img",{class:"image",ref:"input",src:t.image},null,8,Xe)])],512),[[_,t.show_image]]),a(e("div",qe,[e("div",Ke,[Qe,e("div",Ze,[e("div",et,[l(h,{type:"button",class:"py-1 px-2 bg-green-500 hover:bg-green-600 rounded text-white shadow",onClick:s[12]||(s[12]=i=>t.select_cropped_image()),title:"Select cropped image"},{default:c(()=>[tt]),_:1}),l(h,{type:"button",class:"py-1 px-2 bg-blue-500 hover:bg-blue-600 rounded text-white shadow",onClick:s[13]||(s[13]=i=>t.reselect_image()),title:"Reselect an image"},{default:c(()=>[st]),_:1})])])])],512),[[_,t.show_image]]),a(e("div",ot,[(g(!0),p(w,null,L(t.form.image_list,(i,b)=>(g(),p("div",{class:"relative h-32 w-32 rounded mr-3 mt-3 text-center",key:b},[e("div",{class:"absolute bg-red-500 p-2 rounded-full text-white z-10 cursor-pointer hover:bg-red-700",style:{top:"-8px",right:"-8px"},onClick:ft=>t.delete_cropped_image(b)},at,8,it),e("img",{src:i.image_path,class:"rounded-lg",alt:""},null,8,nt),e("label",lt,x(i.image_type),1)]))),128))],512),[[_,t.form.image_list.length]])])])])]),e("div",dt,[e("div",ct,[e("div",mt,[_t,l(v(k),{modelValue:t.form.centre_active,"onUpdate:modelValue":s[14]||(s[14]=i=>t.form.centre_active=i),classes:{container:"inline-block",toggle:"flex w-12 h-5 rounded-full relative cursor-pointer transition items-center box-content border-2 text-xs leading-none",toggleOn:"bg-green-500 border-green-500 justify-start text-white",toggleOff:"bg-gray-400 border-gray-400 justify-end text-gray-700"}},null,8,["modelValue"])]),e("div",pt,[l(h,{buttonType:"gray",route:t.route("centres")},{default:c(()=>[r("Cancel")]),_:1},8,["route"]),l(h,{type:"submit"},{default:c(()=>[r("Save")]),_:1})])])])])],32)])])]),_:1})],64)}}});export{jt as default};
