import{x as v,v as s,u as d,O as t,F as $,b7 as f,b8 as A,q as m,U as o,y as r,t as u,B as p,J as h,m as x,z as U,bx as F,I as S}from"./@vue-39dc9ff3.js";import{B as G}from"./Authenticated-89c7332d.js";import{H as B,L as M}from"./@inertiajs-2b766590.js";import{h as R}from"./moment-a9aaa855.js";import{_ as k}from"./Card-b75ae06b.js";import{_ as H}from"./DialogModal-6d0aecd6.js";import{_ as D,d as T,e as _,c as y,a as j,b}from"./TableRow-da22b5e6.js";import{_ as O}from"./TableCaption-43844f83.js";import{C as P}from"./lucide-vue-next-7b48dc26.js";import"./ApplicationLogo-5cf6e77e.js";import"./radix-vue-a603168c.js";import"./@floating-ui-c05b1c1f.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-dbb80022.js";import"./axios-1779699b.js";import"./pusher-js-68b5c933.js";import"./@vueform-8fb84cf1.js";import"./@vuepic-a83e4355.js";import"./@babel-1b80a44a.js";import"./cropperjs-042b647f.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-e9930861.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-c14271ca.js";import"./@radix-icons-9ff33614.js";import"./lodash.isequal-0acc53e7.js";import"./vue-46d666fa.js";import"./lodash.clonedeep-12c784b4.js";import"./qs-45a3326f.js";import"./side-channel-401220dd.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-ac0241aa.js";import"./deepmerge-89e33937.js";import"./nprogress-87ee1729.js";const z={class:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-4 gap-4"},Y={class:"flex flex-col justify-end"},q={class:"flex justify-between"},J=r("span",{class:"text-red-500"},"*",-1),K={class:"flex flex-col justify-end"},Q={class:"flex justify-between"},W=r("span",{class:"text-red-500"},"*",-1),X=r("span",{class:"text-red-500"},"*",-1),Z=r("span",{class:"text-red-500"},"*",-1),ee=r("span",{class:"text-red-500"},"*",-1),te={class:"xl:col-span-2 2xl:col-span-2"},se=r("span",{class:"text-red-500"},"*",-1),le=r("span",{class:"text-red-500"},"*",-1),ae={class:"flex flex-col 2xl:flex-row 2xl:flex-wrap gap-4"},oe={class:"flex justify-between items-center"},re=r("span",{class:"ml-1 hidden sm:block"},"Add Child",-1),ie=r("div",{class:"p-3"}," No Record Found ",-1),ne={class:"flex items-center justify-end"},de={class:"flex space-x-2"},me={class:"grid grid-cols-1 gap-4"},ue=r("span",{class:"text-red-500"},"*",-1),pe=r("span",{class:"text-red-500"},"*",-1),fe=r("span",{class:"text-red-500"},"*",-1),ce={components:{Head:B,Link:M,Table:D,TableBody:T,TableCaption:O,TableCell:_,TableHead:y,TableHeader:j,TableRow:b},props:{roles:Object},data(){return{show:{add:!1},state_list:[],email_exist:!1,email_valid:!1,checking_email:!1,username_exist:!1,checking_username:!1,form:{email:"",username:"",full_name:"",country_id:"",country_code:"",calling_code:"",contact_number:"",state:"",address:"",selected_roles:[],children:[]},child_form:{name:"",gender:"",dob:""},loading:{country:!1,state:!1}}},watch:{"form.country_id":{handler(){this.form.country_id&&this.setCountryData(this.form.country_id)},immediate:!0}},methods:{checkEmail(){this.checking_email=!1,this.form.email&&(this.isValidEmail(),this.email_valid&&(this.checking_email=!0))},checkUsername(){this.checking_username=!1,this.form.username&&(this.checking_username=!0)},isValidEmail(){const i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.email_valid=i.test(this.form.email)},checkEmailExist(){axios.get("/api/find-email/"+this.form.email).then(i=>{i.data.length!=0?this.email_exist=!0:this.email_exist=!1,this.checking_email=!1})},checkUsernameExist(){axios.get("/api/find-username/"+this.form.username).then(i=>{i.data.length!=0?this.username_exist=!0:this.username_exist=!1,this.checking_username=!1})},setCountryData(i){this.loading.state=!0,axios.get(route("countries.find",i)).then(e=>{this.setStateList(e.data.country_code),this.form.calling_code=e.data.calling_code,this.form.country_name=e.data.name,this.form.country_code=e.data.country_code}).catch(e=>{this.errored=!0})},setStateList(i){var e=this.state_list;e.splice(0),axios({method:"post",url:"https://countriesnow.space/api/v0.1/countries/states",headers:{"Content-Type":"application/json"},data:{iso2:i}}).then(a=>{a.data.data.states.forEach(function(n){e.push(n.name)}),this.loading.state=!1})},clearState(){this.form.country_state=""},submit(){this.$inertia.post(route("users.store"),this.form,{preserveState:!0})},addChild(){this.form.children.push({name:this.child_form.name,gender:this.child_form.gender,dob:this.child_form.dob}),this.child_form.name="",this.child_form.gender="",this.child_form.dob="",this.show.add=!1},deleteChild(i){this.form.children.splice(i,1)},hasPermission(i){return this.$page.props.can.hasOwnProperty(i)&&this.$page.props.can[i]},verifyChecked(i){return this.form.selected_roles.includes(i)}}},dt=Object.assign(ce,{__name:"Create",setup(i){return(e,a)=>{const n=f("Label"),g=f("Input"),C=f("ComboBox"),N=f("Textarea"),L=f("Checkbox"),c=f("Button"),I=f("Datepicker"),w=A("debounce");return m(),v($,null,[s(d(B),{title:"Users"}),s(G,null,{header:t(()=>[]),default:t(()=>[s(k,null,{title:t(()=>[o("User Information")]),content:t(()=>[r("div",z,[r("div",Y,[r("div",q,[s(n,null,{default:t(()=>[o("Email"),J]),_:1}),e.checking_email?(m(),u(n,{key:0,class:"text-xs font-medium text-indigo-600"},{default:t(()=>[o(" Checking Email...")]),_:1})):p("",!0),e.form.email!=""&!e.email_valid?(m(),u(n,{key:1,class:"text-xs font-medium text-red-600"},{default:t(()=>[o(" Invalid Email ")]),_:1})):p("",!0),!e.checking_email&&e.form.email!=""&e.email_valid?(m(),u(n,{key:2,class:x(["text-xs font-medium",e.email_exist?"text-red-700":"text-green-700"])},{default:t(()=>[o(h(e.email_exist?"Email address has been used.":"Email address is available."),1)]),_:1},8,["class"])):p("",!0)]),U(s(g,{class:"mt-0.5",type:"email",error:e.$page.props.errors.email,modelValue:e.form.email,"onUpdate:modelValue":a[0]||(a[0]=l=>e.form.email=l),onKeyup:a[1]||(a[1]=l=>e.checkEmail())},null,8,["error","modelValue"]),[[w,e.checkEmailExist,"800ms"]])]),r("div",K,[r("div",Q,[s(n,null,{default:t(()=>[o("Username"),W]),_:1}),e.checking_username?(m(),u(n,{key:0,class:"text-xs font-medium text-indigo-600"},{default:t(()=>[o(" Checking Username...")]),_:1})):p("",!0),!e.checking_username&&e.form.username!=""?(m(),u(n,{key:1,class:x(["text-xs font-medium",e.username_exist?"text-red-700":"text-green-700"])},{default:t(()=>[o(h(e.username_exist?"Username has been taken.":"Username is available."),1)]),_:1},8,["class"])):p("",!0)]),U(s(g,{class:"mt-0.5",type:"text",error:e.$page.props.errors.username,modelValue:e.form.username,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.username=l),onKeyup:a[3]||(a[3]=l=>e.checkUsername())},null,8,["error","modelValue"]),[[w,e.checkUsernameExist,"800ms"]])]),r("div",null,[s(n,null,{default:t(()=>[o("Full Name"),X]),_:1}),s(g,{type:"text",error:e.$page.props.errors.full_name,modelValue:e.form.full_name,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.full_name=l)},null,8,["error","modelValue"])]),r("div",null,[s(n,null,{default:t(()=>[o("Country"),Z]),_:1}),s(C,{items:e.$page.props.countries,"label-property":"name","value-property":"id",error:e.$page.props.errors.country_id,modelValue:e.form.country_id,"onUpdate:modelValue":a[5]||(a[5]=l=>e.form.country_id=l),"select-placeholder":"Select Country","search-placeholder":"Search country...",onSelect:a[6]||(a[6]=l=>e.clearState())},null,8,["items","error","modelValue"]),U(r("input",{type:"hidden","onUpdate:modelValue":a[7]||(a[7]=l=>e.form.country=l)},null,512),[[F,e.form.country]])]),r("div",null,[s(n,null,{default:t(()=>[o("State"),ee]),_:1}),s(C,{items:e.state_list,"label-property":"name","value-property":"id",error:e.$page.props.errors.country_state,modelValue:e.form.country_state,"onUpdate:modelValue":a[8]||(a[8]=l=>e.form.country_state=l),"select-placeholder":"Select State","search-placeholder":"Search state...",loading:e.loading.state},null,8,["items","error","modelValue","loading"])]),r("div",te,[s(n,null,{default:t(()=>[o("Address"),se]),_:1}),s(N,{type:"text",error:e.$page.props.errors.address,modelValue:e.form.address,"onUpdate:modelValue":a[9]||(a[9]=l=>e.form.address=l)},null,8,["error","modelValue"])]),r("div",null,[s(n,null,{default:t(()=>[o("Contact Number"),le]),_:1}),s(g,{type:"number",inputGroup:e.form.calling_code,error:e.$page.props.errors.contact_number,modelValue:e.form.contact_number,"onUpdate:modelValue":a[10]||(a[10]=l=>e.form.contact_number=l)},null,8,["inputGroup","error","modelValue"])])])]),_:1}),e.$page.props.can.view_user_roles?(m(),u(k,{key:0},{title:t(()=>[o("Roles Information")]),content:t(()=>[r("div",ae,[(m(!0),v($,null,S(i.roles,l=>(m(),v("div",{key:l.id},[e.hasPermission(l.permission)?(m(),u(n,{key:0,id:l.id,class:"flex items-center space-x-1 cursor-pointer"},{default:t(()=>[s(L,{class:"mr-1",id:l.id,value:l.id,checked:e.verifyChecked(l.id),modelValue:e.form.selected_roles,"onUpdate:modelValue":a[11]||(a[11]=V=>e.form.selected_roles=V)},null,8,["id","value","checked","modelValue"]),o(" "+h(l.display_name),1)]),_:2},1032,["id"])):p("",!0)]))),128))])]),_:1})):p("",!0),e.$page.props.can.create_child||e.$page.props.can.view_child?(m(),u(k,{key:1},{title:t(()=>[r("div",oe,[o(" Children Information "),e.$page.props.can.create_child?(m(),u(c,{key:0,onClick:a[12]||(a[12]=l=>e.show.add=!0)},{default:t(()=>[s(d(P),{class:"h-4 w-4"}),re]),_:1})):p("",!0)])]),content:t(()=>[e.$page.props.can.view_child?(m(),u(d(D),{key:0,class:"px-4"},{default:t(()=>[s(d(j),{class:"bg-gray-100"},{default:t(()=>[s(d(b),null,{default:t(()=>[s(d(y),{class:"px-4"},{default:t(()=>[o("Name")]),_:1}),s(d(y),null,{default:t(()=>[o("Gender")]),_:1}),s(d(y),null,{default:t(()=>[o("Date of Birth")]),_:1}),s(d(y),{class:"text-center"},{default:t(()=>[o("Action")]),_:1})]),_:1})]),_:1}),s(d(T),null,{default:t(()=>[e.form.children.length?p("",!0):(m(),u(d(b),{key:0},{default:t(()=>[s(d(_),{class:"text-center",colspan:"10"},{default:t(()=>[ie]),_:1})]),_:1})),(m(!0),v($,null,S(e.form.children,(l,V)=>(m(),u(d(b),null,{default:t(()=>[s(d(_),{class:"px-4"},{default:t(()=>[o(h(l.name),1)]),_:2},1024),s(d(_),null,{default:t(()=>[o(h(e.$page.props.gender_list.find(E=>E.id==l.gender).name),1)]),_:2},1024),s(d(_),null,{default:t(()=>[o(h(d(R)(l.dob).format("DD/MM/Y")),1)]),_:2},1024),s(d(_),{class:"text-center"},{default:t(()=>[s(c,{variant:"destructive",onClick:E=>e.deleteChild(V)},{default:t(()=>[o("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})):p("",!0)]),_:1})):p("",!0),s(k,null,{content:t(()=>[r("div",ne,[r("div",de,[s(c,{variant:"outline",onClick:a[13]||(a[13]=l=>e.$inertia.get(e.route("users")))},{default:t(()=>[o("Cancel")]),_:1}),s(c,{onClick:e.submit},{default:t(()=>[o("Register")]),_:1},8,["onClick"])])])]),_:1}),s(H,{open:e.show.add,"onUpdate:open":a[18]||(a[18]=l=>e.show.add=l)},{title:t(()=>[o("Add Child")]),content:t(()=>[r("div",me,[r("div",null,[s(n,null,{default:t(()=>[o("Full Name"),ue]),_:1}),s(g,{type:"text",error:e.$page.props.errors.child_name,modelValue:e.child_form.name,"onUpdate:modelValue":a[14]||(a[14]=l=>e.child_form.name=l)},null,8,["error","modelValue"])]),r("div",null,[s(n,null,{default:t(()=>[o("Gender"),pe]),_:1}),s(C,{items:e.$page.props.gender_list,"label-property":"name","value-property":"id",error:e.$page.props.errors.gender,modelValue:e.child_form.gender,"onUpdate:modelValue":a[15]||(a[15]=l=>e.child_form.gender=l),"select-placeholder":"Select Gender","search-placeholder":"Search gender..."},null,8,["items","error","modelValue"])]),r("div",null,[s(n,{id:"dob"},{default:t(()=>[o("Date of Birth"),fe]),_:1}),s(I,{mode:"date",format:"dd/MM/Y",teleport:"#dob",teleportCenter:!0,modelValue:e.child_form.dob,"onUpdate:modelValue":a[16]||(a[16]=l=>e.child_form.dob=l)},null,8,["modelValue"])])])]),footer:t(()=>[s(c,{variant:"outline",onClick:a[17]||(a[17]=l=>e.show.add=!1)},{default:t(()=>[o("Cancel")]),_:1}),s(c,{onClick:e.addChild},{default:t(()=>[o("Add")]),_:1},8,["onClick"])]),_:1},8,["open"])]),_:1})],64)}}});export{dt as default};
