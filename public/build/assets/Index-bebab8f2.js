import{r as h,e as F,y as m,z as s,x as o,u as t,Q as n,G as M,F as _,J as T,C as g,t as u,q as D,K as j,W as i}from"./@vue-d42dd214.js";import{_ as E}from"./index-6ec4f87f.js";import{_ as v}from"./app-6ed01770.js";import{_ as H,a as K,b as V,c as q,d as G,e as Q,f as A,g as y,h as U}from"./index-52483600.js";import{u as J,d as N,e as R}from"./@inertiajs-7f289881.js";import{_ as W}from"./DeleteConfirmation-aadb74e8.js";import{m as X}from"./vue3-markdown-514caa18.js";import{B as O,C as Y,T as Z,M as ee,P as te,H as se,S as oe,a as re,U as ne,L as ae,b as ie,c as le,d as de,e as me}from"./lucide-vue-next-53796c49.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./axios-1779699b.js";import"./laravel-echo-96cacb8d.js";import"./pusher-js-6d7d8249.js";import"./@vueform-cd27a95b.js";import"./cropperjs-bffc402e.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-4b397a2a.js";import"./radix-vue-00e18109.js";import"./@floating-ui-61ac2ed2.js";import"./@internationalized-2f03b566.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-7b89e231.js";import"./@radix-icons-4975f794.js";import"./@vuepic-1824abb1.js";import"./@babel-1b80a44a.js";import"./lodash.isequal-23888b5c.js";import"./vue-671a4423.js";import"./lodash.clonedeep-15cd822c.js";import"./qs-78438f3a.js";import"./side-channel-52add6bf.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-1fdcb41b.js";import"./deepmerge-89e33937.js";import"./nprogress-b9cffc46.js";import"./DialogDescription-98df017d.js";const ue={class:"grid min-h-screen h-full w-full md:grid-cols-[220px_1fr] lg:grid-cols-[280px_1fr]"},pe={class:"hidden border-r border-zinc-700 bg-muted/40 md:block"},ce={class:"flex flex-col gap-2"},fe={class:"grid items-start px-2 text-sm font-medium lg:pl-2.5 text-zinc-950 fixed"},xe={class:"flex w-full h-14 items-center justify-center border-b border-zinc-700 px-4 lg:h-[60px] lg:px-6"},_e={href:"/",class:"flex items-center gap-2 font-semibold"},ge={class:"space-y-1"},he=["onClickOnce"],ve={class:"truncate w-52"},ye={class:"flex flex-col bg-zinc-900 text-white"},we={class:"flex justify-between md:justify-end h-14 items-center gap-4 px-4 lg:h-[60px] lg:px-6 sticky top-0 bg-white"},be={class:"grid gap-2 text-lg font-medium"},ze={href:"#",class:"flex items-center gap-2 text-lg font-semibold"},ke={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground"},Ce={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl bg-muted px-3 py-2 text-foreground hover:text-foreground"},$e={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground"},Se={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground"},Te={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground"},je={class:"flex flex-1 flex-col items-center justify-between gap-4 p-4 lg:gap-6 lg:p-6 max-h-svh overflow-hidden -mt-16 bg-white"},Ae={key:0,class:"flex items-start space-x-2"},Ne={key:1,class:"flex items-center justify-end space-x-2 ml-20"},Oe={class:"rounded-xl border bg-zinc-800 px-4 py-1.5"},Pe={class:"relative bottom-0 w-full max-w-3xl"},Ie={key:0,class:"flex justify-center px-3 pb-3 gap-2"},Le={class:"relative rounded-2xl bg-zinc-800 p-5 max-h-52"},Be={class:"absolute bottom-0 w-full px-5 py-3 pt-"},Fe={class:"flex items-center justify-between"},Ot={__name:"Index",setup(Me){var k,C,$;const c=h(!1),w=h(null),f=h(null),l=J().props.value,b=l.chat_data?JSON.parse(l.chat_data.messages):"";window.Echo.channel("ai_response_stream."+l.auth.user.ID).listen("AiResponseStream",r=>{console.log(r)});const d=N({chat_id:((k=l.chat_data)==null?void 0:k.id)||"",thread_id:((C=l.chat_data)==null?void 0:C.thread_id)||"",run_id:(($=l.chat_data)==null?void 0:$.run_id)||"",messages:""}),P=r=>{d.messages=r.target.innerText},z=async()=>{c.value||!d.messages||(c.value=!0,await axios.post(route("ai.store"),{form:d}),d.messages="",w.value.innerText="",c.value=!1)},I=async r=>{try{r.ctrlKey&&r.key==="Enter"&&z()}catch(e){console.error("Error:",e)}},p=N({id:"",route_name:"",is_open:!1}),L=async r=>{p.route_name="ai.destroy",p.id=r,p.is_open=!0},B=async()=>{d.messages={role:"user",content:"Generate a random quiz."};try{const r=await axios.post(route("ai.generate_quiz"),{form:d});R.Inertia.get(route("chat.edit",r.data))}catch(r){console.log(r)}};return F(()=>{f.value&&(f.value.scrollTop=f.value.scrollHeight)}),(r,e)=>(u(),m(_,null,[s("div",ue,[s("div",pe,[s("div",ce,[s("nav",fe,[s("div",xe,[s("a",_e,[o(t(O),{class:"h-6 w-6"}),e[3]||(e[3]=s("span",{class:""},"ALFA and Friends Assistant",-1))])]),o(t(v),{onClickOnce:e[0]||(e[0]=M(a=>r.$inertia.get(r.route("ai.index")),["prevent"])),class:"mt-3"},{default:n(()=>[o(t(Y),{class:"h-5 w-5 mr-1"}),e[4]||(e[4]=s("span",{class:"font-medium"},"New Chat",-1))]),_:1}),e[5]||(e[5]=s("span",{class:"pl-1 mt-5 mb-2"},"Sessions",-1)),(u(!0),m(_,null,T(t(l).threads,a=>(u(),m("div",ge,[s("a",{onClickOnce:x=>a.id!=t(d).chat_id?r.$inertia.get(r.route("chat.edit",a.id)):"",class:D(["flex items-center gap-3 rounded-lg px-3 py-2 text-primary transition-all hover:bg-zinc-800 hover:text-white cursor-pointer",{"bg-zinc-800 text-white":a.id==t(d).chat_id}])},[s("span",ve,j(a.name),1),o(t(Z),{class:"w-4 text-red-500",onClick:x=>L(a.id)},null,8,["onClick"])],42,he)]))),256))])])]),s("div",ye,[s("header",we,[o(t(V),null,{default:n(()=>[o(t(H),{"as-child":""},{default:n(()=>[o(t(v),{variant:"outline",size:"icon",class:"shrink-0 md:hidden bg-zinc-800"},{default:n(()=>[o(t(ee),{class:"h-5 w-5 dark:text-white"}),e[6]||(e[6]=s("span",{class:"sr-only"},"Toggle navigation menu",-1))]),_:1})]),_:1}),o(t(K),{side:"left",class:"flex flex-col"},{default:n(()=>[s("nav",be,[s("a",ze,[o(t(te),{class:"h-6 w-6"}),e[7]||(e[7]=s("span",{class:"sr-only"},"Acme Inc",-1))]),s("a",ke,[o(t(se),{class:"h-5 w-5"}),e[8]||(e[8]=i(" Dashboard "))]),s("a",Ce,[o(t(oe),{class:"h-5 w-5"}),e[10]||(e[10]=i(" Orders ")),o(t(E),{class:"ml-auto flex h-6 w-6 shrink-0 items-center justify-center rounded-full"},{default:n(()=>e[9]||(e[9]=[i(" 6 ")])),_:1})]),s("a",$e,[o(t(re),{class:"h-5 w-5"}),e[11]||(e[11]=i(" Products "))]),s("a",Se,[o(t(ne),{class:"h-5 w-5"}),e[12]||(e[12]=i(" Customers "))]),s("a",Te,[o(t(ae),{class:"h-5 w-5"}),e[13]||(e[13]=i(" Analytics "))])])]),_:1})]),_:1}),o(t(U),null,{default:n(()=>[o(t(q),{"as-child":""},{default:n(()=>[o(t(v),{variant:"secondary",size:"icon",class:"rounded-full"},{default:n(()=>[o(t(ie),{class:"h-5 w-5"}),e[14]||(e[14]=s("span",{class:"sr-only"},"Toggle user menu",-1))]),_:1})]),_:1}),o(t(G),{align:"end"},{default:n(()=>[o(t(Q),null,{default:n(()=>e[15]||(e[15]=[i("My Account")])),_:1}),o(t(A)),o(t(y),null,{default:n(()=>e[16]||(e[16]=[i("Settings")])),_:1}),o(t(y),null,{default:n(()=>e[17]||(e[17]=[i("Support")])),_:1}),o(t(A)),o(t(y),null,{default:n(()=>e[18]||(e[18]=[i("Logout")])),_:1})]),_:1})]),_:1})]),s("main",je,[s("div",{class:"flex flex-col w-full max-w-3xl px-3 gap-10 overflow-auto scroll max-h-[36rem] mt-16 py-2",ref_key:"chatbox",ref:f},[t(b)?(u(!0),m(_,{key:0},T(t(b).data.reverse(),a=>{var x,S;return u(),m(_,null,[a.role=="assistant"?(u(),m("span",Ae,[o(t(O),{class:"min-h-6 min-w-6 text-zinc-900"}),o(t(X),{class:"px-3",mode:"light",content:(S=(x=a.content[0])==null?void 0:x.text)==null?void 0:S.value},null,8,["content"])])):g("",!0),a.role=="user"?(u(),m("span",Ne,[s("span",Oe,j(a.content[0].text.value),1)])):g("",!0)],64)}),256)):g("",!0)],512),s("div",Pe,[s("form",{onKeydown:I},[t(l).chat_data?g("",!0):(u(),m("div",Ie,[s("div",{class:"flex gap-1 items-center cursor-pointer bg-zinc-800 hover:bg-zinc-700 text-sm text-zinc-200 border rounded-xl px-4 py-2",onClickOnce:B},[o(t(le),{class:"h-4 w-4"}),e[19]||(e[19]=s("span",null,"Generate a Quiz",-1))],32)])),s("div",Le,[s("div",{class:"max-h-28 overflow-auto border-none focus:outline-none focus:ring-none mb-12 px-2",contenteditable:"true",onInput:P,ref_key:"prompt_input",ref:w},null,544)]),s("div",Be,[s("div",Fe,[o(t(de),{class:"h-9 w-9 rounded-full cursor-pointer hover:bg-zinc-700 p-2"}),o(t(me),{class:"h-10 w-10 rounded-full cursor-pointer hover:bg-zinc-700 p-2",onClickOnce:e[1]||(e[1]=a=>c.value==!1?z():"")})])])],32)])])])]),o(W,{open:t(p).is_open,onClose:e[2]||(e[2]=a=>t(p).is_open=!1),routeName:t(p).route_name,id:t(p).id},{title:n(()=>e[20]||(e[20]=[i("Delete Chat")])),description:n(()=>e[21]||(e[21]=[i("Are you sure want to delete this chat?")])),_:1},8,["open","routeName","id"])],64))}};export{Ot as default};
