import{_ as y}from"./Authenticated-bc30630a.js";import{o,c as a,a as u,u as c,d as e,t as h,w as d,F as m,H as $,n as p,q as n,e as f,s as _}from"./app-88ba4f41.js";import{s as v}from"./simplebar.min-b38b7dfb.js";import{T as x}from"./TimeAgo-8237e344.js";import{C as k,S as w,P as C,N as b}from"./carousel.es-1c09e0ac.js";import"./XIcon-ff0d5933.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./transition-355aa5aa.js";import"./keyboard-e1a17d76.js";import"./use-resolve-button-type-cf02c5d8.js";import"./menu-b62b08ed.js";import"./moment-a9aaa855.js";const L={class:"fixed w-full flex justify-center top-[4rem] md:top-[10rem] font-extrabold bg-white border border-gray-300 py-3 z-20"},B={class:"max-w-xl mx-auto border shadow bg-white rounded-lg px-4 mt-14"},H={class:"flex justify-evenly sm:justify-center space-x-8 md:space-x-10 pt-3 pb-4 font-medium"},S=e("img",{src:"/images/parents/stories.png",class:"w-10 h-10",alt:""},null,-1),D=e("span",{class:"text-sm"},"Stories",-1),j=[S,D],P=e("img",{src:"/images/parents/progress_report.png",class:"w-10 h-10",alt:""},null,-1),z=e("span",{class:"text-sm"},"Progress Reports",-1),A=[P,z],I=e("img",{src:"/images/parents/fee_invoice.png",class:"w-10 h-10",alt:""},null,-1),M=e("span",{class:"text-sm"},"Invoices",-1),N=[I,M],E=e("img",{src:"/images/parents/art_gallery.png",class:"w-10 h-10",alt:""},null,-1),T=e("span",{class:"text-sm"},"Art Gallery",-1),V=[E,T],Z=e("img",{src:"/images/parents/art_book.png",class:"w-10 h-10",alt:""},null,-1),F=e("span",{class:"text-sm"},"Art Book",-1),q=[Z,F],G={class:"max-w-xl mx-auto mt-5"},O={key:0,class:"flex items-center space-y-3"},R=e("h2",{class:"text-lg md:text-xl mx-1 font-extrabold"},"Stories",-1),Y=[R],J={key:1,class:"flex justify-center mx-1 mt-10"},K=e("span",{class:"text-slate-500"},"No Stories Found",-1),Q=[K],U={class:"mt-3 flex flex-col space-y-3 bg-white py-3 px-4 shadow-md rounded-xl text-sm"},W={class:"flex flex-row text-sm items-center"},X={class:"flex justify-between items-center flex-1 font-bold leading-tight select-none"},ee={class:"flex flex-col"},te={class:"text-slate-900 md:text-md font-bold"},se={class:"text-xs font-medium text-slate-500"},oe={class:"flex items-center"},re=e("hr",null,null,-1),ae={class:"text-sm text-slate-800"},ie={class:"carousel__item h-full"},ne=["src","onDblclick"],le={class:"flex items-center space-x-4"},ce={key:0,class:""},de=["onClick"],pe=e("path",{d:"M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"},null,-1),ge=[pe],ue=["onClick"],he=e("path",{d:"M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"},null,-1),me=[he],_e={key:1,class:"text-xs font-semibold select-none"},fe={key:1,class:""},ve=e("textarea",{class:"bg-white border border-gray-300 p-2 rounded w-full resize-none focus:ring-0 focus:border-2 focus:border-indigo-300 text-sm",rows:"2",placeholder:"Drop a comment..."},null,-1),xe=e("div",{class:"flex justify-end"},[e("button",{class:"px-4 py-2 text-xs bg-indigo-600 hover:bg-indigo-700 text-white rounded"},"Comment")],-1),ke=[ve,xe],we={key:3,class:"mt-3 max-w-xl py-3 px-4 border border-gray-200 rounded-xl shadow animate-pulse bg-white"},be=e("div",{class:"flex items-center"},[e("div",null,[e("div",{class:"h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-32 mb-2"}),e("div",{class:"w-48 h-2 bg-gray-200 rounded-full dark:bg-gray-700 mb-4"})])],-1),ye=e("hr",null,null,-1),$e=e("div",{class:"h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-48 mb-4 mt-3"},null,-1),Ce=e("div",{class:"flex items-center justify-center h-48 mb-4 bg-gray-300 rounded dark:bg-gray-700"},[e("svg",{class:"w-10 h-10 text-gray-200 dark:text-gray-600","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 20"},[e("path",{d:"M14.066 0H7v5a2 2 0 0 1-2 2H0v11a1.97 1.97 0 0 0 1.934 2h12.132A1.97 1.97 0 0 0 16 18V2a1.97 1.97 0 0 0-1.934-2ZM10.5 6a1.5 1.5 0 1 1 0 2.999A1.5 1.5 0 0 1 10.5 6Zm2.221 10.515a1 1 0 0 1-.858.485h-8a1 1 0 0 1-.9-1.43L5.6 10.039a.978.978 0 0 1 .936-.57 1 1 0 0 1 .9.632l1.181 2.981.541-1a.945.945 0 0 1 .883-.522 1 1 0 0 1 .879.529l1.832 3.438a1 1 0 0 1-.031.988Z"}),e("path",{d:"M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.98 2.98 0 0 0 .13 5H5Z"})])],-1),Le=e("span",{class:"sr-only"},"Loading...",-1),Be=[be,ye,$e,Ce,Le],He={components:{simplebar:v,TimeAgo:x,Carousel:k,Slide:w,Pagination:C,Navigation:b},data(){return{loading:{stories:!1}}},methods:{isLikedByParent(i){return this.$page.props.stories.data[i].likes.length?this.$page.props.stories.data[i].likes.some(t=>t.like_author_id===this.$page.props.auth.user.ID):!1},toggleLike(i,t){if(this.isLikedByParent(i)){const r=this.$page.props.stories.data[i].likes.findIndex(s=>s.like_author_id===this.$page.props.auth.user.ID);this.$page.props.stories.data[i].likes.splice(r,1)}else this.$page.props.stories.data[i].likes.push({like_author_id:this.$page.props.auth.user.ID});axios.post(route("parent.like_story"),{story_id:t,to_delete:!this.isLikedByParent(i)}).then(r=>{console.log(r)})},handleStoryScroll(){const i=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.scrollHeight||document.body.scrollHeight,r=document.documentElement.clientHeight||window.innerHeight;i+r>=t-100&&this.$page.props.stories.next_page_url&&(this.loading.stories||(this.loading.stories=!0,axios.get(route("parent.student_stories",[this.$page.props.session_data.current_active_child.student_id,this.$page.props.session_data.current_active_programme.id]),{params:{page:this.$page.props.stories.current_page+1}}).then(s=>{s.data.data.forEach(l=>{this.$page.props.stories.data.push(l)}),this.$page.props.stories.current_page=s.data.current_page,this.$page.props.stories.next_page_url=s.data.next_page_url,this.loading.stories=!1})))}}},qe=Object.assign(He,{__name:"Index",setup(i){return(t,r)=>(o(),a(m,null,[u(c($),{title:"Home"}),e("div",L,[e("span",null,h(t.$page.props.current_active_programme.name),1)]),u(y,{onScroll:t.handleStoryScroll},{default:d(()=>[e("div",B,[u(c(v),{"data-simplebar-auto-hide":"true"},{default:d(()=>[e("div",H,[e("div",{class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.stories")?"font-extrabold":""]),onClick:r[0]||(r[0]=s=>t.$inertia.get(t.route("parent.stories",t.$page.props.current_active_programme.encrypted_id)))},j,2),e("div",{class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.progress_reports")?"font-extrabold":""]),onClick:r[1]||(r[1]=s=>t.$inertia.get(t.route("parent.progress_reports")))},A,2),e("div",{class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.invoices")?"font-extrabold":""]),onClick:r[2]||(r[2]=s=>t.$inertia.get(t.route("parent.invoices")))},N,2),t.$page.props.current_active_programme.id==3||t.$page.props.current_active_programme.id==5?(o(),a("div",{key:0,class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.art_gallery")?"font-extrabold":""]),onClick:r[3]||(r[3]=s=>t.$inertia.get(t.route("parent.art_gallery")))},V,2)):n("",!0),t.$page.props.current_active_programme.id==3||t.$page.props.current_active_programme.id==5?(o(),a("div",{key:1,class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.art_book")?"font-extrabold":""]),onClick:r[4]||(r[4]=s=>t.$inertia.get(t.route("parent.art_book")))},q,2)):n("",!0)])]),_:1})]),e("div",G,[t.$page.props.stories.data.length?(o(),a("div",O,Y)):n("",!0),t.$page.props.stories.data.length?n("",!0):(o(),a("div",J,Q)),t.$page.props.stories.data.length?(o(!0),a(m,{key:2},f(t.$page.props.stories.data,(s,l)=>(o(),a("div",U,[e("div",W,[e("div",X,[e("div",ee,[e("span",te,h(s.story_author_name),1),e("span",se,h(s.story_programme_name),1)]),e("div",oe,[u(x,{class:"text-gray-500 font-medium text-xs",datetime:s.story_date},null,8,["datetime"])])])]),re,e("span",ae,h(s.story_title),1),s.images?(o(),_(c(k),{key:0,mouseDrag:s.images.length>1,touchDrag:s.images.length>1},{addons:d(()=>[s.images.length>1?(o(),_(c(b),{key:0})):n("",!0)]),default:d(()=>[(o(!0),a(m,null,f(s.images,(g,Se)=>(o(),_(c(w),{key:g},{default:d(()=>[e("div",ie,[e("img",{src:"/storage/stories/"+g.image_filename,class:"select-none h-full",onDblclick:De=>t.toggleLike(l,s.story_id)},null,40,ne)])]),_:2},1024))),128))]),_:2},1032,["mouseDrag","touchDrag"])):n("",!0),e("div",le,[t.$page.props.can.create_stories?n("",!0):(o(),a("div",ce,[t.isLikedByParent(l)?(o(),a("svg",{key:0,onClick:g=>t.toggleLike(l,s.story_id),xmlns:"http://www.w3.org/2000/svg",class:"inline-block h-6 w-6 text-red-500 cursor-pointer",fill:"currentColor",viewBox:"0 0 512 512"},ge,8,de)):(o(),a("svg",{key:1,onClick:g=>t.toggleLike(l,s.story_id),xmlns:"http://www.w3.org/2000/svg",class:"inline-block h-6 w-6 text-gray-500 hover:text-red-500 cursor-pointer",fill:"currentColor",viewBox:"0 0 512 512"},me,8,ue))])),t.isLikedByParent(l)&&!t.$page.props.can.create_stories?(o(),a("span",_e,"You liked this")):n("",!0)]),s.show_comment?(o(),a("div",fe,ke)):n("",!0)]))),256)):n("",!0),t.loading.stories?(o(),a("div",we,Be)):n("",!0)])]),_:1},8,["onScroll"])],64))}});export{qe as default};
