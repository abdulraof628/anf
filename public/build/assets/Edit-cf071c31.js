import{B as b}from"./Authenticated-214cc5de.js";import{H as w,L as k}from"./@inertiajs-2b766590.js";import{_ as c}from"./Card-e481dfab.js";import{a as q,_ as V}from"./index-1a5ef3a0.js";import{_ as $}from"./AlertTitle-e123b4ab.js";import C from"./SingleChoice-ff0d5874.js";import R from"./MultipleChoices-2f1c788e.js";import U from"./MatrixSorting-830e7da4.js";import{e as L}from"./@radix-icons-9ff33614.js";import{x as h,v as i,u as m,O as r,F as S,b7 as _,q as d,U as n,y as o,t as g,B as p}from"./@vue-39dc9ff3.js";import"./ApplicationLogo-5cf6e77e.js";import"./radix-vue-a603168c.js";import"./@floating-ui-c05b1c1f.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-ef5f5861.js";import"./axios-1779699b.js";import"./pusher-js-68b5c933.js";import"./@vueform-8fb84cf1.js";import"./@vuepic-a83e4355.js";import"./@babel-1b80a44a.js";import"./cropperjs-042b647f.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-e9930861.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-c14271ca.js";import"./lodash.isequal-0acc53e7.js";import"./vue-46d666fa.js";import"./lodash.clonedeep-12c784b4.js";import"./qs-45a3326f.js";import"./side-channel-401220dd.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-ac0241aa.js";import"./deepmerge-89e33937.js";import"./nprogress-87ee1729.js";import"./lucide-vue-next-7b48dc26.js";import"./index-a02644ab.js";const B={class:"grid grid-cols-1 xl:grid-cols-3 gap-4"},E=o("span",{class:"text-red-500"},"*",-1),I=o("span",{class:"text-red-500"},"*",-1),D=o("span",{class:"text-red-500"},"*",-1),T={class:"flex flex-col space-y-2"},F=o("br",null,null,-1),M={class:"grid grid-cols-1 gap-4"},N=o("span",{class:"text-red-500"},"*",-1),j=o("span",{class:"text-red-500"},"*",-1),A=o("span",{class:"text-red-500"},"*",-1),O=o("span",{class:"text-red-500"},"*",-1),P={class:"space-y-1 text-center"},H=o("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[o("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),G={class:"flex text-sm text-gray-600"},Q={class:"browse text-indigo-400 hover:text-indigo-800 cursor-pointer font-bold"},Y={ref:"inside_image",id:"file",class:"sr-only",type:"file",accept:"image/*"},z=o("p",{class:"pl-1"},"or drag and drop an image",-1),J=o("p",{class:"text-xs text-gray-500"},"Image Format : PNG, JPG",-1),W={key:1,class:"w-1/4 relative group mt-2"},X={class:"absolute w-full h-full hover:bg-black hover:opacity-75 hidden group-hover:block"},K=o("div",{class:"pl-[0.65rem]"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),Z=o("span",{class:"text-white"},"Remove",-1),x=[K,Z],ee=["src"],y=window.URL||window.webkitURL,te=/^image\/\w+$/,oe={components:{Head:w,Link:k},props:{dt_id:String,test_id:String,diagnostic_test_info:Object,diagnostic_test_answers:Object,redirect_url:String},data(){return{data:{type:Object,default:()=>({})},showUpload:this.$page.props.diagnostic_test_info.question_image===null||this.$page.props.diagnostic_test_info.question_image==="",showImage:this.$page.props.diagnostic_test_info.question_image!==null||this.$page.props.diagnostic_test_info.question_image!=="",question_types:[{id:1,name:"Single Choice"},{id:2,name:"Multiple Choices"},{id:4,name:"Fill in the Blank"}],form:{dt_id:this.dt_id?this.dt_id:"",id:this.diagnostic_test_info?this.diagnostic_test_info.id:"",category_id:this.diagnostic_test_info?this.diagnostic_test_info.category_id:"",redirect_yes:this.diagnostic_test_info.redirect_yes_id!=null?this.diagnostic_test_info.redirect_yes_id:"",redirect_no:this.diagnostic_test_info.redirect_no_id!=null?this.diagnostic_test_info.redirect_no_id:"",question_type:this.diagnostic_test_info?this.diagnostic_test_info.question_type:"",question:this.diagnostic_test_info?this.diagnostic_test_info.question:"",remarks:this.diagnostic_test_info?this.diagnostic_test_info.remarks:"",delete_image:!1,image_url:"",image_file:"",question_answer_data:this.diagnostic_test_answers?this.diagnostic_test_answers:[]}}},methods:{submit(){this.$inertia.post(route("dt.settings.details.update"),this.form,{preserveState:!0})},read(s,e){return new Promise((t,l)=>{if(!s){t();return}te.test(s.type)?y?t({loaded:!0,name:s.name,type:s.type,url:y.createObjectURL(s)}):l(new Error("Your browser is not supported.")):l(new Error("Please select a valid image file."))})},change({target:s}){const{files:e}=s;e&&e.length>0&&this.read(e[0],s).then(t=>{this.form.image_url=t.url,this.form.image_file=e,this.showUpload=!1,this.showImage=!0,this.update(t)}).catch(this.alert)},dragover(s){s.preventDefault()},drop(s){const{files:e}=s.dataTransfer;s.preventDefault(),e&&e.length>0&&this.read(e[0],s).then(t=>{this.form.image_url=t.url,this.form.image_file=e,this.showUpload=!1,this.showImage=!0,this.update(t)}).catch(this.alert)},alert(s){window.alert(s&&s.message?s.message:s)},update(s){Object.assign(this.data,s)},removeImage(){this.form.image_url="",this.$page.props.diagnostic_test_info.question_image!=null&&(this.form.delete_image=!0),this.showImage=!1,this.showUpload=!0},dtEdit(){this.$inertia.get(route("dt.settings.details"),{dt_id:this.dt_id},{preserveScroll:!0})},appendToForm(s){this.form.question_answer_data=s},imageLoadError(){this.showImage=!1,this.showUpload=!0}}},xe=Object.assign(oe,{__name:"Edit",setup(s){return(e,t)=>{const l=_("Label"),u=_("ComboBox"),f=_("Textarea"),v=_("Button");return d(),h(S,null,[i(m(w),{title:"Diagnostic Test"}),i(b,null,{header:r(()=>[]),default:r(()=>[i(c,null,{title:r(()=>[n("Basic Information")]),content:r(()=>[o("div",B,[o("div",null,[i(l,null,{default:r(()=>[n("Category"),E]),_:1}),i(u,{items:e.$page.props.diagnostic_test_categories,"label-property":"name","value-property":"id",error:e.$page.props.errors.category_id,modelValue:e.form.category_id,"onUpdate:modelValue":t[0]||(t[0]=a=>e.form.category_id=a),"select-placeholder":"Select Category","search-placeholder":"Search category..."},null,8,["items","error","modelValue"])]),o("div",null,[i(l,null,{default:r(()=>[n("Redirection (Correct)"),I]),_:1}),i(u,{items:e.$page.props.diagnostic_test_list,"label-property":"question","value-property":"id",error:e.$page.props.errors.redirect_yes,modelValue:e.form.redirect_yes,"onUpdate:modelValue":t[1]||(t[1]=a=>e.form.redirect_yes=a),"select-placeholder":"Default (No Redirection)","search-placeholder":"Search redirection..."},null,8,["items","error","modelValue"])]),o("div",null,[i(l,null,{default:r(()=>[n("Redirection (Wrong)"),D]),_:1}),i(u,{items:e.$page.props.diagnostic_test_list,"label-property":"question","value-property":"id",error:e.$page.props.errors.redirect_no,modelValue:e.form.redirect_no,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.redirect_no=a),"select-placeholder":"Default (No Redirection)","search-placeholder":"Search redirection..."},null,8,["items","error","modelValue"])])])]),_:1}),i(c,null,{title:r(()=>[n("Question Details")]),content:r(()=>[e.form.question_type==4?(d(),g(m(V),{key:0,class:"bg-sky-200 text-slate-900 mb-3"},{default:r(()=>[i(m(L),{class:"h-4 w-4"}),i(m($),{class:"font-bold mb-3 underline"},{default:r(()=>[n("Notes")]),_:1}),i(m(q),null,{default:r(()=>[o("div",T,[i(l,null,{default:r(()=>[n("Please wrap the answer with [ ] for the system to automatically replace it with blank spaces, but only in the question field.")]),_:1}),i(l,{class:"font-semibold text-sky-900"},{default:r(()=>[n("ALFA like to [play] football.")]),_:1}),F,i(l,null,{default:r(()=>[n("Use | to set multiple correct answers.")]),_:1}),i(l,{class:"font-semibold text-sky-900"},{default:r(()=>[n("ALFA like to [eat|drink|sleep].")]),_:1})])]),_:1})]),_:1})):p("",!0),o("div",M,[o("div",null,[i(l,null,{default:r(()=>[n("Type"),N]),_:1}),i(u,{items:e.question_types,"label-property":"name","value-property":"id",error:e.$page.props.errors.question_type,modelValue:e.form.question_type,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.question_type=a),"select-placeholder":"Select Type","search-placeholder":"Search type..."},null,8,["items","error","modelValue"])]),o("div",null,[i(l,null,{default:r(()=>[n("Question"),j]),_:1}),i(f,{rows:"3",error:e.$page.props.errors.question,modelValue:e.form.question,"onUpdate:modelValue":t[4]||(t[4]=a=>e.form.question=a)},null,8,["error","modelValue"])]),o("div",null,[i(l,null,{default:r(()=>[n("Remarks / Additional Notes"),A]),_:1}),i(f,{rows:"3",error:e.$page.props.errors.remarks,modelValue:e.form.remarks,"onUpdate:modelValue":t[5]||(t[5]=a=>e.form.remarks=a)},null,8,["error","modelValue"])]),o("div",null,[i(l,null,{default:r(()=>[n("Question Image"),O]),_:1}),e.showUpload?(d(),h("div",{key:0,class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",onChange:t[6]||(t[6]=(...a)=>e.change&&e.change(...a)),onDragover:t[7]||(t[7]=(...a)=>e.dragover&&e.dragover(...a)),onDrop:t[8]||(t[8]=(...a)=>e.drop&&e.drop(...a))},[o("div",P,[H,o("div",G,[o("label",Q,[n("Click here "),o("input",Y,null,512)]),z]),J])],32)):p("",!0),e.showImage?(d(),h("div",W,[o("div",X,[o("div",{class:"absolute cursor-pointer top-1/2 left-1/2 -translate-y-2/4 -translate-x-2/4 h-16 w-16 hover:text-red-500 text-red-600 transition ease-in-out hover:-translate-1 hover:scale-110 duration-100",alt:"Remove Image",onClick:t[9]||(t[9]=(...a)=>e.removeImage&&e.removeImage(...a))},x)]),o("img",{class:"rounded w-full",src:e.form.image_url!=""?e.form.image_url:s.diagnostic_test_info.question_image?"/storage/"+s.diagnostic_test_info.question_image:"",alt:"",onError:t[10]||(t[10]=(...a)=>e.imageLoadError&&e.imageLoadError(...a))},null,40,ee)])):p("",!0)])])]),_:1}),e.form.question_type==1?(d(),g(C,{key:0,onReceivedData:e.appendToForm,prop_answers:s.diagnostic_test_answers,action:"edit"},null,8,["onReceivedData","prop_answers"])):p("",!0),e.form.question_type==2?(d(),g(R,{key:1,onReceivedData:e.appendToForm,prop_answers:s.diagnostic_test_answers,action:"edit"},null,8,["onReceivedData","prop_answers"])):p("",!0),e.form.question_type==3?(d(),g(U,{key:2,onReceivedData:e.appendToForm,prop_answers:s.diagnostic_test_answers,action:"edit"},null,8,["onReceivedData","prop_answers"])):p("",!0),i(c,null,{footer:r(()=>[i(v,{variant:"outline",onClick:t[11]||(t[11]=a=>e.dtEdit())},{default:r(()=>[n("Cancel")]),_:1}),i(v,{onClick:e.submit},{default:r(()=>[n("Save")]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}}});export{xe as default};
