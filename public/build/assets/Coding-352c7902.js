import{c as i,b as a,u as p,w as d,F as u,H as w,L as C,ad as g,o as n,d as s,e as L,j as f,h as m,t as c,n as y,k as h,C as U,f as x,y as B,l as M,g as T}from"./app-c08ab2c6.js";import{B as V}from"./Authenticated-c115d3ae.js";import{B as _}from"./Button-48c83066.js";import D from"./StudentInformation-efccffe0.js";import{Z as k}from"./main-13976139.js";import{M as j}from"./Modal-c0cbea84.js";import{h as P}from"./default.css_vue_type_style_index_0_src_true_lang-aaf3f0c5.js";import{s as v}from"./multiselect-33dd53f4.js";/* empty css                                                         *//* empty css            */import"./ApplicationLogo-0186e746.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./VueFinalModal.esm-12d0fd57.js";const N={class:"md:grid md:grid-cols-2"},O={class:"md:mt-0 md:col-span-2"},$={class:"px-4 py-5 bg-indigo-50 space-y-6 sm:p-6"},A={class:"grid grid-rows-1 grid-cols-1 sm:grid-cols-1 grid-flow-col gap-4"},R={class:"sm:row-span-3"},z={class:"grid grid-rows-1 grid-cols-1 sm:grid-cols-1 grid-flow-col gap-4"},H={class:"sm:row-span-3"},E={class:"p-6 bg-white border border-gray-200 rounded-lg shadow-md"},F=s("div",{class:"mb-5"},[s("h1",{class:"font-bold text-indigo-800 self-end"},"Progress Report Listing"),s("div",{class:"border-b border-dashed border-indigo-900 mt-1"})],-1),Z={class:"mb-4"},Y={class:"overflow-x-auto"},q={class:"table-auto min-w-full divide-y divide-gray-200"},G=s("thead",{class:"bg-gray-300"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/12"},"Date"),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/12"},"Term / Book"),s("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-2/12"},"Status"),s("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-2/12"},"Action")])],-1),I={class:"bg-white divide-y divide-gray-200"},J={key:0},K=s("td",{class:"text-center",colspan:"10"},[s("div",{class:"p-3"}," No Record Found! ")],-1),Q=[K],W={class:"px-4 py-2 whitespace-nowrap"},X={class:"text-sm font-medium text-gray-700"},ee={class:"px-6 py-4 whitespace-nowrap"},se={class:"text-sm font-medium text-gray-700"},te={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium"},oe={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium"},re=s("h3",{class:"text-gray-900 text-xl font-semibold"}," Update Progress Report ",-1),ie={class:"p-6 overflow-y-auto no-scrollbar"},ne={class:"grid grid-rows-1"},ae={class:"grid grid-cols-2 gap-4"},de={class:"mb-3"},le=s("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Date ",-1),ce={class:"mt-1 flex rounded-md.shadow-sm"},pe=s("div",{class:"grid grid-cols-1"},[s("hr",{class:"my-4"})],-1),ue={class:"grid grid-cols-12 gap-4"},ge={class:"col-span-5"},me={class:"mb-3"},he=s("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Lesson ",-1),_e={class:"mt-1 flex rounded-md.shadow-sm"},be={class:"col-span-5"},fe={class:"mb-3"},ye=s("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Topic ",-1),xe={class:"mt-1 flex rounded-md.shadow-sm"},ve={class:"col-span-2 self-end"},we={class:"mb-3"},ke=s("label",{for:"",class:"block text-sm font-bold text-gray-700"},null,-1),je={class:"mt-1 flex rounded-md.shadow-sm"},Se={key:0,class:"grid grid-cols-1 py-3"},Ce=s("label",{for:"",class:"block text-sm font-bold text-gray-700"},"Objectives",-1),Le={key:0,class:"p-3 bg-gray-50"},Ue={key:1,class:"flex justify-center py-4 items-center space-x-2"},Be=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-arrow-repeat animate-spin",viewBox:"0 0 16 16"},[s("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"}),s("path",{"fill-rule":"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"})],-1),Me=s("span",null,"Loading...",-1),Te=[Be,Me],Ve={key:1,class:"grid grid-cols-1 divide-y divide-neutral-200 border-x border-t border-b mb-3"},De={class:"p-5 bg-gray-50 hover:bg-gray-100"},Pe={class:"group space-y-4"},Ne={class:"flex justify-between items-center font-medium cursor-pointer list-none"},Oe={class:"ml-2 text-sm"},$e={class:"flex space-x-4"},Ae={for:"helper-checkbox",class:"font-medium text-gray-900"},Re=["onClick"],ze={id:"helper-checkbox-text",class:"text-xs font-normal text-gray-500"},He=s("span",{class:"transition group-open:rotate-180"},[s("svg",{fill:"none",height:"24","shape-rendering":"geometricPrecision",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",viewBox:"0 0 24 24",width:"24"},[s("path",{d:"M6 9l6 6 6-6"})])],-1),Ee={class:"text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg"},Fe={class:"w-full border-b border-gray-200 rounded-t-lg"},Ze={class:"flex items-center pl-3"},Ye=["id","value","onUpdate:modelValue"],qe=["for"],Ge={class:"grid grid-cols-1"},Ie={class:"mb-3"},Je=s("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Comments ",-1),Ke={class:"mt-1 flex rounded-md.shadow-sm"},Qe={class:"grid grid-cols-2 gap-4"},We={class:"mb-3"},Xe=s("label",{for:"title",class:"block text-sm font-bold text-gray-700"}," Status ",-1),es={class:"mt-1 flex rounded-md.shadow-sm"},ss=["value"],ts={class:"flex justify-end space-x-2 items-center p-4 border-t border-gray-200 rounded-b"},os={components:{Head:w,Link:C,Datepicker:k,Modal:j,Multiselect:v},data(){return{show_progress_report:!1,objectives_not_found:!1,progress_report_list:{},disabled:{terms_books:!0,units:!0,lessons:!0},options:{terms_books:[],units:[],lessons:[],objectives:[]},loading:{terms_books:!1,units:!1,lessons:!1,objectives:!1},search:{unit_id:"",lesson_id:""},form:{date:"",term_book_id:"",units_lessons:[],comments:"",attendance_status:""}}},methods:{getTermBookName(t){const e=this.$page.props.math_terms_books.find(o=>o.id==this.progress_report_list[t].math_term_book_id);return(e==null?void 0:e.name)||""},getUnitName(t){const e=this.options.units.find(o=>o.id==t);return(e==null?void 0:e.name)||""},getLessonName(t){const e=this.options.lessons.find(o=>o.id==t);return(e==null?void 0:e.name)||""},getObjectiveName(t){const e=this.options.objectives.find(o=>o.id==t);return(e==null?void 0:e.name)||""},getAttendanceStatus(t){const e=this.$page.props.attendance_status.find(o=>o.id==this.progress_report_list[t].attendance_status);return(e==null?void 0:e.name)||""},getAttendanceStatusColor(t){const e=this.$page.props.attendance_status.find(r=>r.id==this.progress_report_list[t].attendance_status);return{1:"text-green-100 bg-green-600",2:"text-red-100 bg-red-600",3:"text-gray-700 bg-gray-300"}[e==null?void 0:e.id]||""},viewProgressReport(t){this.search.unit_id="",this.search.lesson_id="",this.form.units_lessons=[],this.options.units=[],this.disabled.terms_books=!0,this.disabled.units=!0,this.disabled.lessons=!0;const e=this.progress_report_list[t];this.form.report_id=t,this.form.date=e.date,this.form.term_book_id=e.math_term_book_id??"",this.form.comments=e.comments??"",this.form.attendance_status=e.attendance_status,this.getTermsBooks(t),this.getUnitsLessons(t),this.getUnitsLessonsObjectives(t),this.show_progress_report=!0},updateProgressReport(){this.$inertia.post(route("progress_report.store_math"),this.form,{onBefore:t=>{},preserveScroll:!0,preserveState:!1})},async getUnitsLessons(t){const e=await g.get(route("progress_report.get_math_units_lessons",t));this.form.units_lessons=e.data.units_lessons,this.options.units=e.data.units,this.options.lessons=e.data.lessons},async getUnitsLessonsObjectives(t){this.loading.objectives=!0,this.objectives_not_found=!1,this.options.objectives=[];const e=await g.get(route("progress_report.get_math_units_lessons_objectives",t));e.data.length?this.options.objectives=e.data:this.objectives_not_found=!0,this.loading.objectives=!1},async getTermsBooks(t){if(t){this.loading.terms_books=!0;const e=await g.get(route("progress_report.get_math_terms_books",t));this.options.terms_books=e.data,this.disabled.terms_books=!1,this.loading.terms_books=!1}},async getLessons(t,e=!1){if(t){e?this.loading.lessons=!1:this.loading.lessons=!0,this.options.lessons=[],this.disabled.lessons=!0;const o=await g.get(route("progress_report.get_math_lessons",t));this.options.lessons=o.data,e||(this.form.lesson_id=""),this.disabled.lessons=!1,this.loading.lessons=!1}else this.options.lessons=[],this.disabled.lessons=!0},addUnitLesson(){if(this.search.unit_id&&this.search.lesson_id){const t=this.options.objectives.filter(e=>e.lesson_id===this.search.lesson_id);console.log(t),t.length<1?(this.loading.objectives=!0,g.get(route("progress_report.get_math_objectives",this.search.lesson_id)).then(e=>{e.data.forEach(o=>{this.options.objectives.push(o)}),this.form.units_lessons.push({math_unit_id:this.search.unit_id,math_lesson_id:this.search.lesson_id,math_objective_id:[]}),this.loading.objectives=!1})):this.form.units_lessons.push({math_unit_id:this.search.unit_id,math_lesson_id:this.search.lesson_id,math_objective_id:[]})}},deleteUnitLesson(t){this.form.units_lessons.splice(t,1)}},created(){this.$page.props.progress_reports.forEach(t=>{this.progress_report_list[t.id]={id:t.id,date:t.date,math_term_book_id:t.math_term_book_id,comments:t.comments,attendance_status:t.attendance_status}})}},fs=Object.assign(os,{__name:"Coding",setup(t){return(e,o)=>(n(),i(u,null,[a(p(w),{title:"Progress Report"}),a(V,null,{header:d(()=>[]),default:d(()=>[s("div",N,[s("div",O,[s("form",{onSubmit:o[0]||(o[0]=L((...r)=>e.submit&&e.submit(...r),["prevent"]))},[s("div",$,[s("div",A,[s("div",R,[a(D)])]),s("div",z,[s("div",H,[s("div",E,[F,s("div",Z,[s("div",Y,[s("table",q,[G,s("tbody",I,[e.$page.props.progress_reports.length?f("",!0):(n(),i("tr",J,Q)),(n(!0),i(u,null,m(e.$page.props.progress_reports,(r,b)=>(n(),i("tr",{class:"hover:bg-gray-200",key:r.report_id},[s("td",W,[s("div",X,c(p(P)(e.progress_report_list[r.id].date).format("DD/MM/Y")),1)]),s("td",ee,[s("div",se,c(e.getTermBookName(r.id)),1)]),s("td",te,[s("span",{class:y(["inline-flex items-center justify-center px-2 py-1 text-xs rounded",e.getAttendanceStatusColor(r.id)])},c(e.getAttendanceStatus(r.id)),3)]),s("td",oe,[a(_,{buttonType:"blue",onClick:l=>e.viewProgressReport(r.id)},{default:d(()=>[h("View / Update")]),_:2},1032,["onClick"])])]))),128))])])])])])])])])],32)])]),a(j,{showModal:e.show_progress_report,onHideModal:o[8]||(o[8]=r=>e.show_progress_report=!1)},{header:d(()=>[re]),content:d(()=>[s("div",ie,[s("div",ne,[s("div",ae,[s("div",de,[le,s("div",ce,[a(p(k),{class:y("w-full rounded-lg shadow-sm"),style:U(e.$page.props.errors.date?"--dp-border-color: #fa9e9e":"--dp-border-color: #cccccc"),enableTimePicker:!1,"auto-apply":!0,placeholder:"Select Date",format:"dd/MM/yyyy",modelValue:e.form.date,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.date=r)},null,8,["style","modelValue"])])])]),pe,s("div",ue,[s("div",ge,[s("div",me,[he,s("div",_e,[a(p(v),{onSelect:o[2]||(o[2]=r=>e.getLessons(e.search.unit_id)),modelValue:e.search.unit_id,"onUpdate:modelValue":o[3]||(o[3]=r=>e.search.unit_id=r),valueProp:"id",appendNewOption:!1,searchable:!0,options:e.options.units,clearOnSelect:!1,canClear:!1,canDeselect:!0,trackBy:"name",label:"name",loading:e.loading.units,placeholder:"Please Select",classes:{container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer rounded-sm bg-white text-base leading-snug border-gray-300",containerDisabled:"cursor-not_allowed bg-gray-100 border focus:border-gray-200 h-10",containerOpen:"rounded-b-none",containerOpenTop:"rounded-t-none",containerActive:"border border-gray-300",search:"w-full absolute inset-0 border-gray-300 focus:outline-none focus:border-transparent focus:ring-0 appearance-none text-base font-sans bg-white rounded-sm",dropdown:"max-h-60 absolute -left-px -right-px bottom-0 transform translate-y-full border border-gray-300 -mt-px overflow-y-scroll z-50 bg-white flex flex-col rounded-b",dropdownTop:"-translate-y-full top-px bottom-auto flex-col-reverse rounded-b-none rounded-t",dropdownHidden:"hidden",options:"flex flex-col p-0 m-0 list-none w-full",optionsTop:"flex-col-reverse",option:"flex items-center justify-start box-border text-left cursor-pointer text-base leading-snug py-2 px-3 text-sm",optionPointed:"text-gray-800 bg-gray-100",optionSelected:"text-white bg-indigo-500",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-indigo-500 opacity-90",optionSelectedDisabled:"text-green-100 bg-green-500 bg-opacity-50 cursor-not-allowed",noOptions:"py-2 px-3 text-gray-600 bg-white text-left",noResults:"py-2 px-3 text-gray-600 bg-white text-left"}},null,8,["modelValue","options","loading"])])])]),s("div",be,[s("div",fe,[ye,s("div",xe,[a(p(v),{modelValue:e.search.lesson_id,"onUpdate:modelValue":o[4]||(o[4]=r=>e.search.lesson_id=r),valueProp:"id",appendNewOption:!1,searchable:!0,options:e.options.lessons,clearOnSelect:!1,canClear:!1,canDeselect:!0,trackBy:"name",label:"name",disabled:e.disabled.lessons,placeholder:"Please Select",loading:e.loading.lessons,classes:{container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer rounded-sm bg-white text-base leading-snug border-gray-300",containerDisabled:"cursor-not-allowed bg-gray-100 border focus:border-gray-200 h-10",containerOpen:"rounded-b-none",containerOpenTop:"rounded-t-none",containerActive:"border border-gray-300",search:"w-full absolute inset-0 border-gray-300 focus:outline-none focus:border-transparent focus:ring-0 appearance-none text-base font-sans bg-white rounded-sm",dropdown:"max-h-60 absolute -left-px -right-px bottom-0 transform translate-y-full border border-gray-300 -mt-px overflow-y-scroll z-50 bg-white flex flex-col rounded-b",dropdownTop:"-translate-y-full top-px bottom-auto flex-col-reverse rounded-b-none rounded-t",dropdownHidden:"hidden",options:"flex flex-col p-0 m-0 list-none w-full",optionsTop:"flex-col-reverse",option:"flex items-center justify-start box-border text-left cursor-pointer text-base leading-snug py-2 px-3 text-sm",optionPointed:"text-gray-800 bg-gray-100",optionSelected:"text-white bg-indigo-500",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-indigo-500 opacity-90",optionSelectedDisabled:"text-green-100 bg-green-500 bg-opacity-50 cursor-not-allowed",noOptions:"py-2 px-3 text-gray-600 bg-white text-left",noResults:"py-2 px-3 text-gray-600 bg-white text-left"}},null,8,["modelValue","options","disabled","loading"])])])]),s("div",ve,[s("div",we,[ke,s("div",je,[a(_,{class:"py-3 px-4",buttonType:"info",onClick:e.addUnitLesson},{default:d(()=>[h("Add")]),_:1},8,["onClick"])])])])]),e.form.units_lessons.length?(n(),i("div",Ve,[(n(!0),i(u,null,m(e.form.units_lessons,(r,b)=>(n(),i("div",De,[s("details",Pe,[s("summary",Ne,[s("div",Oe,[s("div",$e,[s("label",Ae,c(e.getUnitName(r.math_unit_id)),1),s("label",{class:"font-medium text-red-500 hover:text-red-600 cursor-pointer",onClick:l=>e.deleteUnitLesson(b)},"Delete",8,Re)]),s("p",ze,c(e.getLessonName(r.math_lesson_id)),1)]),He]),s("ul",Ee,[(n(!0),i(u,null,m(e.options.objectives.filter(l=>l.lesson_id==r.math_lesson_id),(l,rs)=>(n(),i("li",Fe,[s("div",Ze,[x(s("input",{id:l.id,type:"checkbox",value:l.id,"onUpdate:modelValue":S=>r.math_objective_id=S,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-gray-300 focus:ring-0"},null,8,Ye),[[B,r.math_objective_id]]),s("label",{for:l.id,class:"w-full py-3 ml-2 text-sm font-medium text-gray-900"},c(e.getObjectiveName(l.id)),9,qe)])]))),256))])])]))),256))])):(n(),i("div",Se,[Ce,e.objectives_not_found?(n(),i("div",Le,"No objectives found.")):f("",!0),e.loading.objectives?(n(),i("div",Ue,Te)):f("",!0)])),s("div",Ge,[s("div",Ie,[Je,s("div",Ke,[x(s("textarea",{class:"focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm border-gray-300",rows:"4","onUpdate:modelValue":o[5]||(o[5]=r=>e.form.comments=r)},null,512),[[M,e.form.comments]])])])]),s("div",Qe,[s("div",We,[Xe,s("div",es,[x(s("select",{name:"attendance_status",id:"attendance_status",class:y(["focus:ring-0 focus:border-indigo-300 flex-1 block w-full rounded-md sm:text-sm",e.$page.props.errors.attendance_status?"border-red-300":"border-gray-300"]),"onUpdate:modelValue":o[6]||(o[6]=r=>e.form.attendance_status=r),autocomplete:"off"},[(n(!0),i(u,null,m(e.$page.props.attendance_status,(r,b)=>(n(),i("option",{value:r.id},c(r.name),9,ss))),256))],2),[[T,e.form.attendance_status]])])])])])])]),footer:d(()=>[s("div",ts,[a(_,{buttonType:"gray",onClick:o[7]||(o[7]=r=>e.show_progress_report=!1)},{default:d(()=>[h("Cancel")]),_:1}),a(_,{onClick:e.updateProgressReport},{default:d(()=>[h("Save")]),_:1},8,["onClick"])])]),_:1},8,["showModal"])]),_:1})],64))}});export{fs as default};
