import{B as N}from"./Authenticated-89c7332d.js";import{H as P,L as M}from"./@inertiajs-2b766590.js";import{e as w}from"./vue-debounce-ed417ae1.js";import{_ as $}from"./Card-b75ae06b.js";import{_ as R}from"./DialogModal-6d0aecd6.js";import{_ as q}from"./Collapsible-08c65aae.js";import{_ as T,d as j,e as m,c as h,a as O,b as S}from"./TableRow-da22b5e6.js";import{_ as H}from"./TableCaption-43844f83.js";import{C as D}from"./lucide-vue-next-7b48dc26.js";import{x as c,v as r,u as d,O as t,F as g,b7 as b,q as u,U as i,y as o,N as E,I as C,t as F,J as _,B as U}from"./@vue-39dc9ff3.js";import"./ApplicationLogo-5cf6e77e.js";import"./radix-vue-a603168c.js";import"./@floating-ui-c05b1c1f.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-dbb80022.js";import"./axios-1779699b.js";import"./pusher-js-68b5c933.js";import"./@vueform-8fb84cf1.js";import"./@vuepic-a83e4355.js";import"./@babel-1b80a44a.js";import"./cropperjs-042b647f.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./v-calendar-e9930861.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-c14271ca.js";import"./@radix-icons-9ff33614.js";import"./lodash.isequal-0acc53e7.js";import"./vue-46d666fa.js";import"./lodash.clonedeep-12c784b4.js";import"./qs-45a3326f.js";import"./side-channel-401220dd.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-ac0241aa.js";import"./deepmerge-89e33937.js";import"./nprogress-87ee1729.js";const z={class:"grid grid-cols-1 2xl:grid-cols-3 gap-4"},J=o("span",{class:"text-red-500"},"*",-1),Y=o("span",{class:"text-red-500"},"*",-1),G=o("span",{class:"text-red-500"},"*",-1),K={class:"flex justify-between items-center"},Q=o("span",{class:"ml-1 hidden sm:block"},"Add",-1),W=o("div",{class:"p-3"}," No Record Found ",-1),X={class:"flex"},Z={class:"text-sm text-gray-700"},x={class:"font-semibold"},ee={class:"flex flex-col"},re={class:"text-sm text-gray-700 font-normal underline"},te={class:"font-semibold"},oe={class:"text-sm text-gray-700 italic"},ae={class:"font-semibold"},ie={class:"text-sm text-gray-700 italic"},se={class:"font-semibold"},le={class:"flex items-center justify-between"},de={class:"flex space-x-2 items-center"},ne={class:"flex space-x-2"},ue={class:"p-1 grid grid-cols-1 gap-4"},pe=o("span",{class:"text-red-500"},"*",-1),_e=o("span",{class:"text-red-500"},"*",-1),ce=o("span",{class:"text-red-500"},"*",-1),me=o("span",{class:"text-red-500"},"*",-1),fe=o("span",{class:"text-red-500"},"*",-1),he={class:"p-1 grid grid-cols-1 gap-4"},ve={key:0},ge=o("span",{class:"text-red-500"},"*",-1),be={key:1},ye=o("span",{class:"text-red-500"},"*",-1),Ve={components:{Head:P,Link:M,Table:T,TableBody:j,TableCaption:H,TableCell:m,TableHead:h,TableHeader:O,TableRow:S},data(){return{levels:Array.from({length:10},(l,e)=>({id:e+1,name:`Level ${e+1}`})),collapsible:{fee:!0,material:!1},form:{programme_name:"",programme_country:"",programme_info:[],progress_report_required:0,programme_active:!0},fee_form:{level:"",registration_fee:0,material_fee:0,class_type:"",fees:[]},show:{add_fee:!1,product_variations:!1,product_sub_variations:!1,add_tracking_status:!1},list:{products:[],product_variations:[],product_sub_variations:[],class_types_detail:[]},loading:{products:!1,product_variations:!1,product_sub_variations:!1},selected:{product:[],product_variation:[],product_sub_variation:[]},search_product_form:{product_id:"",product_variation_id:"",product_sub_variation_id:""},validation:{level:{required:!0,error:!1},registration_fee:{required:!0,error:!1},material_fee:{required:!0,error:!1},class_type:{required:!0,error:!1},product:{required:!1,error:!1},product_variation:{required:!1,error:!1},product_sub_variation:{required:!1,error:!1}}}},watch:{"fee_form.class_type":{handler(){this.list.class_types_detail=[],this.fee_form.fees=[],this.$page.props.class_types_detail.forEach(l=>{l.class_type_id==this.fee_form.class_type&&(this.list.class_types_detail.push(l),this.fee_form.fees.push({class_type_detail_id:l.id,value:1}))})},deep:!0},"search_product_form.product_id":{handler(){this.search_product_form.product_id&&(this.selected.product=this.list.products.find(l=>l.id===this.search_product_form.product_id),this.show.product_variations=this.selected.product.has_variation==1,this.show.product_sub_variations=this.selected.product.has_sub_variation==1,this.search_product_form.product_variation_id="",this.search_product_form.product_sub_variation_id="",this.selected.product_variation=[],this.selected.product_sub_variation=[])}},"search_product_form.product_variation_id":{handler(){this.search_product_form.product_variation_id&&(this.selected.product_variation=this.list.product_variations.find(l=>l.id===this.search_product_form.product_variation_id),this.search_product_form.product_sub_variation_id="",this.selected.product_sub_variation=[])}},"search_product_form.product_sub_variation_id":{handler(){this.search_product_form.product_sub_variation_id&&(this.selected.product_sub_variation=this.list.product_sub_variations.find(l=>l.id===this.search_product_form.product_sub_variation_id))}}},computed:{groupedItems(){return this.form.programme_info.reduce((l,e)=>(l[e.level]||(l[e.level]=[]),l[e.level].push(e),l),{})}},methods:{submit(){this.$inertia.post(route("programmes.store"),this.form)},showAddFee(){this.search_product_form.product_id="",this.search_product_form.product_variation_id="",this.search_product_form.product_sub_variation_id="",this.list.products=[],this.list.product_variations=[],this.list.product_sub_variations=[],this.selected.product=[],this.selected.product_variation=[],this.selected.product_sub_variation=[],this.show.product_variations=!1,this.show.product_sub_variations=!1,this.validation.product.error=!1,this.validation.product_variation.required=!1,this.validation.product_variation.error=!1,this.validation.product_sub_variation.required=!1,this.validation.product_sub_variation.error=!1,this.show.add_fee=!0},addFee(){if(this.validation.level.error=this.fee_form.level==="",this.validation.registration_fee.error=this.fee_form.registration_fee==="",this.validation.material_fee.error=this.fee_form.material_fee==="",this.validation.class_type.error=this.fee_form.class_type==="",this.validation.product.error=!!(this.validation.product.required&&!Object.keys(this.selected.product).length),this.validation.product_variation.required=this.selected.product.has_variation==1,this.validation.product_variation.error=this.selected.product.has_variation==1&&!Object.keys(this.selected.product_variation).length,this.validation.product_sub_variation.required=this.selected.product.has_sub_variation==1,this.validation.product_sub_variation.error=this.selected.product.has_sub_variation==1&&!Object.keys(this.selected.product_sub_variation).length,this.validation.product.required&&!Object.keys(this.selected.product).length||this.validation.product_variation.required&&!Object.keys(this.selected.product_variation).length||this.validation.product_sub_variation.required&&!Object.keys(this.selected.product_sub_variation).length||this.fee_form.level==""||this.fee_form.registration_fee===""||this.fee_form.material_fee===""||this.fee_form.class_type==""||this.fee_form.fees.length<1)return;const l=this.fee_form.fees;this.form.programme_info.push({level:this.fee_form.level,registration_fee:this.fee_form.registration_fee,material_fee:this.fee_form.material_fee,class_type:this.fee_form.class_type,fees:l,product:this.selected.product,product_variation:this.selected.product_variation,product_sub_variation:this.selected.product_sub_variation}),this.form.programme_info.sort((e,s)=>e.level-s.level),this.clearForm(),this.show.add_fee=!1},deleteLevel(l){this.form.programme_info.splice(l,1)},numbersOnly(l){l=l||window.event;var e=l.which?l.which:l.keyCode;if(e>31&&(e<48||e>57)&&e!==46)l.preventDefault();else return!0},clearForm(){this.fee_form.level="",this.fee_form.registration_fee=0,this.fee_form.material_fee=0,this.fee_form.class_type="",this.fee_form.fees=[]},findProducts:w(function(l){l&&(this.loading.products=!0,axios.get(route("products.find_products"),{params:{keyword:l}}).then(e=>{this.list.products=e.data,this.loading.products=!1}))},1e3),findProductVariations:w(function(l){this.loading.product_variations=!0,axios.get(route("products.find_product_variations"),{params:{product_id:this.search_product_form.product_id}}).then(e=>{this.list.product_variations=e.data,this.loading.product_variations=!1})},1e3),findProductSubVariations:w(function(l){this.loading.product_sub_variations=!0,axios.get(route("products.find_product_sub_variations"),{params:{product_variation_id:this.search_product_form.product_variation_id}}).then(e=>{this.list.product_sub_variations=e.data,this.loading.product_sub_variations=!1})},1e3)}},hr=Object.assign(Ve,{__name:"Create",setup(l){return(e,s)=>{const n=b("Label"),y=b("Input"),f=b("ComboBox"),v=b("Button"),A=b("Switch");return u(),c(g,null,[r(d(P),{title:"Programmes"}),r(N,null,{header:t(()=>[]),default:t(()=>[r($,null,{title:t(()=>[i("Programme Information")]),content:t(()=>[o("div",z,[o("div",null,[r(n,null,{default:t(()=>[i("Name"),J]),_:1}),r(y,{type:"text",error:e.$page.props.errors.programme_name,modelValue:e.form.programme_name,"onUpdate:modelValue":s[0]||(s[0]=a=>e.form.programme_name=a)},null,8,["error","modelValue"])]),o("div",null,[r(n,null,{default:t(()=>[i("Country"),Y]),_:1}),r(f,{items:e.$page.props.countries,"label-property":"name","value-property":"id",error:e.$page.props.errors.programme_country,modelValue:e.form.programme_country,"onUpdate:modelValue":s[1]||(s[1]=a=>e.form.programme_country=a),"select-placeholder":"Select Country","search-placeholder":"Search country..."},null,8,["items","error","modelValue"])]),o("div",null,[r(n,null,{default:t(()=>[i("Progress Report Required"),G]),_:1}),r(f,{items:[{id:0,name:"No"},{id:1,name:"Yes"}],"label-property":"name","value-property":"id",error:e.$page.props.errors.progress_report_required,modelValue:e.form.progress_report_required,"onUpdate:modelValue":s[2]||(s[2]=a=>e.form.progress_report_required=a),"select-placeholder":"Please Select","search-placeholder":"Search..."},null,8,["error","modelValue"])])])]),_:1}),r($,null,E({title:t(()=>[o("div",K,[i(" Programmes Levels & Fees "),r(v,{onClick:e.showAddFee},{default:t(()=>[r(d(D),{class:"h-4 w-4"}),Q]),_:1},8,["onClick"])])]),_:2},[e.form.programme_info.length?{name:"content",fn:t(()=>[(u(!0),c(g,null,C(e.groupedItems,(a,V)=>(u(),F(q,null,{trigger:t(()=>[i("Level "+_(V),1)]),content:t(()=>[r(d(T),{class:"px-4"},{default:t(()=>[r(d(O),{class:"bg-gray-100"},{default:t(()=>[r(d(S),null,{default:t(()=>[r(d(h),{class:"px-4"},{default:t(()=>[i("Class Type")]),_:1}),r(d(h),null,{default:t(()=>[i("Registration Fee")]),_:1}),r(d(h),null,{default:t(()=>[i("Material Fee")]),_:1}),r(d(h),null,{default:t(()=>[i("Monthly Fee")]),_:1}),r(d(h),null,{default:t(()=>[i("Material")]),_:1}),r(d(h),{class:"text-center"},{default:t(()=>[i("Action")]),_:1})]),_:1})]),_:1}),r(d(j),null,{default:t(()=>[a.length?U("",!0):(u(),F(d(S),{key:0},{default:t(()=>[r(d(m),{class:"text-center",colspan:"10"},{default:t(()=>[W]),_:1})]),_:1})),(u(!0),c(g,null,C(a,(p,L)=>(u(),F(d(S),null,{default:t(()=>[r(d(m),{class:"px-4"},{default:t(()=>[i(_(e.$page.props.class_types[a[L].class_type].name),1)]),_:2},1024),r(d(m),null,{default:t(()=>[i(_(p.registration_fee),1)]),_:2},1024),r(d(m),null,{default:t(()=>[i(_(p.material_fee),1)]),_:2},1024),r(d(m),null,{default:t(()=>[(u(!0),c(g,null,C(p.fees,k=>{var B;return u(),c("div",X,[o("p",Z,[i(_((B=e.$page.props.class_types_detail.find(I=>I.id===k.class_type_detail_id))==null?void 0:B.label)+" : ",1),o("span",x,_(k.value),1)])])}),256))]),_:2},1024),r(d(m),null,{default:t(()=>[o("div",ee,[o("p",re,[o("span",te,_(p.product.name),1)]),o("p",oe,[i("Variation : "),o("span",ae,_(p.product_variation.option_name?p.product_variation.option_name:"-"),1)]),o("p",ie,[i("Sub Variation : "),o("span",se,_(p.product_sub_variation.option_name?p.product_sub_variation.option_name:"-"),1)])])]),_:2},1024),r(d(m),{class:"text-center"},{default:t(()=>[r(v,{variant:"destructive",onClick:k=>e.deleteLevel(L)},{default:t(()=>[i("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),key:"0"}:void 0]),1024),r($,null,{content:t(()=>[o("div",le,[o("div",de,[r(n,null,{default:t(()=>[i("Active")]),_:1}),r(A,{modelValue:e.form.programme_active,"onUpdate:modelValue":s[3]||(s[3]=a=>e.form.programme_active=a)},null,8,["modelValue"])]),o("div",ne,[r(v,{variant:"outline",onClick:s[4]||(s[4]=a=>e.$inertia.get(e.route("programmes")))},{default:t(()=>[i("Cancel")]),_:1}),r(v,{onClick:e.submit},{default:t(()=>[i("Save")]),_:1},8,["onClick"])])])]),_:1}),r(R,{open:e.show.add_fee,"onUpdate:open":s[15]||(s[15]=a=>e.show.add_fee=a)},{title:t(()=>[i("Add Fee")]),content:t(()=>[r(q,{modelValue:e.collapsible.fee,"onUpdate:modelValue":s[9]||(s[9]=a=>e.collapsible.fee=a)},{trigger:t(()=>[i("Fee Information")]),content:t(()=>[o("div",ue,[o("div",null,[r(n,null,{default:t(()=>[i("Level"),pe]),_:1}),r(f,{items:e.levels,"label-property":"name","value-property":"id",error:e.validation.level.error,modelValue:e.fee_form.level,"onUpdate:modelValue":s[5]||(s[5]=a=>e.fee_form.level=a),"select-placeholder":"Select Level","search-placeholder":"Search level..."},null,8,["items","error","modelValue"])]),o("div",null,[r(n,null,{default:t(()=>[i("Registration Fee"),_e]),_:1}),r(y,{type:"number",error:e.validation.registration_fee.error,modelValue:e.fee_form.registration_fee,"onUpdate:modelValue":s[6]||(s[6]=a=>e.fee_form.registration_fee=a)},null,8,["error","modelValue"])]),o("div",null,[r(n,null,{default:t(()=>[i("Material Fee"),ce]),_:1}),r(y,{type:"number",error:e.validation.material_fee.error,modelValue:e.fee_form.material_fee,"onUpdate:modelValue":s[7]||(s[7]=a=>e.fee_form.material_fee=a)},null,8,["error","modelValue"])]),o("div",null,[r(n,null,{default:t(()=>[i("Class Type"),me]),_:1}),r(f,{items:Object.values(e.$page.props.class_types),"label-property":"name","value-property":"id",error:e.validation.class_type.error,modelValue:e.fee_form.class_type,"onUpdate:modelValue":s[8]||(s[8]=a=>e.fee_form.class_type=a),"select-placeholder":"Select Class Type","search-placeholder":"Search class type..."},null,8,["items","error","modelValue"])]),(u(!0),c(g,null,C(e.list.class_types_detail,(a,V)=>(u(),c("div",null,[r(n,null,{default:t(()=>[i(_(a.label),1),fe]),_:2},1024),r(y,{type:"number",min:"1",error:e.$page.props.errors.class_type_detail,modelValue:e.fee_form.fees[V].value,"onUpdate:modelValue":p=>e.fee_form.fees[V].value=p},null,8,["error","modelValue","onUpdate:modelValue"])]))),256))])]),_:1},8,["modelValue"]),r(q,{modelValue:e.collapsible.material,"onUpdate:modelValue":s[13]||(s[13]=a=>e.collapsible.material=a)},{trigger:t(()=>[i("Material Information")]),content:t(()=>[o("div",he,[o("div",null,[r(n,null,{default:t(()=>[i("Material")]),_:1}),r(f,{items:e.list.products,"label-property":"name","value-property":"id",error:e.validation.product.error,loading:e.loading.products,onSearch:e.findProducts,onSelect:e.findProductVariations,modelValue:e.search_product_form.product_id,"onUpdate:modelValue":s[10]||(s[10]=a=>e.search_product_form.product_id=a),"select-placeholder":"Select Material","search-placeholder":"Search material..."},null,8,["items","error","loading","onSearch","onSelect","modelValue"])]),e.show.product_variations?(u(),c("div",ve,[r(n,null,{default:t(()=>[i("Variation"),ge]),_:1}),r(f,{items:e.list.product_variations,"label-property":"option_name","value-property":"id",loading:e.loading.product_variations,error:e.validation.product_variation.error,onSelect:e.findProductSubVariations,modelValue:e.search_product_form.product_variation_id,"onUpdate:modelValue":s[11]||(s[11]=a=>e.search_product_form.product_variation_id=a),"select-placeholder":"Select Variation","search-placeholder":"Search variation..."},null,8,["items","loading","error","onSelect","modelValue"])])):U("",!0),e.show.product_sub_variations?(u(),c("div",be,[r(n,null,{default:t(()=>[i("Sub Variation"),ye]),_:1}),r(f,{items:e.list.product_sub_variations,"label-property":"option_name","value-property":"id",loading:e.loading.product_sub_variations,error:e.validation.product_sub_variation.error,modelValue:e.search_product_form.product_sub_variation_id,"onUpdate:modelValue":s[12]||(s[12]=a=>e.search_product_form.product_sub_variation_id=a),"select-placeholder":"Select Sub Variation","search-placeholder":"Search sub variation..."},null,8,["items","loading","error","modelValue"])])):U("",!0)])]),_:1},8,["modelValue"])]),footer:t(()=>[r(v,{variant:"outline",onClick:s[14]||(s[14]=a=>e.show.add_fee=!1)},{default:t(()=>[i("Cancel")]),_:1}),r(v,{onClick:e.addFee},{default:t(()=>[i("Add")]),_:1},8,["onClick"])]),_:1},8,["open"])]),_:1})],64)}}});export{hr as default};
