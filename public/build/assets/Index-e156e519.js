import{r as h,e as F,y as d,z as s,x as o,u as t,Q as n,G as I,F as _,J as S,C as g,t as m,q as M,K as T,W as i}from"./@vue-d42dd214.js";import{_ as H}from"./index-76325d83.js";import{_ as v}from"./app-7bb0ccaf.js";import{_ as K,a as V,b as q,c as D,d as E,e as G,f as j,g as y,h as Q}from"./index-f2c66993.js";import{u as U,d as N,e as J}from"./@inertiajs-7f289881.js";import{_ as W}from"./DeleteConfirmation-f84a4c95.js";import{m as R}from"./vue3-markdown-514caa18.js";import{B as A,C as X,T as Y,M as Z,P as ee,H as te,S as se,a as oe,U as re,L as ne,b as ae,c as ie,d as le,e as de}from"./lucide-vue-next-53796c49.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./axios-1779699b.js";import"./pusher-js-d90fcbf8.js";import"./@vueform-cd27a95b.js";import"./cropperjs-bffc402e.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-4b397a2a.js";import"./radix-vue-00e18109.js";import"./@floating-ui-61ac2ed2.js";import"./@internationalized-2f03b566.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-7b89e231.js";import"./@radix-icons-4975f794.js";import"./@vuepic-1824abb1.js";import"./@babel-1b80a44a.js";import"./lodash.isequal-23888b5c.js";import"./vue-671a4423.js";import"./lodash.clonedeep-15cd822c.js";import"./qs-78438f3a.js";import"./side-channel-52add6bf.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-1fdcb41b.js";import"./deepmerge-89e33937.js";import"./nprogress-b9cffc46.js";import"./DialogDescription-ca10c3ad.js";const me={class:"grid min-h-screen h-full w-full md:grid-cols-[220px_1fr] lg:grid-cols-[280px_1fr]"},ue={class:"hidden border-r border-zinc-700 bg-muted/40 md:block"},pe={class:"flex flex-col gap-2"},ce={class:"grid items-start px-2 text-sm font-medium lg:pl-2.5 text-zinc-950 fixed"},fe={class:"flex w-full h-14 items-center justify-center border-b border-zinc-700 px-4 lg:h-[60px] lg:px-6"},xe={href:"/",class:"flex items-center gap-2 font-semibold"},_e={class:"space-y-1"},ge=["onClickOnce"],he={class:"truncate w-52"},ve={class:"flex flex-col bg-zinc-900 text-white"},ye={class:"flex justify-between md:justify-end h-14 items-center gap-4 px-4 lg:h-[60px] lg:px-6 sticky top-0 bg-white"},we={class:"grid gap-2 text-lg font-medium"},be={href:"#",class:"flex items-center gap-2 text-lg font-semibold"},ze={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground"},ke={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl bg-muted px-3 py-2 text-foreground hover:text-foreground"},Ce={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground"},$e={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground"},Se={href:"#",class:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground"},Te={class:"flex flex-1 flex-col items-center justify-between gap-4 p-4 lg:gap-6 lg:p-6 max-h-svh overflow-hidden -mt-16 bg-white"},je={key:0,class:"flex items-start space-x-2"},Ne={key:1,class:"flex items-center justify-end space-x-2 ml-20"},Ae={class:"rounded-xl border bg-zinc-800 px-4 py-1.5"},Oe={class:"relative bottom-0 w-full max-w-3xl"},Pe={key:0,class:"flex justify-center px-3 pb-3 gap-2"},Le={class:"relative rounded-2xl bg-zinc-800 p-5 max-h-52"},Be={class:"absolute bottom-0 w-full px-5 py-3 pt-"},Fe={class:"flex items-center justify-between"},Nt={__name:"Index",setup(Ie){var z,k,C;const c=h(!1),w=h(null),f=h(null),u=U().props.value,b=u.chat_data?JSON.parse(u.chat_data.messages):"",l=N({chat_id:((z=u.chat_data)==null?void 0:z.id)||"",thread_id:((k=u.chat_data)==null?void 0:k.thread_id)||"",run_id:((C=u.chat_data)==null?void 0:C.run_id)||"",messages:""}),O=r=>{l.messages=r.target.innerText},P=async r=>{try{if(r.ctrlKey&&r.key==="Enter"){if(c.value||!l.messages)return;c.value=!0;const e=await axios.post(route("ai.store"),{form:l});l.messages="",w.value.innerText="",c.value=!1,console.log("Success:",e.data)}}catch(e){console.error("Error:",e)}},p=N({id:"",route_name:"",is_open:!1}),L=async r=>{p.route_name="ai.destroy",p.id=r,p.is_open=!0},B=async()=>{l.messages={role:"user",content:"Generate a random quiz."};try{const r=await axios.post(route("ai.generate_quiz"),{form:l});J.Inertia.get(route("chat.edit",r.data))}catch(r){console.log(r)}};return F(()=>{f.value&&(f.value.scrollTop=f.value.scrollHeight)}),(r,e)=>(m(),d(_,null,[s("div",me,[s("div",ue,[s("div",pe,[s("nav",ce,[s("div",fe,[s("a",xe,[o(t(A),{class:"h-6 w-6"}),e[3]||(e[3]=s("span",{class:""},"ALFA and Friends Assistant",-1))])]),o(t(v),{onClickOnce:e[0]||(e[0]=I(a=>r.$inertia.get(r.route("ai.index")),["prevent"])),class:"mt-3"},{default:n(()=>[o(t(X),{class:"h-5 w-5 mr-1"}),e[4]||(e[4]=s("span",{class:"font-medium"},"New Chat",-1))]),_:1}),e[5]||(e[5]=s("span",{class:"pl-1 mt-5 mb-2"},"Sessions",-1)),(m(!0),d(_,null,S(t(u).threads,a=>(m(),d("div",_e,[s("a",{onClickOnce:x=>a.id!=t(l).chat_id?r.$inertia.get(r.route("chat.edit",a.id)):"",class:M(["flex items-center gap-3 rounded-lg px-3 py-2 text-primary transition-all hover:bg-zinc-800 hover:text-white cursor-pointer",{"bg-zinc-800 text-white":a.id==t(l).chat_id}])},[s("span",he,T(a.name),1),o(t(Y),{class:"w-4 text-red-500",onClick:x=>L(a.id)},null,8,["onClick"])],42,ge)]))),256))])])]),s("div",ve,[s("header",ye,[o(t(q),null,{default:n(()=>[o(t(K),{"as-child":""},{default:n(()=>[o(t(v),{variant:"outline",size:"icon",class:"shrink-0 md:hidden bg-zinc-800"},{default:n(()=>[o(t(Z),{class:"h-5 w-5 dark:text-white"}),e[6]||(e[6]=s("span",{class:"sr-only"},"Toggle navigation menu",-1))]),_:1})]),_:1}),o(t(V),{side:"left",class:"flex flex-col"},{default:n(()=>[s("nav",we,[s("a",be,[o(t(ee),{class:"h-6 w-6"}),e[7]||(e[7]=s("span",{class:"sr-only"},"Acme Inc",-1))]),s("a",ze,[o(t(te),{class:"h-5 w-5"}),e[8]||(e[8]=i(" Dashboard "))]),s("a",ke,[o(t(se),{class:"h-5 w-5"}),e[10]||(e[10]=i(" Orders ")),o(t(H),{class:"ml-auto flex h-6 w-6 shrink-0 items-center justify-center rounded-full"},{default:n(()=>e[9]||(e[9]=[i(" 6 ")])),_:1})]),s("a",Ce,[o(t(oe),{class:"h-5 w-5"}),e[11]||(e[11]=i(" Products "))]),s("a",$e,[o(t(re),{class:"h-5 w-5"}),e[12]||(e[12]=i(" Customers "))]),s("a",Se,[o(t(ne),{class:"h-5 w-5"}),e[13]||(e[13]=i(" Analytics "))])])]),_:1})]),_:1}),o(t(Q),null,{default:n(()=>[o(t(D),{"as-child":""},{default:n(()=>[o(t(v),{variant:"secondary",size:"icon",class:"rounded-full"},{default:n(()=>[o(t(ae),{class:"h-5 w-5"}),e[14]||(e[14]=s("span",{class:"sr-only"},"Toggle user menu",-1))]),_:1})]),_:1}),o(t(E),{align:"end"},{default:n(()=>[o(t(G),null,{default:n(()=>e[15]||(e[15]=[i("My Account")])),_:1}),o(t(j)),o(t(y),null,{default:n(()=>e[16]||(e[16]=[i("Settings")])),_:1}),o(t(y),null,{default:n(()=>e[17]||(e[17]=[i("Support")])),_:1}),o(t(j)),o(t(y),null,{default:n(()=>e[18]||(e[18]=[i("Logout")])),_:1})]),_:1})]),_:1})]),s("main",Te,[s("div",{class:"flex flex-col w-full max-w-3xl px-3 gap-10 overflow-auto scroll max-h-[36rem] mt-16 py-2",ref_key:"chatbox",ref:f},[t(b)?(m(!0),d(_,{key:0},S(t(b).data.reverse(),a=>{var x,$;return m(),d(_,null,[a.role=="assistant"?(m(),d("span",je,[o(t(A),{class:"min-h-6 min-w-6 text-zinc-900"}),o(t(R),{class:"px-3",mode:"light",content:($=(x=a.content[0])==null?void 0:x.text)==null?void 0:$.value},null,8,["content"])])):g("",!0),a.role=="user"?(m(),d("span",Ne,[s("span",Ae,T(a.content[0].text.value),1)])):g("",!0)],64)}),256)):g("",!0)],512),s("div",Oe,[s("form",{onKeydown:P},[t(u).chat_data?g("",!0):(m(),d("div",Pe,[s("div",{class:"flex gap-1 items-center cursor-pointer bg-zinc-800 hover:bg-zinc-700 text-sm text-zinc-200 border rounded-xl px-4 py-2",onClickOnce:B},[o(t(ie),{class:"h-4 w-4"}),e[19]||(e[19]=s("span",null,"Generate a Quiz",-1))],32)])),s("div",Le,[s("div",{class:"max-h-28 overflow-auto border-none focus:outline-none focus:ring-none mb-12 px-2",contenteditable:"true",onInput:O,ref_key:"prompt_input",ref:w},null,544)]),s("div",Be,[s("div",Fe,[o(t(le),{class:"h-9 w-9 rounded-full cursor-pointer hover:bg-zinc-700 p-2"}),o(t(de),{class:"h-10 w-10 rounded-full cursor-pointer hover:bg-zinc-700 p-2",onClickOnce:e[1]||(e[1]=a=>c.value==!1?t(l).post(r.route("ai.store")):"")})])])],32)])])])]),o(W,{open:t(p).is_open,onClose:e[2]||(e[2]=a=>t(p).is_open=!1),routeName:t(p).route_name,id:t(p).id},{title:n(()=>e[20]||(e[20]=[i("Delete Chat")])),description:n(()=>e[21]||(e[21]=[i("Are you sure want to delete this chat?")])),_:1},8,["open","routeName","id"])],64))}};export{Nt as default};
