import{B as F}from"./Authenticated-4b373aa1.js";import{H as A,L as x}from"./@inertiajs-4f2e6820.js";import{a as h}from"./axios-1779699b.js";import{F as E}from"./fslightbox-vue-11a3071f.js";import{h as R}from"./moment-a9aaa855.js";import{T as L}from"./TimeAgo-eb6d8544.js";import{C as M}from"./compressorjs-dec42b9c.js";import{_ as B}from"./Card-6f904c3d.js";import{_ as I,a as O,b as j,c as k,d as N,e as w}from"./TableRow-534488f1.js";import{P as z}from"./Pagination-0c606634.js";import{_ as D}from"./index-51951363.js";import{_ as P}from"./DialogModal-7e62b3ae.js";import{_ as H}from"./DeleteConfirmation-70ac6595.js";import{a as q}from"./@radix-icons-de95313b.js";import{F as W,C as Y}from"./lucide-vue-next-bc441494.js";import{y as p,x as l,u as a,Q as i,F as C,be as V,bf as G,t as n,z as o,A as J,W as d,K as u,C as g,v as S,J as $}from"./@vue-66b8c761.js";import"./ApplicationLogo-f9b7ff8a.js";import"./radix-vue-aa72069b.js";import"./@floating-ui-b481b296.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-2ab2610c.js";import"./pusher-js-cb9cdec3.js";import"./@vueform-4cba997d.js";import"./@vuepic-d831316d.js";import"./@babel-1b80a44a.js";import"./cropperjs-c64556db.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-2d2eee44.js";import"./tailwind-merge-26e9d2f1.js";import"./@vueuse-b3927753.js";import"./lodash.isequal-802c39ac.js";import"./vue-978cb4c7.js";import"./lodash.clonedeep-6494eade.js";import"./qs-740c36f9.js";import"./side-channel-eec8ae42.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-d4161e53.js";import"./deepmerge-89e33937.js";import"./nprogress-5b8a22ad.js";import"./javascript-time-ago-55ed0321.js";import"./relative-time-format-ec7ee7be.js";const K={class:"flex items-center justify-between"},Q={class:"flex justify-between space-x-2"},X={class:"relative"},Z={key:0,class:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-5 gap-2"},ee={key:0},te={class:""},se={class:"flex flex-col max-w-md space-y-1"},oe={class:"text-xs text-slate-500"},re={class:"flex justify-center space-x-2"},le={class:"grid grid-cols-1 gap-4"},ie={class:"grid grid-cols-1 xl:grid-cols-2 gap-4"},de={key:0},ae={key:0,class:"w-full"},ne={class:"overflow-x-auto scrollbar pb-3"},me={class:"flex space-x-4"},pe={class:"relative w-28 h-28"},ue=["src"],fe={class:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg"},ye={class:"flex flex-col space-y-2"},he=["onClick"],_e=["onClick"],ge={class:"flex items-center justify-center w-full"},ce={class:"flex flex-col items-center justify-center py-6"},ve={class:"grid grid-cols-1 gap-4"},be={class:"grid grid-cols-1 xl:grid-cols-2 gap-4"},we={key:0},ke={key:0,class:"w-full"},Ce={class:"overflow-x-auto scrollbar pb-3"},Se={class:"flex space-x-4"},Ve={class:"relative w-28 h-28"},$e=["src"],Pe={class:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg"},Ue={class:"flex flex-col space-y-2"},je=["onClick"],Le=["onClick"],Me={class:"flex items-center justify-center w-full"},De={class:"grid grid-cols-1"},Ae={class:"divide-y px-4 text-slate-600"},Ee={class:"flex items-center justify-between py-2"},Te={class:"text-slate-800 text-sm font-medium"},Fe={key:1,class:"py-2 text-sm"},xe={class:"grid grid-cols-1"},Re={class:"divide-y px-4 text-slate-600"},Be={class:"flex items-center justify-between py-2"},Ie={class:"flex flex-col"},Oe={class:"text-slate-800 text-sm font-semibold"},Ne={class:"text-slate-800 text-xs font-medium italic"},ze={key:1,class:"py-2 text-sm"},U=window.URL||window.webkitURL,He=/^image\/\w+$/,qe={components:{Head:A,Link:x,FsLightbox:E,TimeAgo:L},props:{filter:Object},data(){return{confirmation:{is_open:!1,route_name:"",id:""},show_filters:!1,show_add_story_modal:!1,show_edit_story_modal:!1,show_likes_modal:!1,show_comments_modal:!1,likes:[],comments:[],lightbox:{open:!1,src:[]},add_story:{find:{class_types:"",levels:""},list:{class_types:[],levels:[]},students:[{select_all:"Select all",options:[]}],form:{programme_id:"",centre_id:"",caption:"",photos:[],students:[]}},edit_story:{find:{class_types:"",levels:""},list:{class_types:[],levels:[]},students:[{select_all:"Select all",options:[]}],form:{story_id:"",programme_id:"",centre_id:"",caption:"",photos:[],students:[],photos_to_delete:[]}},params:{search:this.filter.search?this.filter.search:"",centre_id:this.filter.centre_id?this.filter.centre_id:"",programme_id:this.filter.programme_id?this.filter.programme_id:""}}},watch:{"add_story.form.programme_id":{handler(){this.add_story.form.programme_id&&this.add_story.form.centre_id&&(this.add_story.find.class_types="",this.add_story.find.levels="",this.add_story.students[0].options=[],this.add_story.form.students=[],h.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id])).then(r=>{this.add_story.students[0].options=r.data}))}},"add_story.form.centre_id":{handler(){this.add_story.form.programme_id&&this.add_story.form.centre_id&&(this.add_story.find.class_types="",this.add_story.find.levels="",this.add_story.students[0].options=[],this.add_story.form.students=[],h.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id])).then(r=>{this.add_story.students[0].options=r.data}))}},"add_story.find.class_types":{handler(){this.add_story.find.levels="",this.add_story.list.levels=[],this.add_story.form.programme_id&&this.add_story.form.centre_id&&this.add_story.find.class_types?(this.add_story.students[0].options=[],this.add_story.form.students=[],h.get(route("stories.get_class_levels",[this.add_story.form.programme_id,this.add_story.find.class_types])).then(r=>{this.add_story.list.levels=r.data})):h.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id])).then(r=>{this.add_story.students[0].options=r.data})}},"add_story.find.levels":{handler(){this.add_story.students[0].options=[],this.add_story.form.students=[],this.add_story.form.programme_id&&this.add_story.form.centre_id&&this.add_story.find.levels?h.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id,this.add_story.find.levels])).then(r=>{this.add_story.students[0].options=r.data}):h.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id])).then(r=>{this.add_story.students[0].options=r.data})}},"edit_story.form.programme_id":{handler(){this.edit_story.form.programme_id&&this.edit_story.form.centre_id&&(this.edit_story.find.class_types="",this.edit_story.find.levels="",this.edit_story.students[0].options=[],this.edit_story.form.students=[],h.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(r=>{this.edit_story.students[0].options=r.data}))}},"edit_story.form.centre_id":{handler(){this.edit_story.form.programme_id&&this.edit_story.form.centre_id&&(this.edit_story.find.class_types="",this.edit_story.find.levels="",this.edit_story.students[0].options=[],this.edit_story.form.students=[],h.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(r=>{this.edit_story.students[0].options=r.data}))}},"edit_story.find.class_types":{handler(){this.edit_story.find.levels="",this.edit_story.list.levels=[],this.edit_story.form.programme_id&&this.edit_story.form.centre_id&&this.edit_story.find.class_types?(this.edit_story.students[0].options=[],this.edit_story.form.students=[],h.get(route("stories.get_class_levels",[this.edit_story.form.programme_id,this.edit_story.find.class_types])).then(r=>{this.edit_story.list.levels=r.data})):h.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(r=>{this.edit_story.students[0].options=r.data})}},"edit_story.find.levels":{handler(){this.edit_story.students[0].options=[],this.edit_story.form.students=[],this.edit_story.form.programme_id&&this.edit_story.form.centre_id&&this.edit_story.find.levels?h.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id,this.edit_story.find.levels])).then(r=>{this.edit_story.students[0].options=r.data}):h.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(r=>{this.edit_story.students[0].options=r.data})}}},methods:{openAddStoryModal(){this.show_add_story_modal=!0},openEditStoryModal(r){this.edit_story.form.story_id=this.$page.props.stories.data[r].story_id,this.edit_story.form.programme_id=this.$page.props.stories.data[r].story_programme_id,this.edit_story.form.centre_id=this.$page.props.stories.data[r].story_centre_id,this.edit_story.form.caption=this.$page.props.stories.data[r].story_title,this.edit_story.form.photos=this.$page.props.stories.data[r].images,h.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(t=>{this.edit_story.students[0].options=[],this.edit_story.students[0].options=t.data,this.edit_story.form.students=this.$page.props.stories.data[r].students.map(e=>e.student_id)}),this.show_edit_story_modal=!0},openLikesModal(r){this.likes=[],this.likes=this.$page.props.stories.data[r].likes,this.show_likes_modal=!0},openCommentsModal(r){this.comments=[],this.comments=this.$page.props.stories.data[r].comments,this.show_comments_modal=!0},changePhoto({target:r}){const{files:t}=r;t&&t.length>0&&Array.from(t).forEach(c=>{this.read(c,r).then(f=>{new M(c,{quality:.8,height:1e3,width:1e3,success:m=>{const v=U.createObjectURL(m),b=this.blobToFile(m,Date.now()+".jpg");this.add_story.form.photos.push({name:Date.now()+Math.floor(Math.random()*1e3),url:v,file:b})}})}).catch(this.alert)})},changePhotoEditStory({target:r}){const{files:t}=r;t&&t.length>0&&Array.from(t).forEach(c=>{this.read(c,r).then(f=>{new M(c,{quality:.8,height:1e3,width:1e3,success:m=>{const v=U.createObjectURL(m),b=this.blobToFile(m,Date.now()+".jpg");console.log(b),this.edit_story.form.photos.push({name:Date.now()+Math.floor(Math.random()*1e3),url:v,file:b})}})}).catch(this.alert)})},read(r,t){return new Promise((e,c)=>{if(!r){e();return}He.test(r.type)?U?e({loaded:!0,name:r.name,type:r.type,url:U.createObjectURL(r)}):alert("Your browser is not supported."):alert("Please select a valid image file.")})},removePhoto(r){this.add_story.form.photos.splice(r,1)},removePhotoEditStory(r){this.edit_story.form.photos[r].id&&this.edit_story.form.photos_to_delete.push(this.edit_story.form.photos[r].id),this.edit_story.form.photos.splice(r,1)},post(){(this.add_story.form.caption||this.add_story.form.photos.length)&&this.add_story.form.students.length>0&&this.$inertia.post(route("stories.store"),this.add_story.form,{preserveState:!1})},savePost(){(this.edit_story.form.caption||this.edit_story.form.photos.length)&&this.edit_story.form.students.length>0&&this.$inertia.post(route("stories.update"),this.edit_story.form,{preserveState:!1})},deleteStory(r){this.confirmation.route_name="stories.destroy",this.confirmation.id=r,this.confirmation.is_open=!0},search(){this.$inertia.get(this.route("stories"),this.params,{replace:!0,preserveState:!0})},viewImage(r){this.lightbox.src=r.url?[r.url]:[window.location.origin+"/storage/stories/"+r.image_filename],this.lightbox.open=!this.lightbox.open},blobToFile(r,t){return new File([r],t,{type:r.type})},showFilters(){this.show_filters=!this.show_filters}}},Yt=Object.assign(qe,{__name:"Index",setup(r){return(t,e)=>{const c=V("Input"),f=V("Button"),m=V("ComboBox"),v=V("Label"),b=V("Textarea"),T=G("debounce");return n(),p(C,null,[l(a(A),{title:"Stories"}),l(F,null,{header:i(()=>e[28]||(e[28]=[])),default:i(()=>[o("div",K,[o("div",Q,[o("div",X,[l(a(q),{class:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),J(l(c,{type:"text",placeholder:"Search",class:"w-full rounded-lg bg-background pl-8 md:w-[200px] lg:w-[336px]",modelValue:t.params.search,"onUpdate:modelValue":e[0]||(e[0]=s=>t.params.search=s)},null,8,["modelValue"]),[[T,t.search,"800ms"]])]),l(f,{class:"border border-slate-700 border-dashed bg-white text-slate-800 hover:bg-slate-50",onClick:e[1]||(e[1]=s=>t.showFilters())},{default:i(()=>[l(a(W),{class:"h-4 w-4"}),e[29]||(e[29]=o("span",{class:"ml-1 hidden sm:block"},"Filters",-1))]),_:1})]),l(f,{onClick:t.openAddStoryModal},{default:i(()=>[l(a(Y),{class:"h-4 w-4"}),e[30]||(e[30]=o("span",{class:"ml-1 hidden sm:block"},"New Story",-1))]),_:1},8,["onClick"])]),t.show_filters?(n(),p("div",Z,[l(m,{canClear:"",items:t.$page.props.allowed_centres,"label-property":"label","value-property":"ID",onSelect:t.search,modelValue:t.params.centre_id,"onUpdate:modelValue":e[2]||(e[2]=s=>t.params.centre_id=s),"select-placeholder":"Centres","search-placeholder":"Search centre..."},null,8,["items","onSelect","modelValue"]),l(m,{canClear:"",items:t.$page.props.programmes,"label-property":"name","value-property":"id",onSelect:t.search,modelValue:t.params.programme_id,"onUpdate:modelValue":e[3]||(e[3]=s=>t.params.programme_id=s),"select-placeholder":"Programmes","search-placeholder":"Search programme..."},{label:i(({item:s})=>[d(u(s.name)+" ("+u(s.country_name)+") ",1)]),"label-content":i(({selectedItem:s,selectedItems:y,multiple:_})=>[s?(n(),p("span",ee,u(s.name)+" ("+u(s.country_name)+")",1)):g("",!0)]),_:1},8,["items","onSelect","modelValue"]),o("div",te,[l(f,{onClick:e[4]||(e[4]=s=>t.$inertia.get(t.route("stories")))},{default:i(()=>e[31]||(e[31]=[d("Clear Search")])),_:1})])])):g("",!0),l(B,null,{content:i(()=>[l(a(I),null,{default:i(()=>[l(a(O),{class:"bg-gray-100"},{default:i(()=>[l(a(j),null,{default:i(()=>[l(a(k),null,{default:i(()=>e[32]||(e[32]=[d("#")])),_:1}),l(a(k),null,{default:i(()=>e[33]||(e[33]=[d("Title")])),_:1}),l(a(k),null,{default:i(()=>e[34]||(e[34]=[d("Date")])),_:1}),l(a(k),null,{default:i(()=>e[35]||(e[35]=[d("Reactions")])),_:1}),l(a(k),null,{default:i(()=>e[36]||(e[36]=[d("Comments")])),_:1}),l(a(k),{class:"text-center"},{default:i(()=>e[37]||(e[37]=[d("Action")])),_:1})]),_:1})]),_:1}),l(a(N),null,{default:i(()=>[t.$page.props.stories.data.length?g("",!0):(n(),S(a(j),{key:0},{default:i(()=>[l(a(w),{class:"text-center",colspan:"10"},{default:i(()=>e[38]||(e[38]=[o("div",{class:"p-3"}," No Record Found ",-1)])),_:1})]),_:1})),(n(!0),p(C,null,$(t.$page.props.stories.data,(s,y)=>(n(),S(a(j),null,{default:i(()=>[l(a(w),null,{default:i(()=>[d(u(t.$page.props.stories.from+y),1)]),_:2},1024),l(a(w),null,{default:i(()=>[o("div",se,[l(v,{class:"truncate",title:s.story_title},{default:i(()=>[d(u(s.story_title),1)]),_:2},1032,["title"]),o("div",oe,u(s.story_author_name),1)])]),_:2},1024),l(a(w),null,{default:i(()=>[l(v,null,{default:i(()=>[d(u(a(R)(s.story_date).format("DD MMM Y")),1)]),_:2},1024)]),_:2},1024),l(a(w),null,{default:i(()=>[l(a(D),{class:"cursor-pointer",onClick:_=>t.openLikesModal(y)},{default:i(()=>[o("span",null,u(s.likes.length)+" Reactions",1)]),_:2},1032,["onClick"])]),_:2},1024),l(a(w),null,{default:i(()=>[l(a(D),{class:"cursor-pointer",onClick:_=>t.openCommentsModal(y)},{default:i(()=>[o("span",null,u(s.comments.length)+" Comments",1)]),_:2},1032,["onClick"])]),_:2},1024),l(a(w),{class:"text-center"},{default:i(()=>[o("div",re,[t.$page.props.can.edit_stories?(n(),S(f,{key:0,variant:"outline",onClick:_=>t.openEditStoryModal(y)},{default:i(()=>e[39]||(e[39]=[d("Edit")])),_:2},1032,["onClick"])):g("",!0),t.$page.props.can.delete_stories?(n(),S(f,{key:1,variant:"destructive",onClick:_=>t.deleteStory(s.story_id)},{default:i(()=>e[40]||(e[40]=[d("Delete")])),_:2},1032,["onClick"])):g("",!0)])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),l(z,{page_data:t.$page.props.stories,params:t.params},null,8,["page_data","params"]),l(P,{open:t.show_add_story_modal,"onUpdate:open":e[13]||(e[13]=s=>t.show_add_story_modal=s),interactOutside:s=>{s.preventDefault(),t.lightbox.open=!1}},{title:i(()=>e[41]||(e[41]=[d("Add Story")])),content:i(()=>[o("div",le,[l(m,{items:t.$page.props.programmes,"label-property":"name","value-property":"id",modelValue:t.add_story.form.programme_id,"onUpdate:modelValue":e[5]||(e[5]=s=>t.add_story.form.programme_id=s),"select-placeholder":"Select Programme","search-placeholder":"Search programme..."},null,8,["items","modelValue"]),l(m,{items:t.$page.props.centres,"label-property":"label","value-property":"ID",modelValue:t.add_story.form.centre_id,"onUpdate:modelValue":e[6]||(e[6]=s=>t.add_story.form.centre_id=s),"select-placeholder":"Select Centre","search-placeholder":"Search centre..."},null,8,["items","modelValue"]),o("div",ie,[l(m,{canClear:"",items:t.$page.props.class_types,"label-property":"name","value-property":"id",modelValue:t.add_story.find.class_types,"onUpdate:modelValue":e[7]||(e[7]=s=>t.add_story.find.class_types=s),"select-placeholder":"Select Class Type (optional)","search-placeholder":"Search class type..."},null,8,["items","modelValue"]),l(m,{canClear:"",items:t.add_story.list.levels,"label-property":"level","value-property":"id",modelValue:t.add_story.find.levels,"onUpdate:modelValue":e[8]||(e[8]=s=>t.add_story.find.levels=s),"select-placeholder":"Select Class Type (optional)","search-placeholder":"Search programme..."},{label:i(({item:s})=>[d(" Level "+u(s.level),1)]),"label-content":i(({selectedItem:s,selectedItems:y,multiple:_})=>[s?(n(),p("span",de,"Level "+u(s.level),1)):g("",!0)]),_:1},8,["items","modelValue"])]),l(m,{multiple:"",items:t.add_story.students[0].options,"label-property":"name","value-property":"id",modelValue:t.add_story.form.students,"onUpdate:modelValue":e[9]||(e[9]=s=>t.add_story.form.students=s),"select-placeholder":"Select Programme","search-placeholder":"Search programme..."},null,8,["items","modelValue"]),l(b,{rows:"3",placeholder:"What's happening today?",modelValue:t.add_story.form.caption,"onUpdate:modelValue":e[10]||(e[10]=s=>t.add_story.form.caption=s)},null,8,["modelValue"]),t.add_story.form.photos.length?(n(),p("div",ae,[o("div",ne,[o("div",me,[(n(!0),p(C,null,$(t.add_story.form.photos,(s,y)=>(n(),p("div",{class:"relative",key:y},[o("div",pe,[o("img",{src:s.url,class:"w-full h-full rounded-lg"},null,8,ue),o("div",fe,[o("div",ye,[o("button",{class:"text-xs py-1 px-2 rounded text-indigo-500 font-semibold bg-white",onClick:_=>t.viewImage(s)}," View ",8,he),o("button",{class:"text-xs py-1 px-2 rounded text-red-500 font-semibold bg-white",onClick:_=>t.removePhoto(y)}," Delete ",8,_e)])])])]))),128))])])])):g("",!0),o("div",ge,[o("label",{for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-28 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",onChange:e[11]||(e[11]=(...s)=>t.changePhoto&&t.changePhoto(...s))},[o("div",ce,[e[43]||(e[43]=o("svg",{class:"w-8 h-8 mb-1 text-slate-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16"},[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})],-1)),e[44]||(e[44]=o("p",{class:"text-sm text-slate-500"},[o("span",{class:"font-medium"},"Click to upload")],-1)),l(v,{class:"text-xs text-center text-slate-500"},{default:i(()=>e[42]||(e[42]=[d("Hold "),o("strong",null,"Shift",-1),d(" or "),o("strong",null,"CTRL",-1),d(" and click on images to select multiple")])),_:1})]),e[45]||(e[45]=o("input",{id:"dropzone-file",type:"file",class:"hidden",multiple:""},null,-1))],32)])])]),footer:i(()=>[l(f,{variant:"outline",onClick:e[12]||(e[12]=s=>t.show_add_story_modal=!1)},{default:i(()=>e[46]||(e[46]=[d("Cancel")])),_:1}),l(f,{onClick:t.post},{default:i(()=>e[47]||(e[47]=[d("Post")])),_:1},8,["onClick"])]),_:1},8,["open","interactOutside"]),l(P,{open:t.show_edit_story_modal,"onUpdate:open":e[22]||(e[22]=s=>t.show_edit_story_modal=s),interactOutside:s=>{s.preventDefault(),t.lightbox.open=!1}},{title:i(()=>e[48]||(e[48]=[d("Edit Story")])),content:i(()=>[o("div",ve,[l(m,{items:t.$page.props.programmes,"label-property":"name","value-property":"id",modelValue:t.edit_story.form.programme_id,"onUpdate:modelValue":e[14]||(e[14]=s=>t.edit_story.form.programme_id=s),"select-placeholder":"Select Programme","search-placeholder":"Search programme..."},null,8,["items","modelValue"]),l(m,{items:t.$page.props.centres,"label-property":"label","value-property":"ID",modelValue:t.edit_story.form.centre_id,"onUpdate:modelValue":e[15]||(e[15]=s=>t.edit_story.form.centre_id=s),"select-placeholder":"Select Centre","search-placeholder":"Search centre..."},null,8,["items","modelValue"]),o("div",be,[l(m,{canClear:"",items:t.$page.props.class_types,"label-property":"name","value-property":"id",modelValue:t.edit_story.find.class_types,"onUpdate:modelValue":e[16]||(e[16]=s=>t.edit_story.find.class_types=s),"select-placeholder":"Select Class Type (optional)","search-placeholder":"Search class type..."},null,8,["items","modelValue"]),l(m,{canClear:"",items:t.edit_story.list.levels,"label-property":"level","value-property":"id",modelValue:t.edit_story.find.levels,"onUpdate:modelValue":e[17]||(e[17]=s=>t.edit_story.find.levels=s),"select-placeholder":"Select Class Type (optional)","search-placeholder":"Search programme..."},{label:i(({item:s})=>[d(" Level "+u(s.level),1)]),"label-content":i(({selectedItem:s,selectedItems:y,multiple:_})=>[s?(n(),p("span",we,"Level "+u(s.level),1)):g("",!0)]),_:1},8,["items","modelValue"])]),l(m,{multiple:"",items:t.edit_story.students[0].options,"label-property":"name","value-property":"id",modelValue:t.edit_story.form.students,"onUpdate:modelValue":e[18]||(e[18]=s=>t.edit_story.form.students=s),"select-placeholder":"Select Programme","search-placeholder":"Search programme..."},null,8,["items","modelValue"]),l(b,{rows:"3",placeholder:"What's happening today?",modelValue:t.edit_story.form.caption,"onUpdate:modelValue":e[19]||(e[19]=s=>t.edit_story.form.caption=s)},null,8,["modelValue"]),t.edit_story.form.photos.length?(n(),p("div",ke,[o("div",Ce,[o("div",Se,[(n(!0),p(C,null,$(t.edit_story.form.photos,(s,y)=>(n(),p("div",{class:"relative",key:y},[o("div",Ve,[o("img",{src:s.url?s.url:"/storage/stories/"+s.image_filename,class:"w-full h-full rounded-lg object-cover"},null,8,$e),o("div",Pe,[o("div",Ue,[o("button",{class:"text-xs py-1 px-2 rounded text-indigo-500 font-semibold bg-white",onClick:_=>t.viewImage(s)}," View ",8,je),o("button",{class:"text-xs py-1 px-2 rounded text-red-500 font-semibold bg-white",onClick:_=>t.removePhotoEditStory(y)}," Delete ",8,Le)])])])]))),128))])])])):g("",!0),o("div",Me,[o("label",{for:"dropzone-file-2",class:"flex flex-col items-center justify-center w-full h-28 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",onChange:e[20]||(e[20]=(...s)=>t.changePhotoEditStory&&t.changePhotoEditStory(...s))},e[49]||(e[49]=[o("div",{class:"flex flex-col items-center justify-center py-6"},[o("svg",{class:"w-8 h-8 mb-1 text-slate-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16"},[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})]),o("p",{class:"text-sm text-slate-500"},[o("span",{class:"font-medium"},"Click to upload")]),o("span",{class:"text-xs text-center text-slate-500"},[d("Hold "),o("strong",null,"Shift"),d(" or "),o("strong",null,"CTRL"),d(" and click on images to select multiple")])],-1),o("input",{id:"dropzone-file-2",type:"file",class:"hidden",multiple:""},null,-1)]),32)])])]),footer:i(()=>[l(f,{variant:"outline",onClick:e[21]||(e[21]=s=>t.show_edit_story_modal=!1)},{default:i(()=>e[50]||(e[50]=[d("Cancel")])),_:1}),l(f,{onClick:t.savePost},{default:i(()=>e[51]||(e[51]=[d("Save")])),_:1},8,["onClick"])]),_:1},8,["open","interactOutside"]),l(P,{open:t.show_likes_modal,"onUpdate:open":e[24]||(e[24]=s=>t.show_likes_modal=s),classProp:"max-w-sm"},{title:i(()=>e[52]||(e[52]=[d("Reactions")])),content:i(()=>[o("div",De,[o("div",Ae,[t.likes.length?(n(!0),p(C,{key:0},$(t.likes,s=>(n(),p("div",Ee,[o("div",Te,u(s.like_author_name),1),(n(),S(L,{class:"text-slate-400 text-xs",datetime:s.like_date,key:s.like_date},null,8,["datetime"]))]))),256)):(n(),p("div",Fe,e[53]||(e[53]=[o("span",null,"No one has liked this story yet.",-1)])))])])]),footer:i(()=>[l(f,{variant:"outline",onClick:e[23]||(e[23]=s=>t.show_likes_modal=!1)},{default:i(()=>e[54]||(e[54]=[d("Close")])),_:1})]),_:1},8,["open"]),l(P,{open:t.show_comments_modal,"onUpdate:open":e[26]||(e[26]=s=>t.show_comments_modal=s),classProp:"max-w-sm"},{title:i(()=>e[55]||(e[55]=[d("Reactions")])),content:i(()=>[o("div",xe,[o("div",Re,[t.comments.length?(n(!0),p(C,{key:0},$(t.comments,s=>(n(),p("div",Be,[o("div",Ie,[o("div",Oe,u(s.comment_user_name),1),o("blockquote",Ne,[o("p",null,u(s.comment),1)])]),(n(),S(L,{class:"text-slate-400 text-xs",datetime:s.created_at,key:s.created_at},null,8,["datetime"]))]))),256)):(n(),p("div",ze,e[56]||(e[56]=[o("span",null,"There are no comments on this story yet.",-1)])))])])]),footer:i(()=>[l(f,{variant:"outline",onClick:e[25]||(e[25]=s=>t.show_comments_modal=!1)},{default:i(()=>e[57]||(e[57]=[d("Close")])),_:1})]),_:1},8,["open"]),l(H,{open:t.confirmation.is_open,onClose:e[27]||(e[27]=s=>t.confirmation.is_open=!1),routeName:t.confirmation.route_name,id:t.confirmation.id},{title:i(()=>e[58]||(e[58]=[d("Delete Story")])),description:i(()=>e[59]||(e[59]=[d("Are you sure want to delete this story?")])),_:1},8,["open","routeName","id"]),l(a(E),{toggler:t.lightbox.open,sources:t.lightbox.src,exitFullscreenOnClose:!0},null,8,["toggler","sources"])]),_:1})],64)}}});export{Yt as default};
