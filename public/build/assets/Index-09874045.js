import{B as F}from"./Authenticated-214cc5de.js";import{H as E,L as x}from"./@inertiajs-2b766590.js";import{a as c}from"./axios-1779699b.js";import{F as T}from"./fslightbox-vue-13b1599c.js";import{h as R}from"./moment-a9aaa855.js";import{T as L}from"./TimeAgo-d5f13767.js";import{C as M}from"./compressorjs-dec42b9c.js";import{_ as B}from"./Card-e481dfab.js";import{_ as I,a as O,b as j,c as k,d as N,e as w}from"./TableRow-7ae90bc5.js";import{P as z}from"./Pagination-4f35e34d.js";import{_ as D}from"./index-a02644ab.js";import{_ as U}from"./DialogModal-5bb61319.js";import{_ as q}from"./DeleteConfirmation-49a1d6a2.js";import{a as H}from"./@radix-icons-9ff33614.js";import{F as Y,C as G}from"./lucide-vue-next-7b48dc26.js";import{x as p,v as i,u as d,O as l,F as C,b7 as V,b8 as W,q as n,y as o,z as J,U as a,J as _,B as y,t as S,I as $}from"./@vue-39dc9ff3.js";import"./ApplicationLogo-5cf6e77e.js";import"./radix-vue-a603168c.js";import"./@floating-ui-c05b1c1f.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-ef5f5861.js";import"./pusher-js-68b5c933.js";import"./@vueform-8fb84cf1.js";import"./@vuepic-a83e4355.js";import"./@babel-1b80a44a.js";import"./cropperjs-042b647f.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-e9930861.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-c14271ca.js";import"./lodash.isequal-0acc53e7.js";import"./vue-46d666fa.js";import"./lodash.clonedeep-12c784b4.js";import"./qs-45a3326f.js";import"./side-channel-401220dd.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-ac0241aa.js";import"./deepmerge-89e33937.js";import"./nprogress-87ee1729.js";import"./javascript-time-ago-55ed0321.js";import"./relative-time-format-ec7ee7be.js";const X={class:"flex items-center justify-between"},K={class:"flex justify-between space-x-2"},Q={class:"relative"},Z=o("span",{class:"ml-1 hidden sm:block"},"Filters",-1),ee=o("span",{class:"ml-1 hidden sm:block"},"New Story",-1),te={key:0,class:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-5 gap-2"},se={key:0},oe={class:""},re=o("div",{class:"p-3"}," No Record Found ",-1),ie={class:"flex flex-col max-w-md space-y-1"},le={class:"text-xs text-slate-500"},ae={class:"flex justify-center space-x-2"},de={class:"grid grid-cols-1 gap-4"},ne={class:"grid grid-cols-1 xl:grid-cols-2 gap-4"},me={key:0},pe={key:0,class:"w-full"},_e={class:"overflow-x-auto scrollbar pb-3"},he={class:"flex space-x-4"},ue={class:"relative w-28 h-28"},ce=["src"],fe={class:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg"},ye={class:"flex flex-col space-y-2"},ge=["onClick"],ve=["onClick"],be={class:"flex items-center justify-center w-full"},we={class:"flex flex-col items-center justify-center py-6"},ke=o("svg",{class:"w-8 h-8 mb-1 text-slate-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16"},[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})],-1),Ce=o("p",{class:"text-sm text-slate-500"},[o("span",{class:"font-medium"},"Click to upload")],-1),Se=o("strong",null,"Shift",-1),Ve=o("strong",null,"CTRL",-1),$e=o("input",{id:"dropzone-file",type:"file",class:"hidden",multiple:""},null,-1),Ue={class:"grid grid-cols-1 gap-4"},Pe={class:"grid grid-cols-1 xl:grid-cols-2 gap-4"},je={key:0},Le={key:0,class:"w-full"},Me={class:"overflow-x-auto scrollbar pb-3"},De={class:"flex space-x-4"},Ee={class:"relative w-28 h-28"},Te=["src"],Ae={class:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg"},Fe={class:"flex flex-col space-y-2"},xe=["onClick"],Re=["onClick"],Be={class:"flex items-center justify-center w-full"},Ie=o("div",{class:"flex flex-col items-center justify-center py-6"},[o("svg",{class:"w-8 h-8 mb-1 text-slate-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16"},[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})]),o("p",{class:"text-sm text-slate-500"},[o("span",{class:"font-medium"},"Click to upload")]),o("span",{class:"text-xs text-center text-slate-500"},[a("Hold "),o("strong",null,"Shift"),a(" or "),o("strong",null,"CTRL"),a(" and click on images to select multiple")])],-1),Oe=o("input",{id:"dropzone-file-2",type:"file",class:"hidden",multiple:""},null,-1),Ne=[Ie,Oe],ze={class:"grid grid-cols-1"},qe={class:"divide-y px-4 text-slate-600"},He={class:"flex items-center justify-between py-2"},Ye={class:"text-slate-800 text-sm font-medium"},Ge={key:1,class:"py-2 text-sm"},We=o("span",null,"No one has liked this story yet.",-1),Je=[We],Xe={class:"grid grid-cols-1"},Ke={class:"divide-y px-4 text-slate-600"},Qe={class:"flex items-center justify-between py-2"},Ze={class:"flex flex-col"},et={class:"text-slate-800 text-sm font-semibold"},tt={class:"text-slate-800 text-xs font-medium italic"},st={key:1,class:"py-2 text-sm"},ot=o("span",null,"There are no comments on this story yet.",-1),rt=[ot],P=window.URL||window.webkitURL,it=/^image\/\w+$/,lt={components:{Head:E,Link:x,FsLightbox:T,TimeAgo:L},props:{filter:Object},data(){return{confirmation:{is_open:!1,route_name:"",id:""},show_filters:!1,show_add_story_modal:!1,show_edit_story_modal:!1,show_likes_modal:!1,show_comments_modal:!1,likes:[],comments:[],lightbox:{open:!1,src:[]},add_story:{find:{class_types:"",levels:""},list:{class_types:[],levels:[]},students:[{select_all:"Select all",options:[]}],form:{programme_id:"",centre_id:"",caption:"",photos:[],students:[]}},edit_story:{find:{class_types:"",levels:""},list:{class_types:[],levels:[]},students:[{select_all:"Select all",options:[]}],form:{story_id:"",programme_id:"",centre_id:"",caption:"",photos:[],students:[],photos_to_delete:[]}},params:{search:this.filter.search?this.filter.search:"",centre_id:this.filter.centre_id?this.filter.centre_id:"",programme_id:this.filter.programme_id?this.filter.programme_id:""}}},watch:{"add_story.form.programme_id":{handler(){this.add_story.form.programme_id&&this.add_story.form.centre_id&&(this.add_story.find.class_types="",this.add_story.find.levels="",this.add_story.students[0].options=[],this.add_story.form.students=[],c.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id])).then(r=>{this.add_story.students[0].options=r.data}))}},"add_story.form.centre_id":{handler(){this.add_story.form.programme_id&&this.add_story.form.centre_id&&(this.add_story.find.class_types="",this.add_story.find.levels="",this.add_story.students[0].options=[],this.add_story.form.students=[],c.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id])).then(r=>{this.add_story.students[0].options=r.data}))}},"add_story.find.class_types":{handler(){this.add_story.find.levels="",this.add_story.list.levels=[],this.add_story.form.programme_id&&this.add_story.form.centre_id&&this.add_story.find.class_types?(this.add_story.students[0].options=[],this.add_story.form.students=[],c.get(route("stories.get_class_levels",[this.add_story.form.programme_id,this.add_story.find.class_types])).then(r=>{this.add_story.list.levels=r.data})):c.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id])).then(r=>{this.add_story.students[0].options=r.data})}},"add_story.find.levels":{handler(){this.add_story.students[0].options=[],this.add_story.form.students=[],this.add_story.form.programme_id&&this.add_story.form.centre_id&&this.add_story.find.levels?c.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id,this.add_story.find.levels])).then(r=>{this.add_story.students[0].options=r.data}):c.get(route("programmes.get_students",[this.add_story.form.programme_id,this.add_story.form.centre_id])).then(r=>{this.add_story.students[0].options=r.data})}},"edit_story.form.programme_id":{handler(){this.edit_story.form.programme_id&&this.edit_story.form.centre_id&&(this.edit_story.find.class_types="",this.edit_story.find.levels="",this.edit_story.students[0].options=[],this.edit_story.form.students=[],c.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(r=>{this.edit_story.students[0].options=r.data}))}},"edit_story.form.centre_id":{handler(){this.edit_story.form.programme_id&&this.edit_story.form.centre_id&&(this.edit_story.find.class_types="",this.edit_story.find.levels="",this.edit_story.students[0].options=[],this.edit_story.form.students=[],c.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(r=>{this.edit_story.students[0].options=r.data}))}},"edit_story.find.class_types":{handler(){this.edit_story.find.levels="",this.edit_story.list.levels=[],this.edit_story.form.programme_id&&this.edit_story.form.centre_id&&this.edit_story.find.class_types?(this.edit_story.students[0].options=[],this.edit_story.form.students=[],c.get(route("stories.get_class_levels",[this.edit_story.form.programme_id,this.edit_story.find.class_types])).then(r=>{this.edit_story.list.levels=r.data})):c.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(r=>{this.edit_story.students[0].options=r.data})}},"edit_story.find.levels":{handler(){this.edit_story.students[0].options=[],this.edit_story.form.students=[],this.edit_story.form.programme_id&&this.edit_story.form.centre_id&&this.edit_story.find.levels?c.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id,this.edit_story.find.levels])).then(r=>{this.edit_story.students[0].options=r.data}):c.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(r=>{this.edit_story.students[0].options=r.data})}}},methods:{openAddStoryModal(){this.show_add_story_modal=!0},openEditStoryModal(r){this.edit_story.form.story_id=this.$page.props.stories.data[r].story_id,this.edit_story.form.programme_id=this.$page.props.stories.data[r].story_programme_id,this.edit_story.form.centre_id=this.$page.props.stories.data[r].story_centre_id,this.edit_story.form.caption=this.$page.props.stories.data[r].story_title,this.edit_story.form.photos=this.$page.props.stories.data[r].images,c.get(route("programmes.get_students",[this.edit_story.form.programme_id,this.edit_story.form.centre_id])).then(e=>{this.edit_story.students[0].options=[],this.edit_story.students[0].options=e.data,this.edit_story.form.students=this.$page.props.stories.data[r].students.map(s=>s.student_id)}),this.show_edit_story_modal=!0},openLikesModal(r){this.likes=[],this.likes=this.$page.props.stories.data[r].likes,this.show_likes_modal=!0},openCommentsModal(r){this.comments=[],this.comments=this.$page.props.stories.data[r].comments,this.show_comments_modal=!0},changePhoto({target:r}){const{files:e}=r;e&&e.length>0&&Array.from(e).forEach(g=>{this.read(g,r).then(h=>{new M(g,{quality:.8,height:1e3,width:1e3,success:m=>{const v=P.createObjectURL(m),b=this.blobToFile(m,Date.now()+".jpg");this.add_story.form.photos.push({name:Date.now()+Math.floor(Math.random()*1e3),url:v,file:b})}})}).catch(this.alert)})},changePhotoEditStory({target:r}){const{files:e}=r;e&&e.length>0&&Array.from(e).forEach(g=>{this.read(g,r).then(h=>{new M(g,{quality:.8,height:1e3,width:1e3,success:m=>{const v=P.createObjectURL(m),b=this.blobToFile(m,Date.now()+".jpg");console.log(b),this.edit_story.form.photos.push({name:Date.now()+Math.floor(Math.random()*1e3),url:v,file:b})}})}).catch(this.alert)})},read(r,e){return new Promise((s,g)=>{if(!r){s();return}it.test(r.type)?P?s({loaded:!0,name:r.name,type:r.type,url:P.createObjectURL(r)}):alert("Your browser is not supported."):alert("Please select a valid image file.")})},removePhoto(r){this.add_story.form.photos.splice(r,1)},removePhotoEditStory(r){this.edit_story.form.photos[r].id&&this.edit_story.form.photos_to_delete.push(this.edit_story.form.photos[r].id),this.edit_story.form.photos.splice(r,1)},post(){(this.add_story.form.caption||this.add_story.form.photos.length)&&this.add_story.form.students.length>0&&this.$inertia.post(route("stories.store"),this.add_story.form,{preserveState:!1})},savePost(){(this.edit_story.form.caption||this.edit_story.form.photos.length)&&this.edit_story.form.students.length>0&&this.$inertia.post(route("stories.update"),this.edit_story.form,{preserveState:!1})},deleteStory(r){this.confirmation.route_name="stories.destroy",this.confirmation.id=r,this.confirmation.is_open=!0},search(){this.$inertia.get(this.route("stories"),this.params,{replace:!0,preserveState:!0})},viewImage(r){this.lightbox.src=r.url?[r.url]:[window.location.origin+"/storage/stories/"+r.image_filename],this.lightbox.open=!this.lightbox.open},blobToFile(r,e){return new File([r],e,{type:r.type})},showFilters(){this.show_filters=!this.show_filters}}},ds=Object.assign(lt,{__name:"Index",setup(r){return(e,s)=>{const g=V("Input"),h=V("Button"),m=V("ComboBox"),v=V("Label"),b=V("Textarea"),A=W("debounce");return n(),p(C,null,[i(d(E),{title:"Stories"}),i(F,null,{header:l(()=>[]),default:l(()=>[o("div",X,[o("div",K,[o("div",Q,[i(d(H),{class:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),J(i(g,{type:"text",placeholder:"Search",class:"w-full rounded-lg bg-background pl-8 md:w-[200px] lg:w-[336px]",modelValue:e.params.search,"onUpdate:modelValue":s[0]||(s[0]=t=>e.params.search=t)},null,8,["modelValue"]),[[A,e.search,"800ms"]])]),i(h,{class:"border border-slate-700 border-dashed bg-white text-slate-800 hover:bg-slate-50",onClick:s[1]||(s[1]=t=>e.showFilters())},{default:l(()=>[i(d(Y),{class:"h-4 w-4"}),Z]),_:1})]),i(h,{onClick:e.openAddStoryModal},{default:l(()=>[i(d(G),{class:"h-4 w-4"}),ee]),_:1},8,["onClick"])]),e.show_filters?(n(),p("div",te,[i(m,{canClear:"",items:e.$page.props.allowed_centres,"label-property":"label","value-property":"ID",onSelect:e.search,modelValue:e.params.centre_id,"onUpdate:modelValue":s[2]||(s[2]=t=>e.params.centre_id=t),"select-placeholder":"Centres","search-placeholder":"Search centre..."},null,8,["items","onSelect","modelValue"]),i(m,{canClear:"",items:e.$page.props.programmes,"label-property":"name","value-property":"id",onSelect:e.search,modelValue:e.params.programme_id,"onUpdate:modelValue":s[3]||(s[3]=t=>e.params.programme_id=t),"select-placeholder":"Programmes","search-placeholder":"Search programme..."},{label:l(({item:t})=>[a(_(t.name)+" ("+_(t.country_name)+") ",1)]),"label-content":l(({selectedItem:t,selectedItems:u,multiple:f})=>[t?(n(),p("span",se,_(t.name)+" ("+_(t.country_name)+")",1)):y("",!0)]),_:1},8,["items","onSelect","modelValue"]),o("div",oe,[i(h,{onClick:s[4]||(s[4]=t=>e.$inertia.get(e.route("stories")))},{default:l(()=>[a("Clear Search")]),_:1})])])):y("",!0),i(B,null,{content:l(()=>[i(d(I),null,{default:l(()=>[i(d(O),{class:"bg-gray-100"},{default:l(()=>[i(d(j),null,{default:l(()=>[i(d(k),null,{default:l(()=>[a("#")]),_:1}),i(d(k),null,{default:l(()=>[a("Title")]),_:1}),i(d(k),null,{default:l(()=>[a("Date")]),_:1}),i(d(k),null,{default:l(()=>[a("Reactions")]),_:1}),i(d(k),null,{default:l(()=>[a("Comments")]),_:1}),i(d(k),{class:"text-center"},{default:l(()=>[a("Action")]),_:1})]),_:1})]),_:1}),i(d(N),null,{default:l(()=>[e.$page.props.stories.data.length?y("",!0):(n(),S(d(j),{key:0},{default:l(()=>[i(d(w),{class:"text-center",colspan:"10"},{default:l(()=>[re]),_:1})]),_:1})),(n(!0),p(C,null,$(e.$page.props.stories.data,(t,u)=>(n(),S(d(j),null,{default:l(()=>[i(d(w),null,{default:l(()=>[a(_(e.$page.props.stories.from+u),1)]),_:2},1024),i(d(w),null,{default:l(()=>[o("div",ie,[i(v,{class:"truncate",title:t.story_title},{default:l(()=>[a(_(t.story_title),1)]),_:2},1032,["title"]),o("div",le,_(t.story_author_name),1)])]),_:2},1024),i(d(w),null,{default:l(()=>[i(v,null,{default:l(()=>[a(_(d(R)(t.story_date).format("DD MMM Y")),1)]),_:2},1024)]),_:2},1024),i(d(w),null,{default:l(()=>[i(d(D),{class:"cursor-pointer",onClick:f=>e.openLikesModal(u)},{default:l(()=>[o("span",null,_(t.likes.length)+" Reactions",1)]),_:2},1032,["onClick"])]),_:2},1024),i(d(w),null,{default:l(()=>[i(d(D),{class:"cursor-pointer",onClick:f=>e.openCommentsModal(u)},{default:l(()=>[o("span",null,_(t.comments.length)+" Comments",1)]),_:2},1032,["onClick"])]),_:2},1024),i(d(w),{class:"text-center"},{default:l(()=>[o("div",ae,[e.$page.props.can.edit_stories?(n(),S(h,{key:0,variant:"outline",onClick:f=>e.openEditStoryModal(u)},{default:l(()=>[a("Edit")]),_:2},1032,["onClick"])):y("",!0),e.$page.props.can.delete_stories?(n(),S(h,{key:1,variant:"destructive",onClick:f=>e.deleteStory(t.story_id)},{default:l(()=>[a("Delete")]),_:2},1032,["onClick"])):y("",!0)])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),i(z,{page_data:e.$page.props.stories,params:e.params},null,8,["page_data","params"]),i(U,{open:e.show_add_story_modal,"onUpdate:open":s[13]||(s[13]=t=>e.show_add_story_modal=t),interactOutside:t=>{t.preventDefault(),e.lightbox.open=!1}},{title:l(()=>[a("Add Story")]),content:l(()=>[o("div",de,[i(m,{items:e.$page.props.programmes,"label-property":"name","value-property":"id",modelValue:e.add_story.form.programme_id,"onUpdate:modelValue":s[5]||(s[5]=t=>e.add_story.form.programme_id=t),"select-placeholder":"Select Programme","search-placeholder":"Search programme..."},null,8,["items","modelValue"]),i(m,{items:e.$page.props.centres,"label-property":"label","value-property":"ID",modelValue:e.add_story.form.centre_id,"onUpdate:modelValue":s[6]||(s[6]=t=>e.add_story.form.centre_id=t),"select-placeholder":"Select Centre","search-placeholder":"Search centre..."},null,8,["items","modelValue"]),o("div",ne,[i(m,{canClear:"",items:e.$page.props.class_types,"label-property":"name","value-property":"id",modelValue:e.add_story.find.class_types,"onUpdate:modelValue":s[7]||(s[7]=t=>e.add_story.find.class_types=t),"select-placeholder":"Select Class Type (optional)","search-placeholder":"Search class type..."},null,8,["items","modelValue"]),i(m,{canClear:"",items:e.add_story.list.levels,"label-property":"level","value-property":"id",modelValue:e.add_story.find.levels,"onUpdate:modelValue":s[8]||(s[8]=t=>e.add_story.find.levels=t),"select-placeholder":"Select Class Type (optional)","search-placeholder":"Search programme..."},{label:l(({item:t})=>[a(" Level "+_(t.level),1)]),"label-content":l(({selectedItem:t,selectedItems:u,multiple:f})=>[t?(n(),p("span",me,"Level "+_(t.level),1)):y("",!0)]),_:1},8,["items","modelValue"])]),i(m,{multiple:"",items:e.add_story.students[0].options,"label-property":"name","value-property":"id",modelValue:e.add_story.form.students,"onUpdate:modelValue":s[9]||(s[9]=t=>e.add_story.form.students=t),"select-placeholder":"Select Programme","search-placeholder":"Search programme..."},null,8,["items","modelValue"]),i(b,{rows:"3",placeholder:"What's happening today?",modelValue:e.add_story.form.caption,"onUpdate:modelValue":s[10]||(s[10]=t=>e.add_story.form.caption=t)},null,8,["modelValue"]),e.add_story.form.photos.length?(n(),p("div",pe,[o("div",_e,[o("div",he,[(n(!0),p(C,null,$(e.add_story.form.photos,(t,u)=>(n(),p("div",{class:"relative",key:u},[o("div",ue,[o("img",{src:t.url,class:"w-full h-full rounded-lg"},null,8,ce),o("div",fe,[o("div",ye,[o("button",{class:"text-xs py-1 px-2 rounded text-indigo-500 font-semibold bg-white",onClick:f=>e.viewImage(t)}," View ",8,ge),o("button",{class:"text-xs py-1 px-2 rounded text-red-500 font-semibold bg-white",onClick:f=>e.removePhoto(u)}," Delete ",8,ve)])])])]))),128))])])])):y("",!0),o("div",be,[o("label",{for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-28 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",onChange:s[11]||(s[11]=(...t)=>e.changePhoto&&e.changePhoto(...t))},[o("div",we,[ke,Ce,i(v,{class:"text-xs text-center text-slate-500"},{default:l(()=>[a("Hold "),Se,a(" or "),Ve,a(" and click on images to select multiple")]),_:1})]),$e],32)])])]),footer:l(()=>[i(h,{variant:"outline",onClick:s[12]||(s[12]=t=>e.show_add_story_modal=!1)},{default:l(()=>[a("Cancel")]),_:1}),i(h,{onClick:e.post},{default:l(()=>[a("Post")]),_:1},8,["onClick"])]),_:1},8,["open","interactOutside"]),i(U,{open:e.show_edit_story_modal,"onUpdate:open":s[22]||(s[22]=t=>e.show_edit_story_modal=t),interactOutside:t=>{t.preventDefault(),e.lightbox.open=!1}},{title:l(()=>[a("Edit Story")]),content:l(()=>[o("div",Ue,[i(m,{items:e.$page.props.programmes,"label-property":"name","value-property":"id",modelValue:e.edit_story.form.programme_id,"onUpdate:modelValue":s[14]||(s[14]=t=>e.edit_story.form.programme_id=t),"select-placeholder":"Select Programme","search-placeholder":"Search programme..."},null,8,["items","modelValue"]),i(m,{items:e.$page.props.centres,"label-property":"label","value-property":"ID",modelValue:e.edit_story.form.centre_id,"onUpdate:modelValue":s[15]||(s[15]=t=>e.edit_story.form.centre_id=t),"select-placeholder":"Select Centre","search-placeholder":"Search centre..."},null,8,["items","modelValue"]),o("div",Pe,[i(m,{canClear:"",items:e.$page.props.class_types,"label-property":"name","value-property":"id",modelValue:e.edit_story.find.class_types,"onUpdate:modelValue":s[16]||(s[16]=t=>e.edit_story.find.class_types=t),"select-placeholder":"Select Class Type (optional)","search-placeholder":"Search class type..."},null,8,["items","modelValue"]),i(m,{canClear:"",items:e.edit_story.list.levels,"label-property":"level","value-property":"id",modelValue:e.edit_story.find.levels,"onUpdate:modelValue":s[17]||(s[17]=t=>e.edit_story.find.levels=t),"select-placeholder":"Select Class Type (optional)","search-placeholder":"Search programme..."},{label:l(({item:t})=>[a(" Level "+_(t.level),1)]),"label-content":l(({selectedItem:t,selectedItems:u,multiple:f})=>[t?(n(),p("span",je,"Level "+_(t.level),1)):y("",!0)]),_:1},8,["items","modelValue"])]),i(m,{multiple:"",items:e.edit_story.students[0].options,"label-property":"name","value-property":"id",modelValue:e.edit_story.form.students,"onUpdate:modelValue":s[18]||(s[18]=t=>e.edit_story.form.students=t),"select-placeholder":"Select Programme","search-placeholder":"Search programme..."},null,8,["items","modelValue"]),i(b,{rows:"3",placeholder:"What's happening today?",modelValue:e.edit_story.form.caption,"onUpdate:modelValue":s[19]||(s[19]=t=>e.edit_story.form.caption=t)},null,8,["modelValue"]),e.edit_story.form.photos.length?(n(),p("div",Le,[o("div",Me,[o("div",De,[(n(!0),p(C,null,$(e.edit_story.form.photos,(t,u)=>(n(),p("div",{class:"relative",key:u},[o("div",Ee,[o("img",{src:t.url?t.url:"/storage/stories/"+t.image_filename,class:"w-full h-full rounded-lg object-cover"},null,8,Te),o("div",Ae,[o("div",Fe,[o("button",{class:"text-xs py-1 px-2 rounded text-indigo-500 font-semibold bg-white",onClick:f=>e.viewImage(t)}," View ",8,xe),o("button",{class:"text-xs py-1 px-2 rounded text-red-500 font-semibold bg-white",onClick:f=>e.removePhotoEditStory(u)}," Delete ",8,Re)])])])]))),128))])])])):y("",!0),o("div",Be,[o("label",{for:"dropzone-file-2",class:"flex flex-col items-center justify-center w-full h-28 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",onChange:s[20]||(s[20]=(...t)=>e.changePhotoEditStory&&e.changePhotoEditStory(...t))},Ne,32)])])]),footer:l(()=>[i(h,{variant:"outline",onClick:s[21]||(s[21]=t=>e.show_edit_story_modal=!1)},{default:l(()=>[a("Cancel")]),_:1}),i(h,{onClick:e.savePost},{default:l(()=>[a("Save")]),_:1},8,["onClick"])]),_:1},8,["open","interactOutside"]),i(U,{open:e.show_likes_modal,"onUpdate:open":s[24]||(s[24]=t=>e.show_likes_modal=t),classProp:"max-w-sm"},{title:l(()=>[a("Reactions")]),content:l(()=>[o("div",ze,[o("div",qe,[e.likes.length?(n(!0),p(C,{key:0},$(e.likes,t=>(n(),p("div",He,[o("div",Ye,_(t.like_author_name),1),(n(),S(L,{class:"text-slate-400 text-xs",datetime:t.like_date,key:t.like_date},null,8,["datetime"]))]))),256)):(n(),p("div",Ge,Je))])])]),footer:l(()=>[i(h,{variant:"outline",onClick:s[23]||(s[23]=t=>e.show_likes_modal=!1)},{default:l(()=>[a("Close")]),_:1})]),_:1},8,["open"]),i(U,{open:e.show_comments_modal,"onUpdate:open":s[26]||(s[26]=t=>e.show_comments_modal=t),classProp:"max-w-sm"},{title:l(()=>[a("Reactions")]),content:l(()=>[o("div",Xe,[o("div",Ke,[e.comments.length?(n(!0),p(C,{key:0},$(e.comments,t=>(n(),p("div",Qe,[o("div",Ze,[o("div",et,_(t.comment_user_name),1),o("blockquote",tt,[o("p",null,_(t.comment),1)])]),(n(),S(L,{class:"text-slate-400 text-xs",datetime:t.created_at,key:t.created_at},null,8,["datetime"]))]))),256)):(n(),p("div",st,rt))])])]),footer:l(()=>[i(h,{variant:"outline",onClick:s[25]||(s[25]=t=>e.show_comments_modal=!1)},{default:l(()=>[a("Close")]),_:1})]),_:1},8,["open"]),i(q,{open:e.confirmation.is_open,onClose:s[27]||(s[27]=t=>e.confirmation.is_open=!1),routeName:e.confirmation.route_name,id:e.confirmation.id},{title:l(()=>[a("Delete Story")]),description:l(()=>[a("Are you sure want to delete this story?")]),_:1},8,["open","routeName","id"]),i(d(T),{toggler:e.lightbox.open,sources:e.lightbox.src,exitFullscreenOnClose:!0},null,8,["toggler","sources"])]),_:1})],64)}}});export{ds as default};
