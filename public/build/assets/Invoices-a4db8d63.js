import{_ as w}from"./Authenticated-68529a5f.js";import{o as i,c as l,a as p,u as d,d as e,t as n,w as m,F as g,b as x,H as y,n as c,q as u,e as k,g as $}from"./app-36364665.js";import{s as _}from"./simplebar.min-083fb612.js";import{h as f}from"./moment-a9aaa855.js";import"./XIcon-435dee85.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./transition-97f663d9.js";import"./keyboard-6cd9e820.js";import"./use-resolve-button-type-3c34a596.js";import"./menu-b4cda8d6.js";const D={class:"fixed w-full flex justify-center top-[4rem] md:top-[10rem] font-extrabold bg-white border border-gray-300 py-3 z-20"},F={class:"max-w-xl mx-auto border shadow bg-white rounded-lg px-4 mt-14"},C={class:"flex justify-evenly sm:justify-center space-x-8 md:space-x-10 pt-3 pb-4 font-medium"},N=e("img",{src:"/images/parents/stories.png",class:"w-10 h-10",alt:""},null,-1),I=e("span",{class:"text-sm"},"Stories",-1),M=[N,I],S=e("img",{src:"/images/parents/progress_report.png",class:"w-10 h-10",alt:""},null,-1),j=e("span",{class:"text-sm"},"Progress Report",-1),V=[S,j],z=e("img",{src:"/images/parents/fee_invoice.png",class:"w-10 h-10",alt:""},null,-1),B=e("span",{class:"text-sm"},"Invoices",-1),E=[z,B],H={class:"max-w-xl mx-auto mt-10"},L={key:0,class:"flex items-center space-y-3"},O=e("h2",{class:"text-lg md:text-xl mx-1 font-extrabold"},"Invoices",-1),P=[O],R={class:"mt-3"},U={class:"bg-white shadow rounded-lg border"},A={class:"divide-y divide-slate-200 dark:divide-zink-500 px-6 py-4"},J={class:"flex items-center gap-3 py-2 first:pt-0 last:pb-0"},T={class:"grow"},Y={class:"font-semibold text-sm"},q={class:"text-slate-500 text-sm font-medium"},G={class:"text-slate-500 text-sm font-medium"},K={class:"text-slate-500 text-sm font-medium"},Q={class:"text-sm font-medium"},W={class:"shrink-0"},X=["href"],Z=["onClick"],ee={components:{simplebar:_},data(){return{open_modal:!1,generating:[],invoice_data:{parent_name:"",parent_address:"No 27, Jalan Kap Empat, 17/17D, Seksyen 17, Shah Alam",invoice_number:"",invoice_items:[],date_issued:"",due_date:"",total_amount:""}}},methods:{viewInvoice(a,t){this.generating[t]||(this.generating[t]=!0,x.get(route("fee.invoices.generate"),{responseType:"blob",params:{invoice_id:a}}).then(o=>{const s=new Blob([o.data],{type:"application/pdf"}),r=URL.createObjectURL(s);window.open(r,"_blank"),this.generating[t]=!1}).catch(o=>{console.error("Error fetching PDF:",o),this.generating[t]=!1}))},totalFee(a){let t=0;const o=JSON.parse(a);for(const s of o){const r=parseFloat(s.programme_fee),h=parseFloat(s.programme_fee_discount),b=parseFloat(s.material_fee),v=parseFloat(s.material_fee_discount);t+=r-h,s.include_material_fee&&(t+=b-v)}return t},pay(a){window.location.href="https://www.billplz-sandbox.com/bills/"+a}},mounted(){this.$page.props.invoices.forEach(a=>{this.generating.push(!1)})}},ce=Object.assign(ee,{__name:"Invoices",setup(a){return(t,o)=>(i(),l(g,null,[p(d(y),{title:"Home"}),e("div",D,[e("span",null,n(t.$page.props.session_data.current_active_programme.name),1)]),p(w,null,{default:m(()=>[e("div",F,[p(d(_),{"data-simplebar-auto-hide":"true"},{default:m(()=>[e("div",C,[e("div",{class:c(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.stories")?"font-extrabold":""]),onClick:o[0]||(o[0]=s=>t.$inertia.get(t.route("parent.stories",t.$page.props.session_data.current_active_programme.encrypted_id)))},M,2),e("div",{class:c(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.progress_reports")?"font-extrabold":""]),onClick:o[1]||(o[1]=s=>t.$inertia.get(t.route("parent.progress_reports")))},V,2),e("div",{class:c(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.invoices")?"font-extrabold":""]),onClick:o[2]||(o[2]=s=>t.$inertia.get(t.route("parent.invoices")))},E,2)])]),_:1})]),e("div",H,[t.$page.props.invoices?(i(),l("div",L,P)):u("",!0),e("div",R,[e("div",U,[p(d(_),{"data-simplebar-auto-hide":"true",class:"max-h-screen"},{default:m(()=>[e("ul",A,[(i(!0),l(g,null,k(t.$page.props.invoices,(s,r)=>(i(),l("li",J,[e("div",T,[e("h6",Y,"Invoice No: "+n(s.invoice_number),1),e("p",q,"Date Issued: "+n(d(f)(s.due_date).format("DD MMM Y")),1),e("p",G,"Due Date: "+n(d(f)(s.due_date).format("DD MMM Y")),1),e("p",K,"Amount: "+n(s.amount),1),e("p",Q,[$("Status: "),e("span",{class:c([s.status_text_color])},n(s.status),3)])]),e("div",W,[s.status_id==1?(i(),l("a",{key:0,href:s.payment_url,class:"text-sm cursor-pointer font-medium px-3 py-1 text-indigo-600 rounded bg-indigo-100 hover:bg-indigo-200 hover:rounded whitespace-nowrap"},"Pay Now",8,X)):u("",!0),s.status_id==2?(i(),l("a",{key:1,class:"text-sm cursor-pointer font-medium px-3 py-1 text-blue-600 bg-blue-100 hover:bg-blue-200 rounded whitespace-nowrap",onClick:h=>t.generating[r]?"":t.viewInvoice(s.id,r)},n(t.generating[r]?"Generating...":"View"),9,Z)):u("",!0)])]))),256))])]),_:1})])])])]),_:1})],64))}});export{ce as default};
