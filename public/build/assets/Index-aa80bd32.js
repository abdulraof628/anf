import{_ as b}from"./Authenticated-f3db8f56.js";import{c as r,b as i,u as x,w as l,F as m,H as u,L as g,ac as v,o as c,d as e,h as k,t as p,n as C,k as F}from"./app-e1ac0d9a.js";import{B as _}from"./Button-f782988b.js";import{M as h}from"./Modal-03f3befd.js";import f from"./MonthlyFee-b3c914be.js";import"./XIcon-8e23ec47.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./transition-00a79602.js";import"./use-resolve-button-type-b48be695.js";import"./menu-9716b90b.js";import"./VueFinalModal.esm-b8bfd9c8.js";/* empty css                                                              */import"./default.css_vue_type_style_index_0_src_true_lang-aec621b9.js";import"./moment-fbc5633a.js";const D={class:"overflow-x-auto no-scrollbar"},z={class:"bg-white shadow rounded-lg border"},H={class:"w-full text-sm text-left text-gray-500"},M=e("thead",{class:"text-gray-700 capitalize bg-gray-200"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Invoice Number "),e("th",{scope:"col",class:"px-6 py-3"}," Date Issued "),e("th",{scope:"col",class:"px-6 py-3"}," Due Date "),e("th",{scope:"col",class:"px-6 py-3 text-center"}," Amount "),e("th",{scope:"col",class:"px-6 py-3 text-center"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-center"}," Action ")])],-1),$={key:0,class:"bg-white border-b"},B=e("td",{class:"text-center py-4",colspan:"10"}," No record found. ",-1),N=[B],V={class:"bg-white border-b hover:bg-gray-50"},I={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},T={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},S={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},A={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap text-center"},E={class:"px-6 py-4 text-center"},L={class:"px-6 py-4 text-center"},P=["onClick"],O=["onClick"],j=e("h3",{class:"text-gray-900 text-xl font-semibold"}," Invoice ",-1),J={class:"flex justify-between space-x-2 items-center p-4 border-t border-gray-200 rounded-b"},R=e("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[e("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),e("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1),U=e("span",null,"Print",-1),K={name:"_blank",specs:[],styles:["http://127.0.0.1:8000/css/app.css"],timeout:1e3,autoClose:!0,windowTitle:window.document.title},q={components:{Head:u,Link:g,Modal:h,MonthlyFee:f},data(){return{open_modal:!1,invoice_data:{parent_name:"",parent_address:"No 27, Jalan Kap Empat, 17/17D, Seksyen 17, Shah Alam",invoice_number:"",invoice_items:[],date_issued:"",due_date:"",total_amount:""}}},methods:{viewInvoice(n){v.get(route("fee.invoices.generate"),{responseType:"blob",params:{invoice_id:n}}).then(o=>{const s=new Blob([o.data],{type:"application/pdf"}),t=new FileReader;t.onload=()=>{const d=t.result,a=document.createElement("a");a.href=d,a.target="_blank",a.rel="noopener noreferrer",a.click()},t.readAsDataURL(s)}).catch(o=>{console.error("Error fetching PDF:",o)})},totalFee(n){let o=0;const s=JSON.parse(n);for(const t of s){const d=parseFloat(t.programme_fee),a=parseFloat(t.programme_fee_discount),w=parseFloat(t.material_fee),y=parseFloat(t.material_fee_discount);o+=d-a,t.include_material_fee&&(o+=w-y)}return o},print(){this.printing=!0,this.$htmlToPaper("invoice",K,()=>{this.printing=!1})},pay(n){window.location.href="https://www.billplz-sandbox.com/bills/"+n}}},le=Object.assign(q,{__name:"Index",setup(n){return(o,s)=>(c(),r(m,null,[i(x(u),{title:"Invoices"}),i(b,null,{default:l(()=>[e("div",D,[e("div",z,[e("table",H,[M,e("tbody",null,[o.$page.props.invoices.length?(c(!0),r(m,{key:1},k(o.$page.props.invoices,(t,d)=>(c(),r("tr",V,[e("td",I,p(t.invoice_number),1),e("td",T,p(t.date_issued),1),e("td",S,p(t.due_date),1),e("td",A,p(t.amount),1),e("td",E,[e("span",{class:C(["text-xs font-medium px-2 py-1 rounded",[t.status_bg_color,t.status_text_color]])},p(t.status),3)]),e("td",L,[t.status_id==1?(c(),r("a",{key:0,onClick:a=>o.pay(t.bill_id),class:"cursor-pointer font-medium px-3 py-1 text-indigo-600 hover:bg-indigo-200 hover:rounded whitespace-nowrap"},"Pay Now",8,P)):(c(),r("a",{key:1,class:"cursor-pointer font-medium px-3 py-1 text-blue-600 bg-blue-100 hover:bg-blue-200 rounded whitespace-nowrap",onClick:a=>o.viewInvoice(t.id)},"View / Download",8,O))])]))),256)):(c(),r("tr",$,N))])])])]),i(h,{showModal:o.open_modal,modalType:"md",onHideModal:s[1]||(s[1]=t=>o.open_modal=!1)},{header:l(()=>[j]),content:l(()=>[i(f,{invoice_data:o.invoice_data},null,8,["invoice_data"])]),footer:l(()=>[e("div",J,[i(_,{buttonType:"blue",class:"px-4 py-2 space-x-2",onClick:o.print},{default:l(()=>[R,U]),_:1},8,["onClick"]),i(_,{buttonType:"gray",onClick:s[0]||(s[0]=t=>o.open_modal=!1)},{default:l(()=>[F("Close")]),_:1})])]),_:1},8,["showModal"])]),_:1})],64))}});export{le as default};
