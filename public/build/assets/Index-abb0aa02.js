import{y,x as r,u as a,Q as s,F as S,be as b,bf as B,t as m,z as l,A as _,v as w,C as g,W as n,J as j,K as v,I as V}from"./@vue-66b8c761.js";import{B as N}from"./Authenticated-11e054d5.js";import{H as C,L as D}from"./@inertiajs-4f2e6820.js";import{_ as E}from"./DeleteConfirmation-5b92c13b.js";import{F as L}from"./fslightbox-vue-11a3071f.js";import{_ as P}from"./Card-a2265374.js";import{_ as I,a as T,b as $,c as f,d as R,e as u}from"./TableRow-151d209b.js";import{P as H}from"./Pagination-826205f8.js";import{_ as M}from"./DialogModal-6c1852d9.js";import{e as G}from"./vue-debounce-ed417ae1.js";import{a as O,d as W}from"./@radix-icons-de95313b.js";import{F as z,S as J,C as Y}from"./lucide-vue-next-bc441494.js";import"./ApplicationLogo-f9b7ff8a.js";import"./radix-vue-aa72069b.js";import"./@floating-ui-b481b296.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-98eea8e8.js";import"./axios-1779699b.js";import"./pusher-js-cb9cdec3.js";import"./@vueform-4cba997d.js";import"./@vuepic-d831316d.js";import"./@babel-1b80a44a.js";import"./cropperjs-c64556db.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./v-calendar-2d2eee44.js";import"./tailwind-merge-26e9d2f1.js";import"./@vueuse-b3927753.js";import"./lodash.isequal-802c39ac.js";import"./vue-978cb4c7.js";import"./lodash.clonedeep-6494eade.js";import"./qs-740c36f9.js";import"./side-channel-eec8ae42.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-d4161e53.js";import"./deepmerge-89e33937.js";import"./nprogress-5b8a22ad.js";const x={class:"flex items-center justify-between space-x-2"},K={class:"flex justify-between space-x-2"},Q={class:"relative"},X={key:0,class:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-5 gap-2"},q={class:""},Z={class:"flex justify-center space-x-2"},ee={class:"p-1 grid grid-cols-1 gap-4"},te={class:"space-y-2"},re={key:0,class:"rounded-md bg-red-100 p-4"},le={class:"flex"},se={class:"flex-shrink-0"},oe={class:"space-y-1 text-center"},ie={class:"flex text-sm text-gray-600"},ae={class:"browse text-indigo-400 hover:text-indigo-800 cursor-pointer font-bold"},ne={ref:"artwork_file",id:"file",class:"sr-only",type:"file",accept:"image/*"},de={class:"flex flex-row justify-start space-x-2"},me={class:"flex-column text-center"},pe=["src"],ue={class:"flex-column"},fe={class:"flex flex-col space-y-1"},A=window.URL||window.webkitURL,ge=/^image\/\w+$/,ve={components:{Head:C,Link:D,FsLightbox:L},props:{filter:Object},watch:{"form.level_id":{handler(){this.form.level_id!=""&&axios.get(route("art_gallery.get_themes",this.form.level_id)).then(i=>{this.list.themes=i.data,this.form.theme_id="",this.form.lesson_id="",this.form.activity_id=""})},deep:!0},"form.theme_id":{handler(){this.form.level_id!=""&&this.form.theme_id!=""&&axios.get(route("art_gallery.get_lessons",this.form.theme_id)).then(i=>{this.list.lessons=i.data,this.form.lesson_id="",this.form.activity_id=""})},deep:!0},"form.lesson_id":{handler(){this.form.level_id!=""&&this.form.theme_id!=""&&this.form.lesson_id!=""&&axios.get(route("art_gallery.get_activities",this.form.lesson_id)).then(i=>{this.list.activities=i.data,this.form.activity_id=""})},deep:!0}},computed:{baseUrl(){return window.location.origin}},data(){return{show_filters:!1,show_add_artwork:!1,confirmation:{is_open:!1,route_name:"",id:""},lightbox:{open:!1,src:[]},list:{students:[],levels:this.$page.props.levels,themes:[],lessons:[],activities:[]},form:{student_id:"",level_id:"",theme_id:"",lesson_id:"",activity_id:"",artwork:{image_url:"",file:""}},student_status:[{id:"1",name:"Active"},{id:"0",name:"Inactive"}],params:{search:this.filter.search||"",level:this.filter.level||"",theme:this.filter.theme||"",status:this.filter.status||""}}},methods:{submit(){this.$inertia.post(route("art_gallery.store"),this.form,{preserveState:!1})},viewArtwork(i){fetch(window.location.origin+"/storage/art_gallery/"+i).then(t=>{t.ok?this.lightbox.src=[window.location.origin+"/storage/art_gallery/"+i]:this.lightbox.src=[window.location.origin+"/images/no_image.jpg"],this.lightbox.open=!this.lightbox.open})},deleteArtwork(i){this.confirmation.route_name="art_gallery.destroy",this.confirmation.id=i,this.confirmation.is_open=!0},findStudents:G(function(i){i&&(this.isLoading=!0,axios.get(route("students.find_digital_art_students"),{params:{keyword:i}}).then(t=>{this.list.students=t.data,this.isLoading=!1}))},1e3),search(){this.$inertia.get(this.route("art_gallery"),this.params,{replace:!0,preserveState:!0})},showFilters(){this.show_filters=!this.show_filters},read(i,t){return new Promise((e,k)=>{if(!i){e();return}ge.test(i.type)?A?e({loaded:!0,name:i.name,type:i.type,url:A.createObjectURL(i)}):k(new Error("Your browser is not supported.")):k(new Error("Please select a valid image file."))})},changeArtwork({target:i}){const{files:t}=i;t&&t.length>0&&this.read(t[0],i).then(e=>{this.form.artwork.image_url=e.url,this.form.artwork.file=t[0]}).catch(this.alert)},dragoverArtWork(i){i.preventDefault()},dropArtwork(i){const{files:t}=i.dataTransfer;i.preventDefault(),t&&t.length>0&&this.read(t[0],i).then(e=>{this.form.artwork.image_url=e.url,this.form.artwork.file=t[0]}).catch(this.alert)},reselect_image(){this.$refs.artwork_file.value="",this.form.artwork.image_url="",this.form.artwork.file=""}}},pt=Object.assign(ve,{__name:"Index",setup(i){return(t,e)=>{const k=b("Input"),d=b("Button"),p=b("ComboBox"),h=b("Label"),c=B("debounce");return m(),y(S,null,[r(a(C),{title:"Art Gallery"}),r(N,null,{header:s(()=>e[20]||(e[20]=[])),default:s(()=>[l("div",x,[l("div",K,[l("div",Q,[r(a(O),{class:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),_(r(k,{type:"text",placeholder:"Search",class:"w-full rounded-lg bg-background pl-8 md:w-[200px] lg:w-[336px]",modelValue:t.params.search,"onUpdate:modelValue":e[0]||(e[0]=o=>t.params.search=o)},null,8,["modelValue"]),[[c,t.search,"800ms"]])]),r(d,{class:"border border-slate-700 border-dashed bg-white text-slate-800 hover:bg-slate-50",onClick:e[1]||(e[1]=o=>t.showFilters())},{default:s(()=>[r(a(z),{class:"h-4 w-4"}),e[21]||(e[21]=l("span",{class:"ml-1 hidden sm:block"},"Filters",-1))]),_:1}),r(d,{onClick:e[2]||(e[2]=o=>t.$inertia.get(t.route("art_gallery.setting.levels")))},{default:s(()=>[r(a(J),{class:"h-4 w-4"}),e[22]||(e[22]=l("span",{class:"ml-1 hidden sm:block"},"Setting",-1))]),_:1})]),t.$page.props.can.create_art_gallery?(m(),w(d,{key:0,onClick:e[3]||(e[3]=o=>t.show_add_artwork=!0)},{default:s(()=>[r(a(Y),{class:"h-4 w-4"}),e[23]||(e[23]=l("span",{class:"ml-1 hidden sm:block"},"New Artwork",-1))]),_:1})):g("",!0)]),t.show_filters?(m(),y("div",X,[r(p,{canClear:"",items:t.$page.props.levels,"label-property":"name","value-property":"id",onSelect:t.search,modelValue:t.params.level,"onUpdate:modelValue":e[4]||(e[4]=o=>t.params.level=o),"select-placeholder":"Levels","search-placeholder":"Search level..."},null,8,["items","onSelect","modelValue"]),r(p,{canClear:"",items:t.$page.props.themes,"label-property":"name","value-property":"id",onSelect:t.search,modelValue:t.params.theme,"onUpdate:modelValue":e[5]||(e[5]=o=>t.params.theme=o),"select-placeholder":"Themes","search-placeholder":"Search theme..."},null,8,["items","onSelect","modelValue"]),r(p,{canClear:"",items:t.student_status,"label-property":"name","value-property":"id",onSelect:t.search,modelValue:t.params.status,"onUpdate:modelValue":e[6]||(e[6]=o=>t.params.status=o),"select-placeholder":"Status","search-placeholder":"Search status..."},null,8,["items","onSelect","modelValue"]),l("div",q,[r(d,{onClick:e[7]||(e[7]=o=>t.$inertia.get(t.route("art_gallery")))},{default:s(()=>e[24]||(e[24]=[n("Clear Search")])),_:1})])])):g("",!0),r(P,null,{content:s(()=>[r(a(I),null,{default:s(()=>[r(a(T),{class:"bg-gray-100"},{default:s(()=>[r(a($),null,{default:s(()=>[r(a(f),null,{default:s(()=>e[25]||(e[25]=[n("#")])),_:1}),r(a(f),null,{default:s(()=>e[26]||(e[26]=[n("Name")])),_:1}),r(a(f),null,{default:s(()=>e[27]||(e[27]=[n("Level")])),_:1}),r(a(f),null,{default:s(()=>e[28]||(e[28]=[n("Theme")])),_:1}),r(a(f),null,{default:s(()=>e[29]||(e[29]=[n("Lesson - Title")])),_:1}),r(a(f),null,{default:s(()=>e[30]||(e[30]=[n("Activity")])),_:1}),r(a(f),{class:"text-center"},{default:s(()=>e[31]||(e[31]=[n("Action")])),_:1})]),_:1})]),_:1}),r(a(R),null,{default:s(()=>[t.$page.props.arts.data.length?g("",!0):(m(),w(a($),{key:0},{default:s(()=>[r(a(u),{class:"text-center",colspan:"10"},{default:s(()=>e[32]||(e[32]=[l("div",{class:"p-3"}," No Record Found ",-1)])),_:1})]),_:1})),(m(!0),y(S,null,j(t.$page.props.arts.data,(o,F)=>(m(),w(a($),null,{default:s(()=>[r(a(u),null,{default:s(()=>[n(v(t.$page.props.arts.from+F),1)]),_:2},1024),r(a(u),null,{default:s(()=>[n(v(o.student_name),1)]),_:2},1024),r(a(u),null,{default:s(()=>[n(v(o.level),1)]),_:2},1024),r(a(u),null,{default:s(()=>[n(v(o.theme),1)]),_:2},1024),r(a(u),null,{default:s(()=>[n(v(o.lesson),1)]),_:2},1024),r(a(u),null,{default:s(()=>[n(v(o.activity),1)]),_:2},1024),r(a(u),{class:"text-center"},{default:s(()=>[l("div",Z,[t.$page.props.can.edit_art_gallery?(m(),w(d,{key:0,variant:"outline",onClick:U=>t.viewArtwork(o.art_file_location)},{default:s(()=>e[33]||(e[33]=[n("View")])),_:2},1032,["onClick"])):g("",!0),t.$page.props.can.delete_art_gallery?(m(),w(d,{key:1,variant:"destructive",onClick:U=>t.deleteArtwork(o.artwork_id)},{default:s(()=>e[34]||(e[34]=[n("Delete")])),_:2},1032,["onClick"])):g("",!0)])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),r(H,{page_data:t.$page.props.arts,params:t.params},null,8,["page_data","params"]),r(E,{open:t.confirmation.is_open,onClose:e[8]||(e[8]=o=>t.confirmation.is_open=!1),routeName:t.confirmation.route_name,id:t.confirmation.id},{title:s(()=>e[35]||(e[35]=[n("Delete Artwork")])),description:s(()=>e[36]||(e[36]=[n("Are you sure want to delete this artwork?")])),_:1},8,["open","routeName","id"]),r(a(L),{toggler:t.lightbox.open,sources:t.lightbox.src,exitFullscreenOnClose:!0},null,8,["toggler","sources"]),r(M,{open:t.show_add_artwork,"onUpdate:open":e[19]||(e[19]=o=>t.show_add_artwork=o)},{title:s(()=>e[37]||(e[37]=[n("Add Artwork")])),content:s(()=>[l("div",ee,[l("div",null,[r(h,null,{default:s(()=>e[38]||(e[38]=[n("Student Name"),l("span",{class:"text-red-500"},"*",-1)])),_:1}),r(p,{onSearch:t.findStudents,items:t.list.students,"label-property":"name","value-property":"id",error:t.$page.props.errors.student_id,modelValue:t.form.student_id,"onUpdate:modelValue":e[9]||(e[9]=o=>t.form.student_id=o),"select-placeholder":"Enter some characters to search","search-placeholder":"Search student..."},null,8,["onSearch","items","error","modelValue"])]),l("div",null,[r(h,null,{default:s(()=>e[39]||(e[39]=[n("Level"),l("span",{class:"text-red-500"},"*",-1)])),_:1}),r(p,{items:t.list.levels,"label-property":"name","value-property":"id",error:t.$page.props.errors.level_id,modelValue:t.form.level_id,"onUpdate:modelValue":e[10]||(e[10]=o=>t.form.level_id=o),"select-placeholder":"Select Level","search-placeholder":"Search level..."},null,8,["items","error","modelValue"])]),l("div",null,[r(h,null,{default:s(()=>e[40]||(e[40]=[n("Theme"),l("span",{class:"text-red-500"},"*",-1)])),_:1}),r(p,{items:t.list.themes,"label-property":"name","value-property":"id",error:t.$page.props.errors.theme_id,modelValue:t.form.theme_id,"onUpdate:modelValue":e[11]||(e[11]=o=>t.form.theme_id=o),"select-placeholder":"Select Theme","search-placeholder":"Search theme..."},null,8,["items","error","modelValue"])]),l("div",null,[r(h,null,{default:s(()=>e[41]||(e[41]=[n("Lesson"),l("span",{class:"text-red-500"},"*",-1)])),_:1}),r(p,{items:t.list.lessons,"label-property":"name","value-property":"id",error:t.$page.props.errors.lesson_id,modelValue:t.form.lesson_id,"onUpdate:modelValue":e[12]||(e[12]=o=>t.form.lesson_id=o),"select-placeholder":"Select Lesson","search-placeholder":"Search lesson..."},null,8,["items","error","modelValue"])]),l("div",null,[r(h,null,{default:s(()=>e[42]||(e[42]=[n("Activity"),l("span",{class:"text-red-500"},"*",-1)])),_:1}),r(p,{items:t.list.activities,"label-property":"name","value-property":"id",error:t.$page.props.errors.activity_id,modelValue:t.form.activity_id,"onUpdate:modelValue":e[13]||(e[13]=o=>t.form.activity_id=o),"select-placeholder":"Select Activity","search-placeholder":"Search activity..."},null,8,["items","error","modelValue"])]),_(l("div",te,[e[48]||(e[48]=l("label",{class:"block text-sm text-gray-700 font-bold"}," Artwork File ",-1)),t.$page.props.errors["artwork.file"]?(m(),y("div",re,[l("div",le,[l("div",se,[r(a(W),{class:"h-5 w-5 text-red-500","aria-hidden":"true"})]),e[43]||(e[43]=l("div",{class:"ml-3"},[l("h3",{class:"text-sm font-medium text-red-500"},"File is required!")],-1))])])):g("",!0),l("div",{class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",onChange:e[14]||(e[14]=(...o)=>t.changeArtwork&&t.changeArtwork(...o)),onDragover:e[15]||(e[15]=(...o)=>t.dragoverArtWork&&t.dragoverArtWork(...o)),onDrop:e[16]||(e[16]=(...o)=>t.dropArtwork&&t.dropArtwork(...o))},[l("div",oe,[e[46]||(e[46]=l("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[l("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("div",ie,[l("label",ae,[e[44]||(e[44]=n("Click here ")),l("input",ne,null,512)]),e[45]||(e[45]=l("p",{class:"pl-1"},"or drag and drop an image",-1))]),e[47]||(e[47]=l("p",{class:"text-xs text-gray-500"},"Image Format : PNG, JPG",-1))])],32)],512),[[V,t.form.artwork.image_url==""]]),_(l("div",null,[e[50]||(e[50]=l("label",{class:"block text-sm text-gray-700 font-bold mb-2"}," Artwork File ",-1)),l("div",de,[l("div",me,[l("img",{class:"object-scale-down w-full",src:t.form.artwork.image_url,alt:""},null,8,pe)]),l("div",ue,[l("div",fe,[r(d,{onClick:e[17]||(e[17]=o=>t.reselect_image()),title:"Reselect an image"},{default:s(()=>e[49]||(e[49]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])),_:1})])])])],512),[[V,t.form.artwork.image_url!=""]])])]),footer:s(()=>[r(d,{variant:"outline",onClick:e[18]||(e[18]=o=>t.show_add_artwork=!1)},{default:s(()=>e[51]||(e[51]=[n("Cancel")])),_:1}),r(d,{onClick:t.submit},{default:s(()=>e[52]||(e[52]=[n("Add")])),_:1},8,["onClick"])]),_:1},8,["open"])]),_:1})],64)}}});export{pt as default};
