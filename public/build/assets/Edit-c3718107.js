import{B as C}from"./Authenticated-214cc5de.js";import{U as I,_ as U}from"./Variation-6a881192.js";import{H as q}from"./@inertiajs-2b766590.js";import{C as B}from"./compressorjs-dec42b9c.js";import{_ as x,a as F,b as k}from"./TabsList-14e421a8.js";import{_ as V}from"./TabsContent-5342f2f6.js";import{_}from"./Card-e481dfab.js";import{r as P,x as m,v as t,u as n,O as a,F as y,b7 as c,q as d,U as p,y as s,I as S,J as j,B as f,t as w,m as L}from"./@vue-39dc9ff3.js";import"./ApplicationLogo-5cf6e77e.js";import"./radix-vue-a603168c.js";import"./@floating-ui-c05b1c1f.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-ef5f5861.js";import"./axios-1779699b.js";import"./pusher-js-68b5c933.js";import"./@vueform-8fb84cf1.js";import"./@vuepic-a83e4355.js";import"./@babel-1b80a44a.js";import"./cropperjs-042b647f.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-e9930861.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-c14271ca.js";import"./@radix-icons-9ff33614.js";import"./lodash.isequal-0acc53e7.js";import"./vue-46d666fa.js";import"./lodash.clonedeep-12c784b4.js";import"./qs-45a3326f.js";import"./side-channel-401220dd.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-ac0241aa.js";import"./deepmerge-89e33937.js";import"./nprogress-87ee1729.js";import"./lucide-vue-next-7b48dc26.js";import"./ConfirmationModal-958041d3.js";import"./@heroicons-fd1e1a44.js";import"./@headlessui-3f5736f6.js";import"./TableRow-7ae90bc5.js";import"./TableCaption-b5d13df9.js";const D={class:"grid grid-cols-1 gap-4"},E={class:""},N=s("span",{class:"text-red-500"},"*",-1),T={class:"w-full mt-2"},H={class:"flex xl:justify-center overflow-x-auto whitespace-nowrap space-x-4"},O={class:"flex flex-col items-center py-2"},z={key:0,class:"text-red-600"},A={class:""},R=s("span",{class:"text-red-500"},"*",-1),J={class:""},W=s("span",{class:"text-red-500"},"*",-1),G={class:"flex flex-col gap-4"},K={class:"grid grid-cols-1 gap-4"},M={class:"flex space-x-6 my-3"},Q={class:"flex space-x-2 items-center"},X={key:0,class:"flex space-x-2 items-center"},Y=s("span",{class:"text-red-500"},"*",-1),Z=s("span",{class:"text-red-500"},"*",-1),ee={class:"flex items-center justify-end space-x-2"};function oe(i,e){return new File([i],e,{type:i.type})}const te={mounted(){if(this.$page.props.product_variations.length?this.$page.props.product_variations.forEach(i=>{this.form.detailed_info.variations.options.push({id:i.id,name:i.option_name,images:{file:null,value:i.image?"/storage"+i.image:null},price:i.price?i.price:0,stock:i.stock?i.stock:0,sub_variations:{options:[]}})}):this.form.detailed_info.variations.options.push({id:"",name:"",images:{file:null,value:null},price:0,stock:0,sub_variations:{options:[{id:"",name:"",price:0,stock:0}]}}),this.$page.props.product_sub_variations.length){const i=new Set;for(const e of this.$page.props.product_sub_variations)i.has(e.option_name)||(this.sub_variation_prop.options.push({name:e.option_name}),i.add(e.option_name));this.form.detailed_info.variations.options.forEach(e=>{this.$page.props.product_sub_variations.forEach(o=>{e.id==o.product_variation_id&&e.sub_variations.options.push({id:o.id,name:o.option_name,price:o.price,stock:o.stock})})})}else this.sub_variation_prop.options.push({name:"",price:0,stock:0})},data(){return{sub_variation_prop:{options:[]},form:{basic_info:{product_id:this.$page.props.product.id,product_name:this.$page.props.product.name??"",product_description:this.$page.props.product.description??"",product_price:this.$page.props.product.price??"",product_stock:this.$page.props.product.stock??"",product_images:{cover:{label:"Cover Image",required:!0,file:null,value:this.$page.props.product.cover_image?"/storage"+this.$page.props.product.cover_image:""},image_1:{label:"Image 1",required:!1,file:null,value:this.$page.props.product.image_1?"/storage"+this.$page.props.product.image_1:""},image_2:{label:"Image 2",required:!1,file:null,value:this.$page.props.product.image_2?"/storage"+this.$page.props.product.image_2:""},image_3:{label:"Image 3",required:!1,file:null,value:this.$page.props.product.image_3?"/storage"+this.$page.props.product.image_3:""},image_4:{label:"Image 4",required:!1,file:null,value:this.$page.props.product.image_4?"/storage"+this.$page.props.product.image_4:""},image_5:{label:"Image 5",required:!1,file:null,value:this.$page.props.product.image_5?"/storage"+this.$page.props.product.image_5:""},image_6:{label:"Image 6",required:!1,file:null,value:this.$page.props.product.image_6?"/storage"+this.$page.props.product.image_6:""}}},detailed_info:{has_variation:this.$page.props.product.has_variation,has_sub_variation:this.$page.props.product.has_sub_variation,main_variation_name:this.$page.props.product.variation_name??"",sub_variation_name:this.$page.props.product.sub_variation_name??"",variations:{options:[]}}}}},methods:{submit(){this.$inertia.post(route("products.update"),this.form)},handleFileChange(i,e){if(i){const o=this.form.basic_info.product_images;this.compress(i,e,o)}},compress(i,e,o){new B(i,{quality:.2,maxWidth:400,maxHeight:400,success(l){const u=URL.createObjectURL(l),g=oe(l,Date.now()+".jpg");o[e].file=g,o[e].value=u}})},deleteImage(i){this.form.basic_info.product_images[i].file=null,this.form.basic_info.product_images[i].value=null},blobToFile(i,e){return new File([i],e,{type:i.type})}}},to=Object.assign(te,{__name:"Edit",setup(i){return P(1),(e,o)=>{const l=c("Label"),u=c("Input"),g=c("Textarea"),h=c("Switch"),v=c("Button");return d(),m(y,null,[t(n(q),{title:"Products"}),t(C,null,{header:a(()=>[]),default:a(()=>[t(n(x),{"default-value":"basic"},{default:a(()=>[t(n(F),null,{default:a(()=>[t(n(k),{value:"basic"},{default:a(()=>[p(" Basic Information ")]),_:1}),t(n(k),{value:"detailed"},{default:a(()=>[p(" Detailed Information ")]),_:1})]),_:1}),t(n(V),{value:"basic",class:"p-0.5"},{default:a(()=>[t(_,null,{content:a(()=>[s("div",D,[s("div",E,[t(l,null,{default:a(()=>[p("Product Images"),N]),_:1}),s("div",T,[s("div",H,[(d(!0),m(y,null,S(e.form.basic_info.product_images,(r,b)=>(d(),m("div",O,[t(l,{class:"text-center mb-1 text-xs",for:r.label},{default:a(()=>[p(j(r.label),1),r.required?(d(),m("span",z,"*")):f("",!0)]),_:2},1032,["for"]),t(I,{previewUrl:r.value,"onUpdate:value":$=>e.handleFileChange($,b)},null,8,["previewUrl","onUpdate:value"]),r.value?(d(),w(l,{key:0,class:"mt-1 text-xs text-red-500 hover:underline cursor-pointer",onClick:$=>e.deleteImage(b)},{default:a(()=>[p("Delete")]),_:2},1032,["onClick"])):f("",!0)]))),256))])])]),s("div",A,[t(l,null,{default:a(()=>[p("Product Name"),R]),_:1}),t(u,{type:"text",error:e.$page.props.errors["basic_info.product_name"],modelValue:e.form.basic_info.product_name,"onUpdate:modelValue":o[0]||(o[0]=r=>e.form.basic_info.product_name=r)},null,8,["error","modelValue"])]),s("div",J,[t(l,null,{default:a(()=>[p("Product Description"),W]),_:1}),t(g,{error:e.$page.props.errors["basic_info.product_description"],modelValue:e.form.basic_info.product_description,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.basic_info.product_description=r),rows:"3"},null,8,["error","modelValue"])])])]),_:1})]),_:1}),t(n(V),{value:"detailed"},{default:a(()=>[s("div",G,[t(_,null,{content:a(()=>[s("div",K,[s("div",M,[s("div",Q,[t(l,null,{default:a(()=>[p("Variation")]),_:1}),t(h,{modelValue:e.form.detailed_info.has_variation,"onUpdate:modelValue":o[2]||(o[2]=r=>e.form.detailed_info.has_variation=r),onClick:o[3]||(o[3]=r=>e.form.detailed_info.has_variation?e.form.detailed_info.has_sub_variation=!1:"")},null,8,["modelValue"])]),e.form.detailed_info.has_variation?(d(),m("div",X,[t(l,null,{default:a(()=>[p("Sub Variation")]),_:1}),t(h,{modelValue:e.form.detailed_info.has_sub_variation,"onUpdate:modelValue":o[4]||(o[4]=r=>e.form.detailed_info.has_sub_variation=r)},null,8,["modelValue"])])):f("",!0)])])]),_:1}),e.form.detailed_info.has_variation?f("",!0):(d(),w(_,{key:0},{content:a(()=>[s("div",null,[t(l,null,{default:a(()=>[p("Product Price"),Y]),_:1}),t(u,{type:"text",error:e.$page.props.errors["basic_info.product_price"],modelValue:e.form.basic_info.product_price,"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.basic_info.product_price=r)},null,8,["error","modelValue"])]),s("div",null,[t(l,null,{default:a(()=>[p("Product Stock"),Z]),_:1}),t(u,{type:"text",error:e.$page.props.errors["basic_info.product_stock"],modelValue:e.form.basic_info.product_stock,"onUpdate:modelValue":o[6]||(o[6]=r=>e.form.basic_info.product_stock=r)},null,8,["error","modelValue"])])]),_:1})),s("div",{class:L({hidden:!e.form.detailed_info.has_variation})},[t(U,{detailed_info:e.form.detailed_info,sub_variation_prop:e.sub_variation_prop},null,8,["detailed_info","sub_variation_prop"])],2),t(_,{class:"p-0.5"},{content:a(()=>[s("div",ee,[t(v,{onClick:o[7]||(o[7]=r=>e.$inertia.get(e.route("products"))),variant:"outline"},{default:a(()=>[p("Cancel")]),_:1}),t(v,{onClick:e.submit},{default:a(()=>[p("Save")]),_:1},8,["onClick"])])]),_:1})])]),_:1})]),_:1})]),_:1})],64)}}});export{to as default};
