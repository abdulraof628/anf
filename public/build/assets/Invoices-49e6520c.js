import{_ as w}from"./Authenticated-27e103d7.js";import{o as n,c as i,a as c,u as p,d as e,t as l,w as u,F as g,b as x,H as y,n as d,q as m,e as k,g as $}from"./app-f2de0767.js";import{s as _}from"./simplebar.min-d46e1556.js";import{h as f}from"./moment-a9aaa855.js";import"./XIcon-985e98f8.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./transition-a1c8638e.js";import"./keyboard-ad2a3dc4.js";import"./use-resolve-button-type-4b62c7f2.js";import"./menu-ec48e936.js";const D={class:"fixed w-full flex justify-center top-[4rem] md:top-[10rem] font-extrabold bg-white border border-gray-300 py-3 z-20"},F={class:"max-w-xl mx-auto border shadow bg-white rounded-lg px-4 mt-14"},C={class:"flex justify-evenly sm:justify-center space-x-8 md:space-x-10 pt-3 pb-4 font-medium"},N=e("img",{src:"/images/parents/stories.png",class:"w-10 h-10",alt:""},null,-1),I=e("span",{class:"text-sm"},"Stories",-1),j=[N,I],M=e("img",{src:"/images/parents/progress_report.png",class:"w-10 h-10",alt:""},null,-1),S=e("span",{class:"text-sm"},"Progress Reports",-1),B=[M,S],V=e("img",{src:"/images/parents/fee_invoice.png",class:"w-10 h-10",alt:""},null,-1),z=e("span",{class:"text-sm"},"Invoices",-1),A=[V,z],E=e("img",{src:"/images/parents/art_gallery.png",class:"w-10 h-10",alt:""},null,-1),H=e("span",{class:"text-sm"},"Art Gallery",-1),L=[E,H],O=e("img",{src:"/images/parents/art_book.png",class:"w-10 h-10",alt:""},null,-1),P=e("span",{class:"text-sm"},"Art Book",-1),R=[O,P],U={class:"max-w-xl mx-auto mt-10"},G={key:0,class:"flex items-center space-y-3"},J=e("h2",{class:"text-lg md:text-xl mx-1 font-extrabold"},"Invoices",-1),T=[J],Y={key:1,class:"flex justify-center mx-1 mt-10"},q=e("span",{class:"text-slate-500"},"No Invoices Found",-1),K=[q],Q={class:"mt-3"},W={class:"bg-white shadow rounded-lg border"},X={class:"divide-y divide-slate-200 dark:divide-zink-500 px-6 py-4"},Z={class:"flex items-center gap-3 py-2 first:pt-0 last:pb-0"},ee={class:"grow"},te={class:"font-semibold text-sm"},se={class:"text-slate-500 text-sm font-medium"},oe={class:"text-slate-500 text-sm font-medium"},ae={class:"text-slate-500 text-sm font-medium"},re={class:"text-sm font-medium"},ne={class:"shrink-0"},ie=["href"],le=["onClick"],de={components:{simplebar:_},data(){return{open_modal:!1,generating:[],invoice_data:{parent_name:"",parent_address:"No 27, Jalan Kap Empat, 17/17D, Seksyen 17, Shah Alam",invoice_number:"",invoice_items:[],date_issued:"",due_date:"",total_amount:""}}},methods:{viewInvoice(a,t){this.generating[t]||(this.generating[t]=!0,x.get(route("fee.invoices.generate"),{responseType:"blob",params:{invoice_id:a}}).then(o=>{const s=new Blob([o.data],{type:"application/pdf"}),r=URL.createObjectURL(s);window.open(r,"_blank"),this.generating[t]=!1}).catch(o=>{console.error("Error fetching PDF:",o),this.generating[t]=!1}))},totalFee(a){let t=0;const o=JSON.parse(a);for(const s of o){const r=parseFloat(s.programme_fee),h=parseFloat(s.programme_fee_discount),v=parseFloat(s.material_fee),b=parseFloat(s.material_fee_discount);t+=r-h,s.include_material_fee&&(t+=v-b)}return t},pay(a){window.location.href="https://www.billplz-sandbox.com/bills/"+a}},mounted(){this.$page.props.invoices.forEach(a=>{this.generating.push(!1)})}},we=Object.assign(de,{__name:"Invoices",setup(a){return(t,o)=>(n(),i(g,null,[c(p(y),{title:"Home"}),e("div",D,[e("span",null,l(t.$page.props.session_data.current_active_programme.name),1)]),c(w,null,{default:u(()=>[e("div",F,[c(p(_),{"data-simplebar-auto-hide":"true"},{default:u(()=>[e("div",C,[e("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.stories")?"font-extrabold":""]),onClick:o[0]||(o[0]=s=>t.$inertia.get(t.route("parent.stories",t.$page.props.session_data.current_active_programme.encrypted_id)))},j,2),e("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.progress_reports")?"font-extrabold":""]),onClick:o[1]||(o[1]=s=>t.$inertia.get(t.route("parent.progress_reports")))},B,2),e("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.invoices")?"font-extrabold":""]),onClick:o[2]||(o[2]=s=>t.$inertia.get(t.route("parent.invoices")))},A,2),e("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.art_gallery")?"font-extrabold":""]),onClick:o[3]||(o[3]=s=>t.$inertia.get(t.route("parent.art_gallery")))},L,2),e("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",t.route().current("parent.art_book")?"font-extrabold":""]),onClick:o[4]||(o[4]=s=>t.$inertia.get(t.route("parent.art_book")))},R,2)])]),_:1})]),e("div",U,[t.$page.props.invoices.length?(n(),i("div",G,T)):m("",!0),t.$page.props.invoices.length?m("",!0):(n(),i("div",Y,K)),e("div",Q,[e("div",W,[c(p(_),{"data-simplebar-auto-hide":"true",class:"max-h-screen"},{default:u(()=>[e("ul",X,[(n(!0),i(g,null,k(t.$page.props.invoices,(s,r)=>(n(),i("li",Z,[e("div",ee,[e("h6",te,"Invoice No: "+l(s.invoice_number),1),e("p",se,"Date Issued: "+l(p(f)(s.due_date).format("DD MMM Y")),1),e("p",oe,"Due Date: "+l(p(f)(s.due_date).format("DD MMM Y")),1),e("p",ae,"Amount: "+l(s.amount),1),e("p",re,[$("Status: "),e("span",{class:d([s.status_text_color])},l(s.status),3)])]),e("div",ne,[s.status_id==1?(n(),i("a",{key:0,href:s.payment_url,class:"text-sm cursor-pointer font-medium px-3 py-1 text-indigo-600 rounded bg-indigo-100 hover:bg-indigo-200 hover:rounded whitespace-nowrap"},"Pay Now",8,ie)):m("",!0),s.status_id==2?(n(),i("a",{key:1,class:"text-sm cursor-pointer font-medium px-3 py-1 text-blue-600 bg-blue-100 hover:bg-blue-200 rounded whitespace-nowrap",onClick:h=>t.generating[r]?"":t.viewInvoice(s.id,r)},l(t.generating[r]?"Generating...":"View"),9,le)):m("",!0)])]))),256))])]),_:1})])])])]),_:1})],64))}});export{we as default};
