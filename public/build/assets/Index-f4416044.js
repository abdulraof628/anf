import{x as w,v as t,u as i,O as o,F as $,b7 as k,b8 as B,q as m,y as s,z as y,t as g,B as f,U as n,I as j,J as c,H as S}from"./@vue-39dc9ff3.js";import{B as N}from"./Authenticated-862af612.js";import{H as A,L as D}from"./@inertiajs-2b766590.js";import{_ as E}from"./DeleteConfirmation-138e8050.js";import{F as C}from"./fslightbox-vue-13b1599c.js";import{_ as P}from"./Card-e1e522a8.js";import{_ as I,a as T,b,c as h,d as H,e as u}from"./TableRow-2682b32d.js";import{P as R}from"./Pagination-8b8ac40e.js";import{_ as M}from"./DialogModal-d9c0b6d9.js";import{e as G}from"./vue-debounce-ed417ae1.js";import{a as O,d as W}from"./@radix-icons-9ff33614.js";import{F as z,S as J,C as Y}from"./lucide-vue-next-7b48dc26.js";import"./ApplicationLogo-5cf6e77e.js";import"./radix-vue-a603168c.js";import"./@floating-ui-c05b1c1f.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-31ea0dbe.js";import"./axios-1779699b.js";import"./pusher-js-68b5c933.js";import"./@vueform-8fb84cf1.js";import"./@vuepic-a83e4355.js";import"./@babel-1b80a44a.js";import"./cropperjs-042b647f.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./v-calendar-e9930861.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-c14271ca.js";import"./lodash.isequal-0acc53e7.js";import"./vue-46d666fa.js";import"./lodash.clonedeep-12c784b4.js";import"./qs-45a3326f.js";import"./side-channel-401220dd.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-ac0241aa.js";import"./deepmerge-89e33937.js";import"./nprogress-87ee1729.js";const q={class:"flex items-center justify-between space-x-2"},x={class:"flex justify-between space-x-2"},X={class:"relative"},K=s("span",{class:"ml-1 hidden sm:block"},"Filters",-1),Q=s("span",{class:"ml-1 hidden sm:block"},"Setting",-1),Z=s("span",{class:"ml-1 hidden sm:block"},"New Artwork",-1),ee={key:0,class:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-5 gap-2"},te={class:""},re=s("div",{class:"p-3"}," No Record Found ",-1),se={class:"flex justify-center space-x-2"},oe={class:"p-1 grid grid-cols-1 gap-4"},le=s("span",{class:"text-red-500"},"*",-1),ae=s("span",{class:"text-red-500"},"*",-1),ie=s("span",{class:"text-red-500"},"*",-1),ne=s("span",{class:"text-red-500"},"*",-1),de=s("span",{class:"text-red-500"},"*",-1),me={class:"space-y-2"},pe=s("label",{class:"block text-sm text-gray-700 font-bold"}," Artwork File ",-1),ue={key:0,class:"rounded-md bg-red-100 p-4"},he={class:"flex"},fe={class:"flex-shrink-0"},ce=s("div",{class:"ml-3"},[s("h3",{class:"text-sm font-medium text-red-500"},"File is required!")],-1),_e={class:"space-y-1 text-center"},ge=s("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[s("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ve={class:"flex text-sm text-gray-600"},we={class:"browse text-indigo-400 hover:text-indigo-800 cursor-pointer font-bold"},ke={ref:"artwork_file",id:"file",class:"sr-only",type:"file",accept:"image/*"},ye=s("p",{class:"pl-1"},"or drag and drop an image",-1),be=s("p",{class:"text-xs text-gray-500"},"Image Format : PNG, JPG",-1),$e=s("label",{class:"block text-sm text-gray-700 font-bold mb-2"}," Artwork File ",-1),Se={class:"flex flex-row justify-start space-x-2"},Ve={class:"flex-column text-center"},Ae=["src"],Ce={class:"flex-column"},Le={class:"flex flex-col space-y-1"},Ue=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),V=window.URL||window.webkitURL,Fe=/^image\/\w+$/,Be={components:{Head:A,Link:D,FsLightbox:C},props:{filter:Object},watch:{"form.level_id":{handler(){this.form.level_id!=""&&axios.get(route("art_gallery.get_themes",this.form.level_id)).then(a=>{this.list.themes=a.data,this.form.theme_id="",this.form.lesson_id="",this.form.activity_id=""})},deep:!0},"form.theme_id":{handler(){this.form.level_id!=""&&this.form.theme_id!=""&&axios.get(route("art_gallery.get_lessons",this.form.theme_id)).then(a=>{this.list.lessons=a.data,this.form.lesson_id="",this.form.activity_id=""})},deep:!0},"form.lesson_id":{handler(){this.form.level_id!=""&&this.form.theme_id!=""&&this.form.lesson_id!=""&&axios.get(route("art_gallery.get_activities",this.form.lesson_id)).then(a=>{this.list.activities=a.data,this.form.activity_id=""})},deep:!0}},computed:{baseUrl(){return window.location.origin}},data(){return{show_filters:!1,show_add_artwork:!1,confirmation:{is_open:!1,route_name:"",id:""},lightbox:{open:!1,src:[]},list:{students:[],levels:this.$page.props.levels,themes:[],lessons:[],activities:[]},form:{student_id:"",level_id:"",theme_id:"",lesson_id:"",activity_id:"",artwork:{image_url:"",file:""}},student_status:[{id:"1",name:"Active"},{id:"0",name:"Inactive"}],params:{search:this.filter.search||"",level:this.filter.level||"",theme:this.filter.theme||"",status:this.filter.status||""}}},methods:{submit(){this.$inertia.post(route("art_gallery.store"),this.form,{preserveState:!1})},viewArtwork(a){fetch(window.location.origin+"/storage/art_gallery/"+a).then(e=>{e.ok?this.lightbox.src=[window.location.origin+"/storage/art_gallery/"+a]:this.lightbox.src=[window.location.origin+"/images/no_image.jpg"],this.lightbox.open=!this.lightbox.open})},deleteArtwork(a){this.confirmation.route_name="art_gallery.destroy",this.confirmation.id=a,this.confirmation.is_open=!0},findStudents:G(function(a){a&&(this.isLoading=!0,axios.get(route("students.find_digital_art_students"),{params:{keyword:a}}).then(e=>{this.list.students=e.data,this.isLoading=!1}))},1e3),search(){this.$inertia.get(this.route("art_gallery"),this.params,{replace:!0,preserveState:!0})},showFilters(){this.show_filters=!this.show_filters},read(a,e){return new Promise((r,v)=>{if(!a){r();return}Fe.test(a.type)?V?r({loaded:!0,name:a.name,type:a.type,url:V.createObjectURL(a)}):v(new Error("Your browser is not supported.")):v(new Error("Please select a valid image file."))})},changeArtwork({target:a}){const{files:e}=a;e&&e.length>0&&this.read(e[0],a).then(r=>{this.form.artwork.image_url=r.url,this.form.artwork.file=e[0]}).catch(this.alert)},dragoverArtWork(a){a.preventDefault()},dropArtwork(a){const{files:e}=a.dataTransfer;a.preventDefault(),e&&e.length>0&&this.read(e[0],a).then(r=>{this.form.artwork.image_url=r.url,this.form.artwork.file=e[0]}).catch(this.alert)},reselect_image(){this.$refs.artwork_file.value="",this.form.artwork.image_url="",this.form.artwork.file=""}}},Ct=Object.assign(Be,{__name:"Index",setup(a){return(e,r)=>{const v=k("Input"),d=k("Button"),p=k("ComboBox"),_=k("Label"),L=B("debounce");return m(),w($,null,[t(i(A),{title:"Art Gallery"}),t(N,null,{header:o(()=>[]),default:o(()=>[s("div",q,[s("div",x,[s("div",X,[t(i(O),{class:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y(t(v,{type:"text",placeholder:"Search",class:"w-full rounded-lg bg-background pl-8 md:w-[200px] lg:w-[336px]",modelValue:e.params.search,"onUpdate:modelValue":r[0]||(r[0]=l=>e.params.search=l)},null,8,["modelValue"]),[[L,e.search,"800ms"]])]),t(d,{class:"border border-slate-700 border-dashed bg-white text-slate-800 hover:bg-slate-50",onClick:r[1]||(r[1]=l=>e.showFilters())},{default:o(()=>[t(i(z),{class:"h-4 w-4"}),K]),_:1}),t(d,{onClick:r[2]||(r[2]=l=>e.$inertia.get(e.route("art_gallery.setting.levels")))},{default:o(()=>[t(i(J),{class:"h-4 w-4"}),Q]),_:1})]),e.$page.props.can.create_art_gallery?(m(),g(d,{key:0,onClick:r[3]||(r[3]=l=>e.show_add_artwork=!0)},{default:o(()=>[t(i(Y),{class:"h-4 w-4"}),Z]),_:1})):f("",!0)]),e.show_filters?(m(),w("div",ee,[t(p,{canClear:"",items:e.$page.props.levels,"label-property":"name","value-property":"id",onSelect:e.search,modelValue:e.params.level,"onUpdate:modelValue":r[4]||(r[4]=l=>e.params.level=l),"select-placeholder":"Levels","search-placeholder":"Search level..."},null,8,["items","onSelect","modelValue"]),t(p,{canClear:"",items:e.$page.props.themes,"label-property":"name","value-property":"id",onSelect:e.search,modelValue:e.params.theme,"onUpdate:modelValue":r[5]||(r[5]=l=>e.params.theme=l),"select-placeholder":"Themes","search-placeholder":"Search theme..."},null,8,["items","onSelect","modelValue"]),t(p,{canClear:"",items:e.student_status,"label-property":"name","value-property":"id",onSelect:e.search,modelValue:e.params.status,"onUpdate:modelValue":r[6]||(r[6]=l=>e.params.status=l),"select-placeholder":"Status","search-placeholder":"Search status..."},null,8,["items","onSelect","modelValue"]),s("div",te,[t(d,{onClick:r[7]||(r[7]=l=>e.$inertia.get(e.route("art_gallery")))},{default:o(()=>[n("Clear Search")]),_:1})])])):f("",!0),t(P,null,{content:o(()=>[t(i(I),null,{default:o(()=>[t(i(T),{class:"bg-gray-100"},{default:o(()=>[t(i(b),null,{default:o(()=>[t(i(h),null,{default:o(()=>[n("#")]),_:1}),t(i(h),null,{default:o(()=>[n("Name")]),_:1}),t(i(h),null,{default:o(()=>[n("Level")]),_:1}),t(i(h),null,{default:o(()=>[n("Theme")]),_:1}),t(i(h),null,{default:o(()=>[n("Lesson - Title")]),_:1}),t(i(h),null,{default:o(()=>[n("Activity")]),_:1}),t(i(h),{class:"text-center"},{default:o(()=>[n("Action")]),_:1})]),_:1})]),_:1}),t(i(H),null,{default:o(()=>[e.$page.props.arts.data.length?f("",!0):(m(),g(i(b),{key:0},{default:o(()=>[t(i(u),{class:"text-center",colspan:"10"},{default:o(()=>[re]),_:1})]),_:1})),(m(!0),w($,null,j(e.$page.props.arts.data,(l,U)=>(m(),g(i(b),null,{default:o(()=>[t(i(u),null,{default:o(()=>[n(c(e.$page.props.arts.from+U),1)]),_:2},1024),t(i(u),null,{default:o(()=>[n(c(l.student_name),1)]),_:2},1024),t(i(u),null,{default:o(()=>[n(c(l.level),1)]),_:2},1024),t(i(u),null,{default:o(()=>[n(c(l.theme),1)]),_:2},1024),t(i(u),null,{default:o(()=>[n(c(l.lesson),1)]),_:2},1024),t(i(u),null,{default:o(()=>[n(c(l.activity),1)]),_:2},1024),t(i(u),{class:"text-center"},{default:o(()=>[s("div",se,[e.$page.props.can.edit_art_gallery?(m(),g(d,{key:0,variant:"outline",onClick:F=>e.viewArtwork(l.art_file_location)},{default:o(()=>[n("View")]),_:2},1032,["onClick"])):f("",!0),e.$page.props.can.delete_art_gallery?(m(),g(d,{key:1,variant:"destructive",onClick:F=>e.deleteArtwork(l.artwork_id)},{default:o(()=>[n("Delete")]),_:2},1032,["onClick"])):f("",!0)])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),t(R,{page_data:e.$page.props.arts,params:e.params},null,8,["page_data","params"]),t(E,{open:e.confirmation.is_open,onClose:r[8]||(r[8]=l=>e.confirmation.is_open=!1),routeName:e.confirmation.route_name,id:e.confirmation.id},{title:o(()=>[n("Delete Artwork")]),description:o(()=>[n("Are you sure want to delete this artwork?")]),_:1},8,["open","routeName","id"]),t(i(C),{toggler:e.lightbox.open,sources:e.lightbox.src,exitFullscreenOnClose:!0},null,8,["toggler","sources"]),t(M,{open:e.show_add_artwork,"onUpdate:open":r[19]||(r[19]=l=>e.show_add_artwork=l)},{title:o(()=>[n("Add Artwork")]),content:o(()=>[s("div",oe,[s("div",null,[t(_,null,{default:o(()=>[n("Student Name"),le]),_:1}),t(p,{onSearch:e.findStudents,items:e.list.students,"label-property":"name","value-property":"id",error:e.$page.props.errors.student_id,modelValue:e.form.student_id,"onUpdate:modelValue":r[9]||(r[9]=l=>e.form.student_id=l),"select-placeholder":"Enter some characters to search","search-placeholder":"Search student..."},null,8,["onSearch","items","error","modelValue"])]),s("div",null,[t(_,null,{default:o(()=>[n("Level"),ae]),_:1}),t(p,{items:e.list.levels,"label-property":"name","value-property":"id",error:e.$page.props.errors.level_id,modelValue:e.form.level_id,"onUpdate:modelValue":r[10]||(r[10]=l=>e.form.level_id=l),"select-placeholder":"Select Level","search-placeholder":"Search level..."},null,8,["items","error","modelValue"])]),s("div",null,[t(_,null,{default:o(()=>[n("Theme"),ie]),_:1}),t(p,{items:e.list.themes,"label-property":"name","value-property":"id",error:e.$page.props.errors.theme_id,modelValue:e.form.theme_id,"onUpdate:modelValue":r[11]||(r[11]=l=>e.form.theme_id=l),"select-placeholder":"Select Theme","search-placeholder":"Search theme..."},null,8,["items","error","modelValue"])]),s("div",null,[t(_,null,{default:o(()=>[n("Lesson"),ne]),_:1}),t(p,{items:e.list.lessons,"label-property":"name","value-property":"id",error:e.$page.props.errors.lesson_id,modelValue:e.form.lesson_id,"onUpdate:modelValue":r[12]||(r[12]=l=>e.form.lesson_id=l),"select-placeholder":"Select Lesson","search-placeholder":"Search lesson..."},null,8,["items","error","modelValue"])]),s("div",null,[t(_,null,{default:o(()=>[n("Activity"),de]),_:1}),t(p,{items:e.list.activities,"label-property":"name","value-property":"id",error:e.$page.props.errors.activity_id,modelValue:e.form.activity_id,"onUpdate:modelValue":r[13]||(r[13]=l=>e.form.activity_id=l),"select-placeholder":"Select Activity","search-placeholder":"Search activity..."},null,8,["items","error","modelValue"])]),y(s("div",me,[pe,e.$page.props.errors["artwork.file"]?(m(),w("div",ue,[s("div",he,[s("div",fe,[t(i(W),{class:"h-5 w-5 text-red-500","aria-hidden":"true"})]),ce])])):f("",!0),s("div",{class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",onChange:r[14]||(r[14]=(...l)=>e.changeArtwork&&e.changeArtwork(...l)),onDragover:r[15]||(r[15]=(...l)=>e.dragoverArtWork&&e.dragoverArtWork(...l)),onDrop:r[16]||(r[16]=(...l)=>e.dropArtwork&&e.dropArtwork(...l))},[s("div",_e,[ge,s("div",ve,[s("label",we,[n("Click here "),s("input",ke,null,512)]),ye]),be])],32)],512),[[S,e.form.artwork.image_url==""]]),y(s("div",null,[$e,s("div",Se,[s("div",Ve,[s("img",{class:"object-scale-down w-full",src:e.form.artwork.image_url,alt:""},null,8,Ae)]),s("div",Ce,[s("div",Le,[t(d,{onClick:r[17]||(r[17]=l=>e.reselect_image()),title:"Reselect an image"},{default:o(()=>[Ue]),_:1})])])])],512),[[S,e.form.artwork.image_url!=""]])])]),footer:o(()=>[t(d,{variant:"outline",onClick:r[18]||(r[18]=l=>e.show_add_artwork=!1)},{default:o(()=>[n("Cancel")]),_:1}),t(d,{onClick:e.submit},{default:o(()=>[n("Add")]),_:1},8,["onClick"])]),_:1},8,["open"])]),_:1})],64)}}});export{Ct as default};
