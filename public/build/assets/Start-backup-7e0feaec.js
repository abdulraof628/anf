import{B as q}from"./Authenticated-68815c3a.js";import{B as E}from"./Button-fd124d2b.js";import{E as S,R as j,a2 as B,ag as M,z as H,A as K,a1 as Q,G as U,ah as P,Q as G,ai as A,o as m,c as x,a as v,u as T,w as C,F as Z,H as I,L as J,d as o,t as O,g as W,q as X}from"./app-5e15892a.js";import{C as L,B as Y,p as tt,a as et,b as st,c as it,d as at,L as nt}from"./chart-5ca49a30.js";import"./ApplicationLogo-aa48633c.js";import"./XIcon-a5d69647.js";import"./perfect-scrollbar.esm-5c3761bd.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TimeAgo-cdef3f24.js";import"./moment-55cb88ed.js";const $={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},ot={ariaLabel:{type:String},ariaDescribedby:{type:String}},rt={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...$,...ot},lt=M[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function c(e){return A(e)?P(e):e}function dt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return A(t)?new Proxy(e,{}):e}function ct(e,t){const s=e.options;s&&t&&Object.assign(s,t)}function z(e,t){e.labels=t}function N(e,t,s){const n=[];e.datasets=t.map(a=>{const i=e.datasets.find(u=>u[s]===a[s]);return!i||!a.data||n.includes(i)?{...a}:(n.push(i),Object.assign(i,a),i)})}function ut(e,t){const s={labels:[],datasets:[]};return z(s,e.labels),N(s,e.datasets,t),s}const ht=S({props:rt,setup(e,t){let{expose:s,slots:n}=t;const a=H(null),i=j(null);s({chart:i});const u=()=>{if(!a.value)return;const{type:r,data:g,options:f,plugins:_,datasetIdKey:w}=e,b=ut(g,w),l=dt(b,g);i.value=new L(a.value,{type:r,data:l,options:{...f},plugins:_})},h=()=>{const r=P(i.value);r&&(e.destroyDelay>0?setTimeout(()=>{r.destroy(),i.value=null},e.destroyDelay):(r.destroy(),i.value=null))},F=r=>{r.update(e.updateMode)};return K(u),Q(h),U([()=>e.options,()=>e.data],(r,g)=>{let[f,_]=r,[w,b]=g;const l=P(i.value);if(!l)return;let y=!1;if(f){const d=c(f),D=c(w);d&&d!==D&&(ct(l,d),y=!0)}if(_){const d=c(_.labels),D=c(b.labels),k=c(_.datasets),V=c(b.datasets);d!==D&&(z(l.config.data,d),y=!0),k&&k!==V&&(N(l.config.data,k,e.datasetIdKey),y=!0)}y&&G(()=>{F(l)})},{deep:!0}),()=>B("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:a},[B("p",{},[n.default?n.default():""])])}});function _t(e,t){return L.register(t),S({props:$,setup(s,n){let{expose:a}=n;const i=j(null),u=h=>{i.value=h==null?void 0:h.chart};return a({chart:i}),()=>B(ht,lt({ref:u},{type:e,...s}))}})}const R=_t("bar",Y),pt={class:"py-6 px-6"},gt={class:"overflow-x-auto"},ft={key:0,class:"inline-block min-w-full py-12 px-36 shadow-md bg-white rounded text-center"},bt={class:"text-2xl font-bold capitalize leading-loose"},yt={class:"py-4"},mt={class:"pt-6"},xt={key:1,class:"inline-block min-w-full p-12 shadow-md bg-white rounded text-center"},vt={class:"px-6 pb-8"},wt={class:"text-3xl font-bold uppercase"},Dt={key:0,class:"px-6 pb-8"},kt={class:"font-bold uppercase italic text-red-500"},Ct={class:"flex flex-col place-items-center"},Ot=["src"],Bt={class:"flex flex-row justify-between pt-4 w-1/2 space-x-2"};L.register(tt,et,st,it,at,nt);var p=[];const Pt=S({components:{Head:I,Link:J,Bar:R},props:{diagnostic_test_list:Object,diagnostic_test_categories_label:Object,diagnostic_test_categories:Object,result:Object,result_score:String},data(){return{count:1,index:0,score:0,final_score:"",chartData:{labels:this.diagnostic_test_categories_label?this.diagnostic_test_categories_label:[],datasets:[{label:"Score",backgroundColor:"#f87979",data:this.final_data?this.final_data:[],barThickness:100,yAxisID:"y"}]},chartOptions:{responsive:!0,maintainAspectRatio:!1,scales:{y:{min:0,max:10,stepSize:1,ticks:{beginAtZero:!0}}}}}},watch:{final_score:{handler(){this.$inertia.get(route("diagnostic_test.run"),{final_score:this.final_score,dt_id:this.$page.props.dt_id})}}},methods:{nextTrue(){var e=this.diagnostic_test_list[this.index].category_id;if(this.diagnostic_test_categories[e]){var t=this.diagnostic_test_categories[e];this.diagnostic_test_categories_label.filter(function(n,a){n==t?p[a]+=1:p[a]||(p[a]=0)})}if(this.diagnostic_test_list[this.index].redirect_yes_id!=null){var s=0;const n=this.diagnostic_test_list[this.index].redirect_yes_id;this.diagnostic_test_list.filter(function(a,i){a.id==n&&(s=i)}),this.index=s,this.score+=1,this.count+=1}else this.diagnostic_test_list[this.index+1]?(this.index++,this.score+=1,this.count+=1):this.diagnostic_test_list[this.index]&&(this.count+1,this.final_score=this.final_score==null?0:this.score+1)},nextFalse(){if(this.diagnostic_test_list[this.index].redirect_no_id!=null){var e=0;const t=this.diagnostic_test_list[this.index].redirect_no_id;this.diagnostic_test_list.filter(function(s,n){s.id==t&&(e=n)}),this.index=e,this.count+=1}else this.diagnostic_test_list[this.index+1]?(this.index++,this.count+=1):this.diagnostic_test_list[this.index]&&(this.count+1,this.final_score=this.final_score==null?0:this.score+0)},restartDT(){p=[],this.$inertia.get(route("diagnostic_test"))},chartInit(){this.diagnostic_test_categories_label.filter(function(e,t){p[t]=0})}},mounted(){this.result_score==""&&this.chartInit()}}),Ft=Object.assign(Pt,{__name:"Start-backup",setup(e){return(t,s)=>(m(),x(Z,null,[v(T(I),{title:"Diagnostic Test"}),v(q,null,{header:C(()=>[]),default:C(()=>[o("div",pt,[o("div",gt,[t.result_score!=""?(m(),x("div",ft,[o("span",bt,O(t.result.message),1),o("div",yt,[v(T(R),{"chart-options":t.chartOptions,"chart-data":t.chartData,width:100,height:500},null,8,["chart-options","chart-data"])]),o("div",mt,[v(E,{class:"px-6 py-2 bg-indigo-500 hover:bg-indigo-600 rounded text-white shadow-md",onClick:t.restartDT},{default:C(()=>[W("Re-run Diagnostic Test")]),_:1},8,["onClick"])])])):(m(),x("div",xt,[o("div",vt,[o("span",wt,"Question "+O(t.count),1)]),t.diagnostic_test_list[t.index].remarks?(m(),x("div",Dt,[o("span",kt,"* "+O(t.diagnostic_test_list[t.index].remarks)+" *",1)])):X("",!0),o("div",Ct,[o("img",{src:"/storage/"+t.diagnostic_test_list[t.index].image_location,class:"select-none w-1/2 h-1/3 bg-green-200 rounded-lg",alt:""},null,8,Ot),o("div",Bt,[o("button",{class:"grow uppercase px-32 py-6 bg-blue-500 hover:bg-blue-600 rounded text-white text-lg font-extrabold shadow-md",onClick:s[0]||(s[0]=n=>t.nextTrue(t.diagnostic_test_list[t.index].id))},"1"),o("button",{class:"grow uppercase px-32 py-6 bg-red-500 hover:bg-red-600 rounded text-white text-lg font-extrabold shadow-md",onClick:s[1]||(s[1]=n=>t.nextFalse(t.diagnostic_test_list[t.index].id))},"0")])])]))])])]),_:1})],64))}});export{Ft as default};
