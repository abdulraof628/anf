import{x as f,v as a,u as l,O as t,F as y,b7 as w,b8 as B,q as c,y as r,z as $,U as p,J as m,B as v,t as C,I as k,bx as V}from"./@vue-39dc9ff3.js";import{B as F}from"./Authenticated-862af612.js";import{H as A,L as U}from"./@inertiajs-2b766590.js";import{_ as S}from"./index-137b05ab.js";import{_ as L}from"./DialogModal-d9c0b6d9.js";import{a as N}from"./axios-1779699b.js";import{_ as j}from"./Card-e1e522a8.js";import{_ as D,a as I,b as x,c as b,d as E,e as g}from"./TableRow-2682b32d.js";import{P as O}from"./Pagination-8b8ac40e.js";import{a as z}from"./@radix-icons-9ff33614.js";import{F as H}from"./lucide-vue-next-7b48dc26.js";import"./ApplicationLogo-5cf6e77e.js";import"./radix-vue-a603168c.js";import"./@floating-ui-c05b1c1f.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-52f2569e.js";import"./clsx-1229b3e0.js";import"./app-31ea0dbe.js";import"./pusher-js-68b5c933.js";import"./@vueform-8fb84cf1.js";import"./@vuepic-a83e4355.js";import"./@babel-1b80a44a.js";import"./cropperjs-042b647f.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-e9930861.js";import"./tailwind-merge-3f7ff3b1.js";import"./@vueuse-c14271ca.js";import"./lodash.isequal-0acc53e7.js";import"./vue-46d666fa.js";import"./lodash.clonedeep-12c784b4.js";import"./qs-45a3326f.js";import"./side-channel-401220dd.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-ac0241aa.js";import"./deepmerge-89e33937.js";import"./nprogress-87ee1729.js";const J={class:"flex items-center justify-between"},T={class:"flex justify-between space-x-2"},q={class:"relative"},M=r("span",{class:"ml-1 hidden sm:block"},"Filters",-1),R={key:0,class:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-5 gap-2"},G={key:0},K={key:0},Q={class:""},W=r("div",{class:"p-3"}," No Record Found ",-1),X={class:"flex space-x-1"},Y={class:"flex justify-center space-x-2"},Z={class:"w-full"},ee=r("thead",null,[r("tr",{class:"bg-slate-200"},[r("th",{class:"px-3 py-1 border w-6/12 text-sm text-left"},"Unit"),r("th",{class:"px-3 py-1 border w-3/12 text-sm text-center"},"Pre"),r("th",{class:"px-3 py-1 border w-3/12 text-sm text-center"},"Post")])],-1),se={class:"px-3 py-0.5 whitespace-nowrap text-sm"},te={class:"px-3 py-0.5 text-center"},ae=["value","onChange"],re={class:"px-3 py-0.5 text-center"},oe=["value","onChange"],le=r("td",{class:"px-3 py-0.5 whitespace-nowrap text-sm"},"Final Assessment",-1),ne={class:"px-3 py-0.5 text-center"},pe={class:"px-3 py-0.5 text-center"},ie={components:{Head:A,Link:U},data(){return{show_filters:!1,show_assessment_modal:!1,params:{search:this.$page.props.filter.search?this.$page.props.filter.search:"",centre_id:this.$page.props.filter.centre_id?this.$page.props.filter.centre_id:"",programme_id:this.$page.props.filter.programme_id?this.$page.props.filter.programme_id:"",level:this.$page.props.filter.level?this.$page.props.filter.level:""},units:[],form:{student_id:"",programme_level_fee_id:"",assessments:[],final_pre_score:"",final_post_score:""}}},methods:{addClass(n){this.$inertia.get(this.route("assessments.create"),{centre_id:n})},editAssessment(n,e){this.form.assessments=[],N.get(route("assessments.create",n)).then(o=>{this.units=o.data,this.form.student_id=this.$page.props.assessments.data[e].student_id,this.form.programme_level_fee_id=this.$page.props.assessments.data[e].programme_level_fee_id,this.form.final_pre_score=this.$page.props.assessments.data[e].final_pre_score,this.form.final_post_score=this.$page.props.assessments.data[e].final_post_score;const _=JSON.parse(this.$page.props.assessments.data[e].assessments);this.units.map(i=>{this.form.assessments.push({unit_id:i.id,unit_name:i.name,pre:_&&_.find(d=>d.unit_id==i.id).pre?_.find(d=>d.unit_id==i.id).pre:"",post:_&&_.find(d=>d.unit_id==i.id).post?_.find(d=>d.unit_id==i.id).post:""})}),this.show_assessment_modal=!0})},submit(){this.$inertia.post(this.route("assessments.store"),this.form,{preserveState:!1})},search(){this.$inertia.get(this.route("assessments"),this.params,{replace:!0,preserveState:!0})},getAssessmentPre(n){var e;return((e=this.form.assessments[n])==null?void 0:e.pre)||""},setAssessmentPre(n,e){this.form.assessments[n]&&(this.form.assessments[n].pre=e)},getAssessmentPost(n){var e;return((e=this.form.assessments[n])==null?void 0:e.post)||""},setAssessmentPost(n,e){this.form.assessments[n]&&(this.form.assessments[n].post=e)},showFilters(){this.show_filters=!this.show_filters}}},rs=Object.assign(ie,{__name:"Index",setup(n){return(e,o)=>{const _=w("Input"),i=w("Button"),d=w("ComboBox"),P=B("debounce");return c(),f(y,null,[a(l(A),{title:"Assessments"}),a(F,null,{header:t(()=>[]),default:t(()=>[r("div",J,[r("div",T,[r("div",q,[a(l(z),{class:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),$(a(_,{type:"text",placeholder:"Search",class:"w-full rounded-lg bg-background pl-8 md:w-[200px] lg:w-[336px]",modelValue:e.params.search,"onUpdate:modelValue":o[0]||(o[0]=s=>e.params.search=s)},null,8,["modelValue"]),[[P,e.search,"800ms"]])]),a(i,{class:"border border-slate-700 border-dashed bg-white text-slate-800 hover:bg-slate-50",onClick:o[1]||(o[1]=s=>e.showFilters())},{default:t(()=>[a(l(H),{class:"h-4 w-4"}),M]),_:1})])]),e.show_filters?(c(),f("div",R,[a(d,{items:e.$page.props.allowed_centres,"label-property":"label","value-property":"ID",onSelect:e.search,modelValue:e.params.centre_id,"onUpdate:modelValue":o[2]||(o[2]=s=>e.params.centre_id=s),"select-placeholder":"Centres","search-placeholder":"Search centre..."},null,8,["items","onSelect","modelValue"]),a(d,{canClear:"",items:e.$page.props.options.programmes,"label-property":"name","value-property":"id",onSelect:e.search,modelValue:e.params.programme_id,"onUpdate:modelValue":o[3]||(o[3]=s=>e.params.programme_id=s),"select-placeholder":"Programmes","search-placeholder":"Search programme..."},{label:t(({item:s})=>[p(m(s.name)+" ("+m(s.country_name)+") ",1)]),"label-content":t(({selectedItem:s,selectedItems:u,multiple:h})=>[s?(c(),f("span",G,m(s.name)+" ("+m(s.country_name)+")",1)):v("",!0)]),_:1},8,["items","onSelect","modelValue"]),a(d,{canClear:"",items:e.$page.props.options.levels,"label-property":"level","value-property":"level",onSelect:e.search,modelValue:e.params.level,"onUpdate:modelValue":o[4]||(o[4]=s=>e.params.level=s),"select-placeholder":"Level","search-placeholder":"Search level..."},{label:t(({item:s})=>[p(" Level "+m(s.level),1)]),"label-content":t(({selectedItem:s,selectedItems:u,multiple:h})=>[s?(c(),f("span",K,"Level "+m(s.level),1)):v("",!0)]),_:1},8,["items","onSelect","modelValue"]),r("div",Q,[a(i,{onClick:o[5]||(o[5]=s=>e.$inertia.get(e.route("assessments")))},{default:t(()=>[p("Clear Search")]),_:1})])])):v("",!0),a(j,null,{content:t(()=>[a(l(D),null,{default:t(()=>[a(l(I),{class:"bg-gray-100"},{default:t(()=>[a(l(x),null,{default:t(()=>[a(l(b),null,{default:t(()=>[p("#")]),_:1}),a(l(b),null,{default:t(()=>[p("Name")]),_:1}),a(l(b),null,{default:t(()=>[p("Centre")]),_:1}),a(l(b),{class:"text-center"},{default:t(()=>[p("Action")]),_:1})]),_:1})]),_:1}),a(l(E),null,{default:t(()=>[e.$page.props.assessments.data.length?v("",!0):(c(),C(l(x),{key:0},{default:t(()=>[a(l(g),{class:"text-center",colspan:"10"},{default:t(()=>[W]),_:1})]),_:1})),(c(!0),f(y,null,k(e.$page.props.assessments.data,(s,u)=>(c(),C(l(x),null,{default:t(()=>[a(l(g),null,{default:t(()=>[p(m(e.$page.props.assessments.from+u),1)]),_:2},1024),a(l(g),null,{default:t(()=>[p(m(s.student_name)+" ",1),r("div",X,[a(l(S),null,{default:t(()=>[r("span",null,m(s.programme_name),1)]),_:2},1024),a(l(S),{variant:"outline"},{default:t(()=>[r("span",null,"Level "+m(s.programme_level),1)]),_:2},1024)])]),_:2},1024),a(l(g),null,{default:t(()=>[p(m(s.centre_name),1)]),_:2},1024),a(l(g),{class:"text-center"},{default:t(()=>[r("div",Y,[a(i,{variant:"outline",onClick:h=>e.editAssessment(s.programme_level,u)},{default:t(()=>[p("Edit")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),a(O,{page_data:e.$page.props.assessments,params:e.params},null,8,["page_data","params"]),a(L,{open:e.show_assessment_modal,"onUpdate:open":o[9]||(o[9]=s=>e.show_assessment_modal=s)},{title:t(()=>[p("Edit Assessment")]),content:t(()=>[r("table",Z,[ee,r("tbody",null,[(c(!0),f(y,null,k(e.units,(s,u)=>(c(),f("tr",{key:s.id},[r("td",se,m(s.name),1),r("td",te,[r("input",{class:"min-w-20 px-2 h-7 w-full border text-center text-xs rounded placeholder:text-gray-400 outline-black",type:"text",placeholder:"score",value:e.getAssessmentPre(u),onChange:h=>e.setAssessmentPre(u,h.target.value)},null,40,ae)]),r("td",re,[r("input",{class:"min-w-20 px-2 h-7 w-full border text-center text-xs rounded placeholder:text-gray-400 outline-black",type:"text",placeholder:"score",value:e.getAssessmentPost(u),onChange:h=>e.setAssessmentPost(u,h.target.value)},null,40,oe)])]))),128)),r("tr",null,[le,r("td",ne,[$(r("input",{class:"min-w-20 px-2 h-7 w-full border text-center text-xs rounded placeholder:text-gray-400 outline-black",type:"text",placeholder:"score","onUpdate:modelValue":o[6]||(o[6]=s=>e.form.final_pre_score=s)},null,512),[[V,e.form.final_pre_score]])]),r("td",pe,[$(r("input",{class:"min-w-20 px-2 h-7 w-full border text-center text-xs rounded placeholder:text-gray-400 outline-black",type:"text",placeholder:"score","onUpdate:modelValue":o[7]||(o[7]=s=>e.form.final_post_score=s)},null,512),[[V,e.form.final_post_score]])])])])])]),footer:t(()=>[a(i,{variant:"outline",onClick:o[8]||(o[8]=s=>e.show_assessment_modal=!1)},{default:t(()=>[p("Cancel")]),_:1}),a(i,{onClick:e.submit},{default:t(()=>[p("Save")]),_:1},8,["onClick"])]),_:1},8,["open"])]),_:1})],64)}}});export{rs as default};
