import{_ as w}from"./Authenticated-923581f9.js";import{o as r,c as a,a as c,u as m,d as t,t as l,w as u,F as f,b as x,H as y,n as p,q as d,e as k,g as _}from"./app-b0ada57f.js";import{s as g}from"./simplebar.min-1026533b.js";import{h as $}from"./moment-a9aaa855.js";import"./XIcon-72ef4a27.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./transition-180dc3ab.js";import"./keyboard-462b33c7.js";import"./use-resolve-button-type-59535012.js";import"./menu-8c4ddc7d.js";const F={class:"fixed w-full flex justify-center top-[4rem] md:top-[10rem] font-extrabold bg-white border border-gray-300 py-3 z-20"},C={class:"max-w-xl mx-auto border shadow bg-white rounded-lg px-4 mt-14"},N={class:"flex justify-evenly sm:justify-center space-x-8 md:space-x-10 pt-3 pb-4 font-medium"},j=t("img",{src:"/images/parents/stories.png",class:"w-10 h-10",alt:""},null,-1),I=t("span",{class:"text-sm"},"Stories",-1),S=[j,I],B=t("img",{src:"/images/parents/progress_report.png",class:"w-10 h-10",alt:""},null,-1),D=t("span",{class:"text-sm"},"Progress Reports",-1),V=[B,D],z=t("img",{src:"/images/parents/fee_invoice.png",class:"w-10 h-10",alt:""},null,-1),A=t("span",{class:"text-sm"},"Invoices",-1),E=[z,A],M=t("img",{src:"/images/parents/art_gallery.png",class:"w-10 h-10",alt:""},null,-1),H=t("span",{class:"text-sm"},"Art Gallery",-1),L=[M,H],O=t("img",{src:"/images/parents/art_book.png",class:"w-10 h-10",alt:""},null,-1),P=t("span",{class:"text-sm"},"Art Book",-1),R=[O,P],U={class:"max-w-xl mx-auto mt-10"},G={key:0,class:"flex items-center space-y-3"},J=t("h2",{class:"text-lg md:text-xl mx-1 font-extrabold"},"Invoices",-1),T=[J],q={key:1,class:"flex justify-center mx-1 mt-10"},K=t("span",{class:"text-slate-500"},"No Invoices Found",-1),Y=[K],Q={class:"mt-3"},W={class:"bg-white shadow rounded-lg border"},X={class:"divide-y divide-slate-200 dark:divide-zink-500 px-6 py-4"},Z={class:"flex items-center gap-3 py-2 first:pt-0 last:pb-0"},ee={class:"grow"},te={class:"font-bold text-sm"},se={class:"font-semibold text-blue-700"},oe={class:"text-slate-500 text-sm font-medium"},re={class:"text-sm font-medium"},ae={class:"shrink-0"},ne=["href"],ie=["onClick"],le={components:{simplebar:g},data(){return{open_modal:!1,generating:[],invoice_data:{parent_name:"",parent_address:"No 27, Jalan Kap Empat, 17/17D, Seksyen 17, Shah Alam",invoice_number:"",invoice_items:[],date_issued:"",due_date:"",total_amount:""}}},methods:{viewInvoice(n,e){this.generating[e]||(this.generating[e]=!0,x.get(route("fee.invoices.generate"),{responseType:"blob",params:{invoice_id:n}}).then(o=>{const s=new Blob([o.data],{type:"application/pdf"}),i=URL.createObjectURL(s);window.open(i,"_blank"),this.generating[e]=!1}).catch(o=>{console.error("Error fetching PDF:",o),this.generating[e]=!1}))},totalFee(n){let e=0;const o=JSON.parse(n);for(const s of o){const i=parseFloat(s.programme_fee),h=parseFloat(s.programme_fee_discount),v=parseFloat(s.material_fee),b=parseFloat(s.material_fee_discount);e+=i-h,s.include_material_fee&&(e+=v-b)}return e},pay(n){window.location.href="https://www.billplz-sandbox.com/bills/"+n}},mounted(){this.$page.props.invoices.forEach(n=>{this.generating.push(!1)})}},be=Object.assign(le,{__name:"Invoices",setup(n){return(e,o)=>(r(),a(f,null,[c(m(y),{title:"Home"}),t("div",F,[t("span",null,l(e.$page.props.session_data.current_active_programme.name),1)]),c(w,null,{default:u(()=>[t("div",C,[c(m(g),{"data-simplebar-auto-hide":"true"},{default:u(()=>[t("div",N,[t("div",{class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.stories")?"font-extrabold":""]),onClick:o[0]||(o[0]=s=>e.$inertia.get(e.route("parent.stories",e.$page.props.session_data.current_active_programme.encrypted_id)))},S,2),t("div",{class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.progress_reports")?"font-extrabold":""]),onClick:o[1]||(o[1]=s=>e.$inertia.get(e.route("parent.progress_reports")))},V,2),t("div",{class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.invoices")?"font-extrabold":""]),onClick:o[2]||(o[2]=s=>e.$inertia.get(e.route("parent.invoices")))},E,2),e.$page.props.session_data.current_active_programme.id==3||e.$page.props.session_data.current_active_programme.id==5?(r(),a("div",{key:0,class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.art_gallery")?"font-extrabold":""]),onClick:o[3]||(o[3]=s=>e.$inertia.get(e.route("parent.art_gallery")))},L,2)):d("",!0),e.$page.props.session_data.current_active_programme.id==3||e.$page.props.session_data.current_active_programme.id==5?(r(),a("div",{key:1,class:p(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.art_book")?"font-extrabold":""]),onClick:o[4]||(o[4]=s=>e.$inertia.get(e.route("parent.art_book")))},R,2)):d("",!0)])]),_:1})]),t("div",U,[e.$page.props.invoices.length?(r(),a("div",G,T)):d("",!0),e.$page.props.invoices.length?d("",!0):(r(),a("div",q,Y)),t("div",Q,[t("div",W,[c(m(g),{"data-simplebar-auto-hide":"true",class:"max-h-screen"},{default:u(()=>[t("ul",X,[(r(!0),a(f,null,k(e.$page.props.invoices,(s,i)=>(r(),a("li",Z,[t("div",ee,[t("h6",te,[_(l(m($)(s.due_date).format("MMMM Y"))+" (",1),t("span",se,l(s.invoice_number),1),_(")")]),t("p",oe,"Amount: "+l(s.amount),1),t("p",re,[_("Status: "),t("span",{class:p([s.status_text_color])},l(s.status),3)])]),t("div",ae,[s.status_id==1?(r(),a("a",{key:0,href:s.payment_url,class:"text-sm cursor-pointer font-medium px-3 py-1 text-indigo-600 rounded bg-indigo-100 hover:bg-indigo-200 hover:rounded whitespace-nowrap"},"Pay Now",8,ne)):d("",!0),s.status_id==2?(r(),a("a",{key:1,class:"text-sm cursor-pointer font-medium px-3 py-1 text-blue-600 bg-blue-100 hover:bg-blue-200 rounded whitespace-nowrap",onClick:h=>e.generating[i]?"":e.viewInvoice(s.id,i)},l(e.generating[i]?"Generating...":"View"),9,ie)):d("",!0)])]))),256))])]),_:1})])])])]),_:1})],64))}});export{be as default};
