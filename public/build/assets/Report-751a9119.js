import{Z as $e,o as j,c as U,a as Le,u as Oe,d,h as ye,m as _e,t as B,F as fe,e as xe,q as Ue,w as Fe,p as Ne,H as Ae,L as ze,b as We,G as Ve,g as ve}from"./app-03d1fa53.js";import{B as He}from"./Button-aa88ca77.js";import{r as Ge}from"./PencilIcon-49a0e434.js";import{r as Xe}from"./SearchIcon-3de34941.js";import{r as qe}from"./TrashIcon-ad503913.js";import"./toggle-e16186cf.js";import{C as Ze}from"./ConfirmationModal-bf737cc3.js";import{P as Ye}from"./Pagination-da939ac5.js";import{h as be}from"./moment-fbc5633a.js";import{s as Je}from"./multiselect-e7ed5e46.js";import"./auto-65a5f8f0.js";import{m as ie,t as Ke,e as A,f as Qe,g as et,v as tt,h as Ce,i as re,A as rt,P as at,c as nt,j as it,k as ot,C as we}from"./chart-30d8fb54.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./transition-3a30f739.js";import"./use-outside-click-d2346c48.js";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Pe=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),ae={toTextLines:function(t){var a=[],e;for(t=[].concat(t);t.length;)e=t.pop(),typeof e=="string"?a.unshift.apply(a,e.split(`
`)):Array.isArray(e)?t.push.apply(t,e):re(t)||a.unshift(""+e);return a},textSize:function(t,a,e){var r=[].concat(a),n=r.length,i=t.font,o=0,s;for(t.font=e.string,s=0;s<n;++s)o=Math.max(t.measureText(r[s]).width,o);return t.font=i,{height:n*e.lineHeight,width:o}},bound:function(t,a,e){return Math.max(t,Math.min(a,e))},arrayDiff:function(t,a){var e=t.slice(),r=[],n,i,o,s;for(n=0,o=a.length;n<o;++n)s=a[n],i=e.indexOf(s),i===-1?r.push([s,1]):e.splice(i,1);for(n=0,o=e.length;n<o;++n)r.push([e[n],-1]);return r},rasterize:function(t){return Math.round(t*Pe)/Pe}};function pe(t,a){var e=a.x,r=a.y;if(e===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var n=t.x-e,i=t.y-r,o=Math.sqrt(n*n+i*i);return{x:o?n/o:0,y:o?i/o:-1}}function st(t,a,e,r,n){switch(n){case"center":e=r=0;break;case"bottom":e=0,r=1;break;case"right":e=1,r=0;break;case"left":e=-1,r=0;break;case"top":e=0,r=-1;break;case"start":e=-e,r=-r;break;case"end":break;default:n*=Math.PI/180,e=Math.cos(n),r=Math.sin(n);break}return{x:t,y:a,vx:e,vy:r}}var lt=0,Ee=1,Te=2,Se=4,Me=8;function se(t,a,e){var r=lt;return t<e.left?r|=Ee:t>e.right&&(r|=Te),a<e.top?r|=Me:a>e.bottom&&(r|=Se),r}function ct(t,a){for(var e=t.x0,r=t.y0,n=t.x1,i=t.y1,o=se(e,r,a),s=se(n,i,a),l,c,f;!(!(o|s)||o&s);)l=o||s,l&Me?(c=e+(n-e)*(a.top-r)/(i-r),f=a.top):l&Se?(c=e+(n-e)*(a.bottom-r)/(i-r),f=a.bottom):l&Te?(f=r+(i-r)*(a.right-e)/(n-e),c=a.right):l&Ee&&(f=r+(i-r)*(a.left-e)/(n-e),c=a.left),l===o?(e=c,r=f,o=se(e,r,a)):(n=c,i=f,s=se(n,i,a));return{x0:e,x1:n,y0:r,y1:i}}function le(t,a){var e=a.anchor,r=t,n,i;return a.clamp&&(r=ct(r,a.area)),e==="start"?(n=r.x0,i=r.y0):e==="end"?(n=r.x1,i=r.y1):(n=(r.x0+r.x1)/2,i=(r.y0+r.y1)/2),st(n,i,t.vx,t.vy,a.align)}var ce={arc:function(t,a){var e=(t.startAngle+t.endAngle)/2,r=Math.cos(e),n=Math.sin(e),i=t.innerRadius,o=t.outerRadius;return le({x0:t.x+r*i,y0:t.y+n*i,x1:t.x+r*o,y1:t.y+n*o,vx:r,vy:n},a)},point:function(t,a){var e=pe(t,a.origin),r=e.x*t.options.radius,n=e.y*t.options.radius;return le({x0:t.x-r,y0:t.y-n,x1:t.x+r,y1:t.y+n,vx:e.x,vy:e.y},a)},bar:function(t,a){var e=pe(t,a.origin),r=t.x,n=t.y,i=0,o=0;return t.horizontal?(r=Math.min(t.x,t.base),i=Math.abs(t.base-t.x)):(n=Math.min(t.y,t.base),o=Math.abs(t.base-t.y)),le({x0:r,y0:n+o,x1:r+i,y1:n,vx:e.x,vy:e.y},a)},fallback:function(t,a){var e=pe(t,a.origin);return le({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:e.x,vy:e.y},a)}},H=ae.rasterize;function dt(t){var a=t.borderWidth||0,e=t.padding,r=t.size.height,n=t.size.width,i=-n/2,o=-r/2;return{frame:{x:i-e.left-a,y:o-e.top-a,w:n+e.width+a*2,h:r+e.height+a*2},text:{x:i,y:o,w:n,h:r}}}function ut(t,a){var e=a.chart.getDatasetMeta(a.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var r=e.getBasePixel();return t.horizontal?{x:r,y:null}:{x:null,y:r}}function ht(t){return t instanceof rt?ce.arc:t instanceof at?ce.point:t instanceof nt?ce.bar:ce.fallback}function ft(t,a,e,r,n,i){var o=Math.PI/2;if(i){var s=Math.min(i,n/2,r/2),l=a+s,c=e+s,f=a+r-s,b=e+n-s;t.moveTo(a,c),l<f&&c<b?(t.arc(l,c,s,-Math.PI,-o),t.arc(f,c,s,-o,0),t.arc(f,b,s,0,o),t.arc(l,b,s,o,Math.PI)):l<f?(t.moveTo(l,e),t.arc(f,c,s,-o,o),t.arc(l,c,s,o,Math.PI+o)):c<b?(t.arc(l,c,s,-Math.PI,0),t.arc(l,b,s,0,Math.PI)):t.arc(l,c,s,-Math.PI,Math.PI),t.closePath(),t.moveTo(a,e)}else t.rect(a,e,r,n)}function vt(t,a,e){var r=e.backgroundColor,n=e.borderColor,i=e.borderWidth;!r&&(!n||!i)||(t.beginPath(),ft(t,H(a.x)+i/2,H(a.y)+i/2,H(a.w)-i,H(a.h)-i,e.borderRadius),t.closePath(),r&&(t.fillStyle=r,t.fill()),n&&i&&(t.strokeStyle=n,t.lineWidth=i,t.lineJoin="miter",t.stroke()))}function pt(t,a,e){var r=e.lineHeight,n=t.w,i=t.x,o=t.y+r/2;return a==="center"?i+=n/2:(a==="end"||a==="right")&&(i+=n),{h:r,w:n,x:i,y:o}}function mt(t,a,e){var r=t.shadowBlur,n=e.stroked,i=H(e.x),o=H(e.y),s=H(e.w);n&&t.strokeText(a,i,o,s),e.filled&&(r&&n&&(t.shadowBlur=0),t.fillText(a,i,o,s),r&&n&&(t.shadowBlur=r))}function gt(t,a,e,r){var n=r.textAlign,i=r.color,o=!!i,s=r.font,l=a.length,c=r.textStrokeColor,f=r.textStrokeWidth,b=c&&f,M;if(!(!l||!o&&!b))for(e=pt(e,n,s),t.font=s.string,t.textAlign=n,t.textBaseline="middle",t.shadowBlur=r.textShadowBlur,t.shadowColor=r.textShadowColor,o&&(t.fillStyle=i),b&&(t.lineJoin="round",t.lineWidth=f,t.strokeStyle=c),M=0,l=a.length;M<l;++M)mt(t,a[M],{stroked:b,filled:o,w:e.w,x:e.x,y:e.y+e.h*M})}var Ie=function(t,a,e,r){var n=this;n._config=t,n._index=r,n._model=null,n._rects=null,n._ctx=a,n._el=e};ie(Ie.prototype,{_modelize:function(t,a,e,r){var n=this,i=n._index,o=Ke(A([e.font,{}],r,i)),s=A([e.color,Qe.color],r,i);return{align:A([e.align,"center"],r,i),anchor:A([e.anchor,"center"],r,i),area:r.chart.chartArea,backgroundColor:A([e.backgroundColor,null],r,i),borderColor:A([e.borderColor,null],r,i),borderRadius:A([e.borderRadius,0],r,i),borderWidth:A([e.borderWidth,0],r,i),clamp:A([e.clamp,!1],r,i),clip:A([e.clip,!1],r,i),color:s,display:t,font:o,lines:a,offset:A([e.offset,4],r,i),opacity:A([e.opacity,1],r,i),origin:ut(n._el,r),padding:et(A([e.padding,4],r,i)),positioner:ht(n._el),rotation:A([e.rotation,0],r,i)*(Math.PI/180),size:ae.textSize(n._ctx,a,o),textAlign:A([e.textAlign,"start"],r,i),textShadowBlur:A([e.textShadowBlur,0],r,i),textShadowColor:A([e.textShadowColor,s],r,i),textStrokeColor:A([e.textStrokeColor,s],r,i),textStrokeWidth:A([e.textStrokeWidth,0],r,i)}},update:function(t){var a=this,e=null,r=null,n=a._index,i=a._config,o,s,l,c=A([i.display,!0],t,n);c&&(o=t.dataset.data[n],s=tt(Ce(i.formatter,[o,t]),o),l=re(s)?[]:ae.toTextLines(s),l.length&&(e=a._modelize(c,l,i,t),r=dt(e))),a._model=e,a._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,a){var e=this,r=t.ctx,n=e._model,i=e._rects,o;this.visible()&&(r.save(),n.clip&&(o=n.area,r.beginPath(),r.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),r.clip()),r.globalAlpha=ae.bound(0,n.opacity,1),r.translate(H(a.x),H(a.y)),r.rotate(n.rotation),vt(r,i.frame,n),gt(r,n.lines,i.text,n),r.restore())}});var yt=Number.MIN_SAFE_INTEGER||-9007199254740991,_t=Number.MAX_SAFE_INTEGER||9007199254740991;function te(t,a,e){var r=Math.cos(e),n=Math.sin(e),i=a.x,o=a.y;return{x:i+r*(t.x-i)-n*(t.y-o),y:o+n*(t.x-i)+r*(t.y-o)}}function ke(t,a){var e=_t,r=yt,n=a.origin,i,o,s,l,c;for(i=0;i<t.length;++i)o=t[i],s=o.x-n.x,l=o.y-n.y,c=a.vx*s+a.vy*l,e=Math.min(e,c),r=Math.max(r,c);return{min:e,max:r}}function de(t,a){var e=a.x-t.x,r=a.y-t.y,n=Math.sqrt(e*e+r*r);return{vx:(a.x-t.x)/n,vy:(a.y-t.y)/n,origin:t,ln:n}}var Be=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};ie(Be.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,a,e){this._rotation=e,this._rect={x:a.x+t.x,y:a.y+t.y,w:a.w,h:a.h}},contains:function(t){var a=this,e=1,r=a._rect;return t=te(t,a.center(),-a._rotation),!(t.x<r.x-e||t.y<r.y-e||t.x>r.x+r.w+e*2||t.y>r.y+r.h+e*2)},intersects:function(t){var a=this._points(),e=t._points(),r=[de(a[0],a[1]),de(a[0],a[3])],n,i,o;for(this._rotation!==t._rotation&&r.push(de(e[0],e[1]),de(e[0],e[3])),n=0;n<r.length;++n)if(i=ke(a,r[n]),o=ke(e,r[n]),i.max<o.min||o.max<i.min)return!1;return!0},_points:function(){var t=this,a=t._rect,e=t._rotation,r=t.center();return[te({x:a.x,y:a.y},r,e),te({x:a.x+a.w,y:a.y},r,e),te({x:a.x+a.w,y:a.y+a.h},r,e),te({x:a.x,y:a.y+a.h},r,e)]}});function Re(t,a,e){var r=a.positioner(t,a),n=r.vx,i=r.vy;if(!n&&!i)return{x:r.x,y:r.y};var o=e.w,s=e.h,l=a.rotation,c=Math.abs(o/2*Math.cos(l))+Math.abs(s/2*Math.sin(l)),f=Math.abs(o/2*Math.sin(l))+Math.abs(s/2*Math.cos(l)),b=1/Math.max(Math.abs(n),Math.abs(i));return c*=n*b,f*=i*b,c+=a.offset*n,f+=a.offset*i,{x:r.x+c,y:r.y+f}}function xt(t,a){var e,r,n,i;for(e=t.length-1;e>=0;--e)for(n=t[e].$layout,r=e-1;r>=0&&n._visible;--r)i=t[r].$layout,i._visible&&n._box.intersects(i._box)&&a(n,i);return t}function bt(t){var a,e,r,n,i,o,s;for(a=0,e=t.length;a<e;++a)r=t[a],n=r.$layout,n._visible&&(s=new Proxy(r._el,{get:(l,c)=>l.getProps([c],!0)[c]}),i=r.geometry(),o=Re(s,r.model(),i),n._box.update(o,i,r.rotation()));return xt(t,function(l,c){var f=l._hidable,b=c._hidable;f&&b||b?c._visible=!1:f&&(l._visible=!1)})}var ne={prepare:function(t){var a=[],e,r,n,i,o;for(e=0,n=t.length;e<n;++e)for(r=0,i=t[e].length;r<i;++r)o=t[e][r],a.push(o),o.$layout={_box:new Be,_hidable:!1,_visible:!0,_set:e,_idx:o._index};return a.sort(function(s,l){var c=s.$layout,f=l.$layout;return c._idx===f._idx?f._set-c._set:f._idx-c._idx}),this.update(a),a},update:function(t){var a=!1,e,r,n,i,o;for(e=0,r=t.length;e<r;++e)n=t[e],i=n.model(),o=n.$layout,o._hidable=i&&i.display==="auto",o._visible=n.visible(),a|=o._hidable;a&&bt(t)},lookup:function(t,a){var e,r;for(e=t.length-1;e>=0;--e)if(r=t[e].$layout,r&&r._visible&&r._box.contains(a))return t[e];return null},draw:function(t,a){var e,r,n,i,o,s;for(e=0,r=a.length;e<r;++e)n=a[e],i=n.$layout,i._visible&&(o=n.geometry(),s=Re(n._el,n.model(),o),i._box.update(s,o,n.rotation()),n.draw(t,s))}},wt=function(t){if(re(t))return null;var a=t,e,r,n;if(ot(t))if(!re(t.label))a=t.label;else if(!re(t.r))a=t.r;else for(a="",e=Object.keys(t),n=0,r=e.length;n<r;++n)a+=(n!==0?", ":"")+e[n]+": "+t[e[n]];return""+a},Pt={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:wt,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},S="$datalabels",De="$default";function kt(t,a){var e=t.datalabels,r={},n=[],i,o;return e===!1?null:(e===!0&&(e={}),a=ie({},[a,e]),i=a.labels||{},o=Object.keys(i),delete a.labels,o.length?o.forEach(function(s){i[s]&&n.push(ie({},[a,i[s],{_key:s}]))}):n.push(a),r=n.reduce(function(s,l){return it(l.listeners||{},function(c,f){s[f]=s[f]||{},s[f][l._key||De]=c}),delete l.listeners,s},{}),{labels:n,listeners:r})}function me(t,a,e,r){if(a){var n=e.$context,i=e.$groups,o;a[i._set]&&(o=a[i._set][i._key],o&&Ce(o,[n,r])===!0&&(t[S]._dirty=!0,e.update(n)))}}function At(t,a,e,r,n){var i,o;!e&&!r||(e?r?e!==r&&(o=i=!0):o=!0:i=!0,o&&me(t,a.leave,e,n),i&&me(t,a.enter,r,n))}function Ct(t,a){var e=t[S],r=e._listeners,n,i;if(!(!r.enter&&!r.leave)){if(a.type==="mousemove")i=ne.lookup(e._labels,a);else if(a.type!=="mouseout")return;n=e._hovered,e._hovered=i,At(t,r,n,i,a)}}function Et(t,a){var e=t[S],r=e._listeners.click,n=r&&ne.lookup(e._labels,a);n&&me(t,r,n,a)}var Tt={id:"datalabels",defaults:Pt,beforeInit:function(t){t[S]={_actives:[]}},beforeUpdate:function(t){var a=t[S];a._listened=!1,a._listeners={},a._datasets=[],a._labels=[]},afterDatasetUpdate:function(t,a,e){var r=a.index,n=t[S],i=n._datasets[r]=[],o=t.isDatasetVisible(r),s=t.data.datasets[r],l=kt(s,e),c=a.meta.data||[],f=t.ctx,b,M,K,G,Z,Q,$,R;for(f.save(),b=0,K=c.length;b<K;++b)if($=c[b],$[S]=[],o&&$&&t.getDataVisibility(b)&&!$.skip)for(M=0,G=l.labels.length;M<G;++M)Z=l.labels[M],Q=Z._key,R=new Ie(Z,f,$,b),R.$groups={_set:r,_key:Q||De},R.$context={active:!1,chart:t,dataIndex:b,dataset:s,datasetIndex:r},R.update(R.$context),$[S].push(R),i.push(R);f.restore(),ie(n._listeners,l.listeners,{merger:function(X,J,oe){J[X]=J[X]||{},J[X][a.index]=oe[X],n._listened=!0}})},afterUpdate:function(t){t[S]._labels=ne.prepare(t[S]._datasets)},afterDatasetsDraw:function(t){ne.draw(t,t[S]._labels)},beforeEvent:function(t,a){if(t[S]._listened){var e=a.event;switch(e.type){case"mousemove":case"mouseout":Ct(t,e);break;case"click":Et(t,e);break}}},afterEvent:function(t){var a=t[S],e=a._actives,r=a._actives=t.getActiveElements(),n=ae.arrayDiff(e,r),i,o,s,l,c,f,b;for(i=0,o=n.length;i<o;++i)if(c=n[i],c[1])for(b=c[0].element[S]||[],s=0,l=b.length;s<l;++s)f=b[s],f.$context.active=c[1]===1,f.update(f.$context);(a._dirty||n.length)&&(ne.update(a._labels),t.render()),delete a._dirty}},je={exports:{}};(function(t){(function(a){var e=X(),r=J(),n=oe(),i=ge(),o={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:l,toPng:f,toJpeg:b,toBlob:M,toPixelData:c,impl:{fontFaces:n,images:i,util:e,inliner:r,options:{}}};t.exports=s;function l(v,h){return h=h||{},K(h),Promise.resolve(v).then(function(g){return Z(g,h.filter,!0)}).then(Q).then($).then(p).then(function(g){return R(g,h.width||e.width(v),h.height||e.height(v))});function p(g){return h.bgcolor&&(g.style.backgroundColor=h.bgcolor),h.width&&(g.style.width=h.width+"px"),h.height&&(g.style.height=h.height+"px"),h.style&&Object.keys(h.style).forEach(function(w){g.style[w]=h.style[w]}),g}}function c(v,h){return G(v,h||{}).then(function(p){return p.getContext("2d").getImageData(0,0,e.width(v),e.height(v)).data})}function f(v,h){return G(v,h||{}).then(function(p){return p.toDataURL()})}function b(v,h){return h=h||{},G(v,h).then(function(p){return p.toDataURL("image/jpeg",h.quality||1)})}function M(v,h){return G(v,h||{}).then(e.canvasToBlob)}function K(v){typeof v.imagePlaceholder>"u"?s.impl.options.imagePlaceholder=o.imagePlaceholder:s.impl.options.imagePlaceholder=v.imagePlaceholder,typeof v.cacheBust>"u"?s.impl.options.cacheBust=o.cacheBust:s.impl.options.cacheBust=v.cacheBust}function G(v,h){return l(v,h).then(e.makeImage).then(e.delay(100)).then(function(g){var w=p(v);return w.getContext("2d").drawImage(g,0,0),w});function p(g){var w=document.createElement("canvas");if(w.width=h.width||e.width(g),w.height=h.height||e.height(g),h.bgcolor){var x=w.getContext("2d");x.fillStyle=h.bgcolor,x.fillRect(0,0,w.width,w.height)}return w}}function Z(v,h,p){if(!p&&h&&!h(v))return Promise.resolve();return Promise.resolve(v).then(g).then(function(m){return w(v,m,h)}).then(function(m){return x(v,m)});function g(m){return m instanceof HTMLCanvasElement?e.makeImage(m.toDataURL()):m.cloneNode(!1)}function w(m,y,I){var F=m.childNodes;if(F.length===0)return Promise.resolve(y);return C(y,e.asArray(F),I).then(function(){return y});function C(Y,D,E){var L=Promise.resolve();return D.forEach(function(q){L=L.then(function(){return Z(q,E)}).then(function(O){O&&Y.appendChild(O)})}),L}}function x(m,y){if(!(y instanceof Element))return y;return Promise.resolve().then(I).then(F).then(C).then(Y).then(function(){return y});function I(){D(window.getComputedStyle(m),y.style);function D(E,L){E.cssText?L.cssText=E.cssText:q(E,L);function q(O,z){e.asArray(O).forEach(function(u){z.setProperty(u,O.getPropertyValue(u),O.getPropertyPriority(u))})}}}function F(){[":before",":after"].forEach(function(E){D(E)});function D(E){var L=window.getComputedStyle(m,E),q=L.getPropertyValue("content");if(q===""||q==="none")return;var O=e.uid();y.className=y.className+" "+O;var z=document.createElement("style");z.appendChild(u(O,E,L)),y.appendChild(z);function u(_,k,P){var T="."+_+":"+k,N=P.cssText?ue(P):he(P);return document.createTextNode(T+"{"+N+"}");function ue(W){var V=W.getPropertyValue("content");return W.cssText+" content: "+V+";"}function he(W){return e.asArray(W).map(V).join("; ")+";";function V(ee){return ee+": "+W.getPropertyValue(ee)+(W.getPropertyPriority(ee)?" !important":"")}}}}}function C(){m instanceof HTMLTextAreaElement&&(y.innerHTML=m.value),m instanceof HTMLInputElement&&y.setAttribute("value",m.value)}function Y(){y instanceof SVGElement&&(y.setAttribute("xmlns","http://www.w3.org/2000/svg"),y instanceof SVGRectElement&&["width","height"].forEach(function(D){var E=y.getAttribute(D);E&&y.style.setProperty(D,E)}))}}}function Q(v){return n.resolveAll().then(function(h){var p=document.createElement("style");return v.appendChild(p),p.appendChild(document.createTextNode(h)),v})}function $(v){return i.inlineAll(v).then(function(){return v})}function R(v,h,p){return Promise.resolve(v).then(function(g){return g.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(g)}).then(e.escapeXhtml).then(function(g){return'<foreignObject x="0" y="0" width="100%" height="100%">'+g+"</foreignObject>"}).then(function(g){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+h+'" height="'+p+'">'+g+"</svg>"}).then(function(g){return"data:image/svg+xml;charset=utf-8,"+g})}function X(){return{escape:Y,parseExtension:h,mimeType:p,dataAsUrl:C,isDataUrl:g,canvasToBlob:x,resolveUrl:m,getAndEncode:F,uid:y(),delay:D,asArray:E,escapeXhtml:L,makeImage:I,width:q,height:O};function v(){var u="application/font-woff",_="image/jpeg";return{woff:u,woff2:u,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:_,jpeg:_,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function h(u){var _=/\.([^\.\/]*?)$/g.exec(u);return _?_[1]:""}function p(u){var _=h(u).toLowerCase();return v()[_]||""}function g(u){return u.search(/^(data:)/)!==-1}function w(u){return new Promise(function(_){for(var k=window.atob(u.toDataURL().split(",")[1]),P=k.length,T=new Uint8Array(P),N=0;N<P;N++)T[N]=k.charCodeAt(N);_(new Blob([T],{type:"image/png"}))})}function x(u){return u.toBlob?new Promise(function(_){u.toBlob(_)}):w(u)}function m(u,_){var k=document.implementation.createHTMLDocument(),P=k.createElement("base");k.head.appendChild(P);var T=k.createElement("a");return k.body.appendChild(T),P.href=_,T.href=u,T.href}function y(){var u=0;return function(){return"u"+_()+u++;function _(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function I(u){return new Promise(function(_,k){var P=new Image;P.onload=function(){_(P)},P.onerror=k,P.src=u})}function F(u){var _=3e4;return s.impl.options.cacheBust&&(u+=(/\?/.test(u)?"&":"?")+new Date().getTime()),new Promise(function(k){var P=new XMLHttpRequest;P.onreadystatechange=ue,P.ontimeout=he,P.responseType="blob",P.timeout=_,P.open("GET",u,!0),P.send();var T;if(s.impl.options.imagePlaceholder){var N=s.impl.options.imagePlaceholder.split(/,/);N&&N[1]&&(T=N[1])}function ue(){if(P.readyState===4){if(P.status!==200){T?k(T):W("cannot fetch resource: "+u+", status: "+P.status);return}var V=new FileReader;V.onloadend=function(){var ee=V.result.split(/,/)[1];k(ee)},V.readAsDataURL(P.response)}}function he(){T?k(T):W("timeout of "+_+"ms occured while fetching resource: "+u)}function W(V){console.error(V),k("")}})}function C(u,_){return"data:"+_+";base64,"+u}function Y(u){return u.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function D(u){return function(_){return new Promise(function(k){setTimeout(function(){k(_)},u)})}}function E(u){for(var _=[],k=u.length,P=0;P<k;P++)_.push(u[P]);return _}function L(u){return u.replace(/#/g,"%23").replace(/\n/g,"%0A")}function q(u){var _=z(u,"border-left-width"),k=z(u,"border-right-width");return u.scrollWidth+_+k}function O(u){var _=z(u,"border-top-width"),k=z(u,"border-bottom-width");return u.scrollHeight+_+k}function z(u,_){var k=window.getComputedStyle(u).getPropertyValue(_);return parseFloat(k.replace("px",""))}}function J(){var v=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:w,shouldProcess:h,impl:{readUrls:p,inline:g}};function h(x){return x.search(v)!==-1}function p(x){for(var m=[],y;(y=v.exec(x))!==null;)m.push(y[1]);return m.filter(function(I){return!e.isDataUrl(I)})}function g(x,m,y,I){return Promise.resolve(m).then(function(C){return y?e.resolveUrl(C,y):C}).then(I||e.getAndEncode).then(function(C){return e.dataAsUrl(C,e.mimeType(m))}).then(function(C){return x.replace(F(m),"$1"+C+"$3")});function F(C){return new RegExp(`(url\\(['"]?)(`+e.escape(C)+`)(['"]?\\))`,"g")}}function w(x,m,y){if(I())return Promise.resolve(x);return Promise.resolve(x).then(p).then(function(F){var C=Promise.resolve(x);return F.forEach(function(Y){C=C.then(function(D){return g(D,Y,m,y)})}),C});function I(){return!h(x)}}}function oe(){return{resolveAll:v,impl:{readAll:h}};function v(){return h().then(function(p){return Promise.all(p.map(function(g){return g.resolve()}))}).then(function(p){return p.join(`
`)})}function h(){return Promise.resolve(e.asArray(document.styleSheets)).then(g).then(p).then(function(x){return x.map(w)});function p(x){return x.filter(function(m){return m.type===CSSRule.FONT_FACE_RULE}).filter(function(m){return r.shouldProcess(m.style.getPropertyValue("src"))})}function g(x){var m=[];return x.forEach(function(y){try{e.asArray(y.cssRules||[]).forEach(m.push.bind(m))}catch(I){console.log("Error while reading CSS rules from "+y.href,I.toString())}}),m}function w(x){return{resolve:function(){var y=(x.parentStyleSheet||{}).href;return r.inlineAll(x.cssText,y)},src:function(){return x.style.getPropertyValue("src")}}}}}function ge(){return{inlineAll:h,impl:{newImage:v}};function v(p){return{inline:g};function g(w){return e.isDataUrl(p.src)?Promise.resolve():Promise.resolve(p.src).then(w||e.getAndEncode).then(function(x){return e.dataAsUrl(x,e.mimeType(p.src))}).then(function(x){return new Promise(function(m,y){p.onload=m,p.onerror=y,p.src=x})})}}function h(p){if(!(p instanceof Element))return Promise.resolve(p);return g(p).then(function(){return p instanceof HTMLImageElement?v(p).inline():Promise.all(e.asArray(p.childNodes).map(function(w){return h(w)}))});function g(w){var x=w.style.getPropertyValue("background");return x?r.inlineAll(x).then(function(m){w.style.setProperty("background",m,w.style.getPropertyPriority("background"))}).then(function(){return w}):Promise.resolve(w)}}}})()})(je);var St=je.exports;const Mt=$e(St),It={class:"flex flex-col items-center p-3 space-y-4"},Bt={class:"mt-16"},Rt={class:"border border-gray-700 w-[210mm]"},Dt={class:"flex flex-col justify-between space-y-2 bg-white p-3",id:"report",ref:"report"},jt={class:"grid grid-rows-1"},$t={class:"flex justify-center"},Lt={class:"font-bold text-slate-800 text-xl py-5 uppercase"},Ot={class:"grid grid-rows-1"},Ut={class:"grid grid-cols-2 px-4 space-x-4"},Ft={class:"flex items-center justify-center rounded-lg"},Nt={id:"scatter-chart",ref:"scatterChart",class:"hidden m-0"},zt={id:"bar-chart",ref:"barChart",class:"hidden m-0"},Wt={class:"p-6 rounded-lg"},Vt={class:"mt-2 space-y-3"},Ht={class:"flex justify-between text-sm font-medium"},Gt=d("dt",{class:"text-gray-500 min-w-[70px]"},"Name : ",-1),Xt={class:"text-gray-900 break-word"},qt={class:"flex justify-between text-sm font-medium"},Zt=d("dt",{class:"text-gray-500"},"Age :",-1),Yt={class:"text-gray-900"},Jt={class:"flex justify-between text-sm font-medium"},Kt=d("dt",{class:"text-gray-500"},"Result :",-1),Qt={class:"text-gray-900"},er={class:"flex justify-between text-sm font-medium"},tr=d("dt",{class:"text-gray-500"},"Date / Time",-1),rr={class:"text-gray-900"},ar={class:"grid grid-cols-1 px-4 space-x-4"},nr={class:"flex items-center p-2 text-sm text-gray-800 border border-gray-300 rounded-lg bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600",role:"alert"},ir=d("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1),or={class:"flex flex-col text-xs"},sr={class:"grid grid-rows-1"},lr={class:"grid grid-cols-1"},cr={class:"flex justify-center px-4"},dr={class:"w-full"},ur=d("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-indigo-100"},[d("tr",null,[d("th",{class:"p-2 whitespace-nowrap border-2 rounded-tr",width:"3"},[d("div",{class:"flex justify-center font-semibold text-left text-gray-700"},"#")]),d("th",{class:"p-2 whitespace-nowrap border-2"},[d("div",{class:"flex font-semibold justify-center text-gray-700"},"Question")]),d("th",{class:"p-2 whitespace-nowrap border-2 w-8"},[d("div",{class:"flex justify-center font-semibold text-left text-gray-700"},"Result")])])],-1),hr={class:"text-sm divide-y divide-gray-100"},fr={class:"p-1 whitespace-nowrap border-2 text-center align-middle text-sm"},vr={class:"p-1 whitespace-nowrap border-2 align-middle text-sm"},pr={class:"flex flex-col flex-wrap"},mr={class:"whitespace-normal font-semibold"},gr={key:0,class:"flex items-center"},yr={class:"whitespace-normal font-semibold"},_r={key:0},xr={key:1},br={key:1,class:"whitespace-normal font-semibold"},wr={class:"p-1 whitespace-nowrap border-2 text-center align-middle text-sm"},Pr={class:"flex justify-center"},kr={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-check-circle-fill text-green-500",viewBox:"0 0 16 16"},Ar=d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1),Cr=[Ar],Er={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-x-circle-fill text-red-500",viewBox:"0 0 16 16"},Tr=d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1),Sr=[Tr],Mr={components:{SearchIcon:Xe,TrashIcon:qe,PencilIcon:Ge,ConfirmationModal:Ze,Head:Ae,Link:ze,Multiselect:Je,Pagination:Ye},props:{filter:Object},data(){return{finish_loading_report:!1,current_chart_type:"",chart_info:[],bar_chart:"",scatter_chart:"",chart_image:"",show_report:!1,report:{title:"",name:"",age:"",result:"",datetime:""},chart_data:{categories:{label:[],data:[],info:[]},total_answers:4},answer_data:[]}},methods:{async waitTwoSeconds(){await new Promise(t=>setTimeout(t,2e3))},viewReport(){const t=this.$page.props.answer_record.dt_id,a=this.$page.props.answer_record.total_answers,e=this.$page.props.answer_record.chart_type;this.current_chart_type=e,this.chart_data.total_answers=a,this.bar_chart&&this.bar_chart.destroy(),this.scatter_chart&&this.scatter_chart.destroy(),this.displayChart(t,e)},displayChart(t,a){We.get(route("diagnostic_test.get_dt_categories"),{params:{dt_id:t,chart_type:a}}).then(e=>{this.chart_data.categories.label=e.data.label,this.chart_data.categories.data=e.data.data,this.chart_data.categories.data=this.splitResultByCategory(),this.chart_data.categories.info=e.data.info,this.initChart(a),this.initAnswers(),this.initInfos()}).catch(e=>{console.error(e)})},initChart(t){if(t==1){let e=document.getElementById("bar-chart").getContext("2d");const r=new we(e,{type:"bar",data:{labels:this.chart_data.categories.label,datasets:[{data:this.chart_data.categories.data,backgroundColor:["#7B66FF","#39A7FF","#508D69","#ED5AB3"],borderWidth:1}]},options:{animation:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1},datalabels:{display:!1}},scales:{y:{min:0,max:3,stepSize:1,ticks:{beginAtZero:!0}},x:{display:!1,min:0,max:this.chart_data.total_answers,stepSize:1,ticks:{beginAtZero:!0}}},ticks:{precision:0}},plugins:[Tt]});this.bar_chart=r}if(t==2){const a=this.chart_data.total_answers,e={id:"scatterArbitraryLine",beforeDatasetDraw(s,l,c){const{ctx:f,chartArea:{top:b,bottom:M,left:K,right:G,width:Z,height:Q},scales:{x:$,y:R}}=s;X();function X(J,oe,ge,v){f.save(),f.beginPath(),f.strokeStyle="rgba(170, 170, 170, 1)",f.lineWidth=3,f.moveTo($.getPixelForValue(0),R.getPixelForValue(0)),f.lineTo($.getPixelForValue(a),R.getPixelForValue(a)),f.stroke(),f.restore()}}},r={id:"scatterAnnotationLine",beforeDraw:s=>{if(s.tooltip._active&&s.tooltip._active.length){const l=s.ctx;l.save();const c=s.tooltip._active[0];l.beginPath(),l.moveTo(c.element.x,s.chartArea.top),l.lineTo(c.element.x,c.element.y),l.lineWidth=2,l.strokeStyle="white",l.stroke(),l.restore(),l.beginPath(),l.moveTo(c.element.x,c.element.y),l.lineTo(c.element.x,s.chartArea.bottom),l.lineWidth=2,l.strokeStyle="red",l.stroke(),l.restore(),l.beginPath(),l.moveTo(s.chartArea.left,c.element.y),l.lineTo(c.element.x,c.element.y),l.lineWidth=2,l.strokeStyle="red",l.stroke(),l.restore()}}};let i=document.getElementById("scatter-chart").getContext("2d");const o=new we(i,{type:"scatter",data:{labels:this.chart_data.total_answers,datasets:[{data:[{x:this.chart_data.categories.data[0],y:this.chart_data.categories.data[1]}],borderColor:"rgba(255, 8, 0, 1)",pointStyle:"crossRot",radius:6,hoverRadius:10,fill:!1}]},options:{animation:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{y:{min:0,max:5,stepSize:1,ticks:{beginAtZero:!0},title:{display:!0,text:"Operations"}},x:{min:0,max:5,stepSize:1,ticks:{beginAtZero:!0},title:{display:!0,text:"Numbers"}}},ticks:{precision:0}},plugins:[e,r]});this.scatter_chart=o}},splitResultByCategory(){const t=this.$page.props.answer_record.answer_record.reduce((e,r)=>(r.correct?e[r.question_category_id]=(e[r.question_category_id]||0)+1:e.hasOwnProperty(r.question_category_id)||(e[r.question_category_id]=null),e),{}),a={};return Object.keys(t).forEach((e,r)=>{a[r]=t[e]}),Object.values(a)},initAnswers(){this.answer_data=this.$page.props.answer_record.answer_record},initInfos(){this.report.title=this.$page.props.answer_record.dt_name,this.report.name=this.$page.props.answer_record.child_name,this.report.age=this.$page.props.answer_record.child_age,this.report.result=this.$page.props.answer_record.total_correct_answers+"/"+this.$page.props.answer_record.total_answers,this.report.date=be(this.$page.props.answer_record.created_at).format("DD/MM/YYYY"),this.report.time=be(this.$page.props.answer_record.created_at).format("hh:mm A"),this.finish_loading_report=!0},download(){document.getElementById("report").style.display="block";var t=document.getElementById("report");setTimeout(()=>{var a=2;Mt.toPng(t,{width:t.clientWidth*a,height:t.clientHeight*a,style:{transform:"scale("+a+")",transformOrigin:"top left"}}).then(function(e){var r=document.createElement("a");r.href=e,r.download="Diagnostic Test Report.png",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}).catch(function(e){console.error("oops, something went wrong!",e)})})}},created(){this.viewReport()}},Gr=Object.assign(Mr,{__name:"Report",setup(t){return(a,e)=>(j(),U(fe,null,[Le(Oe(Ae),{title:"Diagnostic Test Report"}),d("div",It,[ye(d("div",Bt," Please wait, Loading Report... ",512),[[_e,!a.finish_loading_report]]),ye(d("div",Rt,[d("div",Dt,[d("div",jt,[d("div",$t,[d("h1",Lt,"Diagnostic Test "+B(a.report.title),1)])]),d("div",Ot,[d("div",Ut,[d("div",Ft,[d("canvas",Nt,null,512),d("canvas",zt,null,512)]),d("div",Wt,[d("dl",Vt,[d("div",Ht,[Gt,d("dd",Xt,B(a.report.name),1)]),d("div",qt,[Zt,d("dd",Yt,B(a.report.age),1)]),d("div",Jt,[Kt,d("dd",Qt,B(a.report.result),1)]),d("div",er,[tr,d("dd",rr,B(a.report.date)+" - "+B(a.report.time),1)])])])]),d("div",ar,[d("div",nr,[ir,d("div",or,[(j(!0),U(fe,null,xe(a.chart_data.categories.info,r=>(j(),U("span",null,[d("span",{class:"font-semibold",style:Ve("color: "+r.category_color)},B(r.category_name)+":",5),ve(" "+B(r.category_description),1)]))),256))])])])]),d("div",sr,[d("div",lr,[d("div",cr,[d("table",dr,[ur,d("tbody",hr,[(j(!0),U(fe,null,xe(a.answer_data,(r,n)=>(j(),U("tr",null,[d("td",fr,B(++n),1),d("td",vr,[d("div",pr,[d("p",mr,B(r.question),1),r.answer?(j(),U("div",gr,[d("p",yr,[ve("Answer: "),r.answer.length?(j(),U("span",_r,B(r.answer.map(i=>i===null?"Blank":i)),1)):(j(),U("span",xr,B(r.answer),1))])])):(j(),U("p",br,"Answer: "+B(r.answer+1),1))])]),d("td",wr,[d("div",Pr,[r.correct?(j(),U("svg",kr,Cr)):(j(),U("svg",Er,Sr))])])]))),256))])])])])])],512)],512),[[_e,a.finish_loading_report]]),a.finish_loading_report?(j(),Ue(He,{key:0,onClick:a.download},{default:Fe(()=>[ve("Download")]),_:1},8,["onClick"])):Ne("",!0)])],64))}});export{Gr as default};
