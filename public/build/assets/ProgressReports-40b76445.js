import{_ as v}from"./Authenticated-da451f30.js";import{o,c as a,a as l,u as c,d as s,t as _,w as g,F as h,b as f,H as b,n as d,q as p,e as w,g as y}from"./app-0026cd25.js";import{B as $}from"./Button-ca08c811.js";import{s as u}from"./simplebar.min-a17c880a.js";import{h as k}from"./moment-55cb88ed.js";import"./XIcon-ff1968eb.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./transition-17112c43.js";import"./keyboard-4ad9a64c.js";import"./use-resolve-button-type-af237bfe.js";import"./menu-22d40f58.js";const x={class:"fixed w-full flex justify-center top-[4rem] md:top-[10rem] font-extrabold bg-white border border-gray-300 py-3 z-20"},R={class:"max-w-xl mx-auto border shadow bg-white rounded-lg px-4 mt-14"},C={class:"flex justify-evenly sm:justify-center space-x-8 md:space-x-10 pt-3 pb-4 font-medium"},P=s("img",{src:"/images/parents/stories.png",class:"w-10 h-10",alt:""},null,-1),B=s("span",{class:"text-sm"},"Stories",-1),j=[P,B],S=s("img",{src:"/images/parents/progress_report.png",class:"w-10 h-10",alt:""},null,-1),H=s("span",{class:"text-sm"},"Progress Reports",-1),N=[S,H],V=s("img",{src:"/images/parents/fee_invoice.png",class:"w-10 h-10",alt:""},null,-1),z=s("span",{class:"text-sm"},"Invoices",-1),F=[V,z],M=s("img",{src:"/images/parents/art_gallery.png",class:"w-10 h-10",alt:""},null,-1),T=s("span",{class:"text-sm"},"Art Gallery",-1),E=[M,T],L=s("img",{src:"/images/parents/art_book.png",class:"w-10 h-10",alt:""},null,-1),U=s("span",{class:"text-sm"},"Art Book",-1),q=[L,U],A={class:"max-w-xl mx-auto mt-10"},D={key:0,class:"flex items-center space-y-3"},G=s("h2",{class:"text-lg md:text-xl mx-1 font-extrabold"},"Progress Reports",-1),O=[G],I={key:1,class:"flex justify-center mx-1 mt-10"},Y=s("span",{class:"text-slate-500"},"No Progress Reports Found",-1),J=[Y],K={key:2,class:"mt-3"},Q={class:"bg-white shadow rounded-lg border"},W={class:"divide-y divide-slate-200 dark:divide-zink-500 px-6 py-4"},X={class:"flex items-center gap-3 py-2 first:pt-0 last:pb-0"},Z={class:"grow"},ee={class:"font-medium"},se={class:"shrink-0"},te={key:0,class:"flex items-center justify-between pt-5 animate-pulse"},re=s("div",null,[s("div",{class:"h-2.5 bg-gray-300 rounded-full dark:bg-gray-600 w-32 mb-2.5"})],-1),oe=s("div",{class:"h-2.5 bg-gray-300 rounded-full dark:bg-gray-700 w-16"},null,-1),ae=[re,oe],ne={components:{simplebar:u},data(){return{generate:{id:"",running:!1},loading:{progress_reports:!1}}},methods:{showProgressReport(n,e){this.generate.running||(this.generate.running=!0,f.get(route("progress_report.full_reports"),{responseType:"blob",params:{progress_report_id:n,student_fee:e}}).then(t=>{const r=new Blob([t.data],{type:"application/pdf"}),i=URL.createObjectURL(r);window.open(i,"_blank"),this.generate.running=!1}).catch(t=>{console.error("Error fetching PDF:",t),this.generate.running=!1}))},handlePRScroll(){const n=this.$refs.progress_report_container.$el.querySelector(".simplebar-content-wrapper"),e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;e+r>=t-100&&this.$page.props.progress_reports.next_page_url&&(this.loading.progress_reports||(this.loading.progress_reports=!0,f.get(route("parent.student_progress_reports"),{params:{page:this.$page.props.progress_reports.current_page+1}}).then(i=>{i.data.data.forEach(m=>{this.$page.props.progress_reports.data.push(m)}),this.$page.props.progress_reports.current_page=i.data.current_page,this.$page.props.progress_reports.next_page_url=i.data.next_page_url,this.loading.progress_reports=!1})))}}},ve=Object.assign(ne,{__name:"ProgressReports",setup(n){return(e,t)=>(o(),a(h,null,[l(c(b),{title:"Progress Reports"}),s("div",x,[s("span",null,_(e.$page.props.session_data.current_active_programme.name),1)]),l(v,null,{default:g(()=>[s("div",R,[l(c(u),{"data-simplebar-auto-hide":"true"},{default:g(()=>[s("div",C,[s("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.stories")?"font-extrabold":""]),onClick:t[0]||(t[0]=r=>e.$inertia.get(e.route("parent.stories",e.$page.props.session_data.current_active_programme.encrypted_id)))},j,2),s("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.progress_reports")?"font-extrabold":""]),onClick:t[1]||(t[1]=r=>e.$inertia.get(e.route("parent.progress_reports")))},N,2),s("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.invoices")?"font-extrabold":""]),onClick:t[2]||(t[2]=r=>e.$inertia.get(e.route("parent.invoices")))},F,2),e.$page.props.session_data.current_active_programme.id==3||e.$page.props.session_data.current_active_programme.id==5?(o(),a("div",{key:0,class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.art_gallery")?"font-extrabold":""]),onClick:t[3]||(t[3]=r=>e.$inertia.get(e.route("parent.art_gallery")))},E,2)):p("",!0),e.$page.props.session_data.current_active_programme.id==3||e.$page.props.session_data.current_active_programme.id==5?(o(),a("div",{key:1,class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.art_book")?"font-extrabold":""]),onClick:t[4]||(t[4]=r=>e.$inertia.get(e.route("parent.art_book")))},q,2)):p("",!0)])]),_:1})]),s("div",A,[e.$page.props.progress_reports.data.length?(o(),a("div",D,O)):p("",!0),e.$page.props.progress_reports.data.length?p("",!0):(o(),a("div",I,J)),e.$page.props.progress_reports.data.length?(o(),a("div",K,[s("div",Q,[l(c(u),{"data-simplebar-auto-hide":"true",class:"max-h-96",onScroll:e.handlePRScroll,ref:"progress_report_container"},{default:g(()=>[s("ul",W,[(o(!0),a(h,null,w(e.$page.props.progress_reports.data,(r,i)=>(o(),a("li",X,[s("div",Z,[s("h6",ee,_(c(k)(r.month).format("MMMM Y")),1)]),s("div",se,[l($,{class:"py-1 px-4",onClick:m=>e.showProgressReport(r.id,r.student_fee_id)},{default:g(()=>[y(_(e.generate.id==r.id&&e.generate.running?"Generating...":"View"),1)]),_:2},1032,["onClick"])])]))),256)),e.loading.progress_reports?(o(),a("div",te,ae)):p("",!0)])]),_:1},8,["onScroll"])])])):p("",!0)])]),_:1})],64))}});export{ve as default};
