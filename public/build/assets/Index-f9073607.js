import{_ as y}from"./Authenticated-c761d570.js";import{c as i,b as n,u as w,w as r,F as _,H as h,L as b,o as p,d as t,h as x,t as l,n as k,k as $}from"./app-1c7c31e8.js";import{B as m}from"./Button-0b2e83a5.js";import{M as u}from"./Modal-30605371.js";import v from"./MonthlyFee-5ad259f1.js";import"./XIcon-0a218506.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./transition-c0428a9a.js";import"./use-resolve-button-type-2f73ca43.js";import"./menu-cd500019.js";import"./VueFinalModal.esm-c4e5f163.js";/* empty css                                                              */import"./default.css_vue_type_style_index_0_src_true_lang-d0ed5bfe.js";import"./moment-fbc5633a.js";const C={class:"overflow-x-auto no-scrollbar"},F={class:"bg-white shadow rounded-lg border"},z={class:"w-full text-sm text-left text-gray-500"},H=t("thead",{class:"text-gray-700 capitalize bg-gray-200"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Invoice Number "),t("th",{scope:"col",class:"px-6 py-3"}," Date Issued "),t("th",{scope:"col",class:"px-6 py-3"}," Due Date "),t("th",{scope:"col",class:"px-6 py-3 text-center"}," Amount "),t("th",{scope:"col",class:"px-6 py-3 text-center"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-center"}," Action ")])],-1),M={key:0,class:"bg-white border-b"},N=t("td",{class:"text-center py-4",colspan:"10"}," No record found. ",-1),V=[N],B={class:"bg-white border-b hover:bg-gray-50"},D={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},I={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},S={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},T={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap text-center"},O={class:"px-6 py-4 text-center"},A={class:"px-6 py-4 text-center"},J=["onClick"],L=["onClick"],P=t("h3",{class:"text-gray-900 text-xl font-semibold"}," Invoice ",-1),j={class:"flex justify-between space-x-2 items-center p-4 border-t border-gray-200 rounded-b"},E=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[t("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),t("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1),K=t("span",null,"Print",-1),q={name:"_blank",specs:[],styles:["http://127.0.0.1:8000/css/app.css"],timeout:1e3,autoClose:!0,windowTitle:window.document.title},G={components:{Head:h,Link:b,Modal:u,MonthlyFee:v},data(){return{open_modal:!1,invoice_data:{parent_name:"",parent_address:"No 27, Jalan Kap Empat, 17/17D, Seksyen 17, Shah Alam",invoice_number:"",invoice_items:[],date_issued:"",due_date:"",total_amount:""}}},methods:{viewInvoice(s){this.invoice_data.student_name=this.$page.props.invoices[s].student_name,this.invoice_data.parent_name=this.$page.props.invoices[s].parent_full_name,this.invoice_data.parent_address=this.$page.props.invoices[s].parent_address,this.invoice_data.invoice_number=this.$page.props.invoices[s].invoice_number,this.invoice_data.invoice_items=JSON.parse(this.$page.props.invoices[s].invoice_items),this.invoice_data.date_issued=this.$page.props.invoices[s].date_issued,this.invoice_data.due_date=this.$page.props.invoices[s].due_date,this.invoice_data.total_amount=this.totalFee(this.$page.props.invoices[s].invoice_items),this.open_modal=!0},totalFee(s){let o=0;const a=JSON.parse(s);for(const e of a){const c=parseFloat(e.programme_fee),d=parseFloat(e.programme_fee_discount),g=parseFloat(e.material_fee),f=parseFloat(e.material_fee_discount);o+=c-d,e.include_material_fee&&(o+=g-f)}return o},print(){this.printing=!0,this.$htmlToPaper("invoice",q,()=>{this.printing=!1})},pay(s){window.location.href="https://www.billplz-sandbox.com/bills/"+s}}},rt=Object.assign(G,{__name:"Index",setup(s){return(o,a)=>(p(),i(_,null,[n(w(h),{title:"Invoices"}),n(y,null,{default:r(()=>[t("div",C,[t("div",F,[t("table",z,[H,t("tbody",null,[o.$page.props.invoices.length?(p(!0),i(_,{key:1},x(o.$page.props.invoices,(e,c)=>(p(),i("tr",B,[t("td",D,l(e.invoice_number),1),t("td",I,l(e.date_issued),1),t("td",S,l(e.due_date),1),t("td",T,l(e.amount),1),t("td",O,[t("span",{class:k(["text-xs font-medium px-2 py-1 rounded",[e.status_bg_color,e.status_text_color]])},l(e.status),3)]),t("td",A,[e.status_id==1?(p(),i("a",{key:0,onClick:d=>o.pay(e.bill_id),class:"cursor-pointer font-medium px-3 py-1 text-indigo-600 hover:bg-indigo-200 hover:rounded whitespace-nowrap"},"Pay Now",8,J)):(p(),i("a",{key:1,class:"cursor-pointer font-medium px-3 py-1 text-blue-600 hover:bg-blue-200 hover:rounded whitespace-nowrap",onClick:d=>o.viewInvoice(c)},"View",8,L))])]))),256)):(p(),i("tr",M,V))])])])]),n(u,{showModal:o.open_modal,modalType:"md",onHideModal:a[1]||(a[1]=e=>o.open_modal=!1)},{header:r(()=>[P]),content:r(()=>[n(v,{invoice_data:o.invoice_data},null,8,["invoice_data"])]),footer:r(()=>[t("div",j,[n(m,{buttonType:"blue",class:"px-4 py-2 space-x-2",onClick:o.print},{default:r(()=>[E,K]),_:1},8,["onClick"]),n(m,{buttonType:"gray",onClick:a[0]||(a[0]=e=>o.open_modal=!1)},{default:r(()=>[$("Close")]),_:1})])]),_:1},8,["showModal"])]),_:1})],64))}});export{rt as default};
