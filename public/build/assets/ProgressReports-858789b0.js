import{_ as v}from"./Authenticated-e5ec8502.js";import{H as b}from"./@inertiajs-751b4e3a.js";import{B as w}from"./Button-b911d56b.js";import{s as _}from"./simplebar-vue-94442f8e.js";import{h as y}from"./moment-a9aaa855.js";import{a as h}from"./axios-9cbf0d09.js";import{q as o,x as a,v as l,u as c,y as r,G as g,P as m,F as f,m as d,z as p,C as $,V as x}from"./@vue-7927adca.js";import"./@heroicons-9fa5d0e6.js";import"./app-0d32cceb.js";import"./pusher-js-36ce843e.js";import"./@vueform-aef92a1c.js";import"./@vuepic-ba9c4d94.js";import"./date-fns-60a02367.js";import"./@babel-1b80a44a.js";import"./cropperjs-8efab0ec.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./radix-vue-8d4617bd.js";import"./@floating-ui-1e8ef191.js";import"./clsx-0839fdbe.js";import"./tailwind-merge-642c57ff.js";import"./@vueuse-e8993a83.js";import"./class-variance-authority-f96983da.js";import"./@radix-icons-9a1732cf.js";import"./lodash.isequal-979ca240.js";import"./vue-446e1be1.js";import"./lodash.clonedeep-a2a90952.js";import"./qs-c5780410.js";import"./side-channel-c3de7aff.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-30e6e08c.js";import"./deepmerge-89e33937.js";import"./nprogress-2c66c043.js";import"./@headlessui-d829f326.js";import"./simplebar-core-3f5973b9.js";import"./lodash-es-9b1d07da.js";const k={class:"fixed w-full flex justify-center top-[4rem] md:top-[10rem] font-extrabold bg-white border border-gray-300 py-3 z-20"},C={class:"max-w-xl mx-auto border shadow bg-white rounded-lg px-4 mt-14"},P={class:"flex justify-evenly sm:justify-center space-x-8 md:space-x-10 pt-3 pb-4 font-medium"},R=r("img",{src:"/images/parents/stories.png",class:"w-10 h-10",alt:""},null,-1),B=r("span",{class:"text-sm"},"Stories",-1),j=[R,B],S=r("img",{src:"/images/parents/progress_report.png",class:"w-10 h-10",alt:""},null,-1),H=r("span",{class:"text-sm"},"Progress Reports",-1),V=[S,H],z=r("img",{src:"/images/parents/fee_invoice.png",class:"w-10 h-10",alt:""},null,-1),N=r("span",{class:"text-sm"},"Invoices",-1),F=[z,N],M=r("img",{src:"/images/parents/art_gallery.png",class:"w-10 h-10",alt:""},null,-1),T=r("span",{class:"text-sm"},"Art Gallery",-1),E=[M,T],G=r("img",{src:"/images/parents/art_book.png",class:"w-10 h-10",alt:""},null,-1),L=r("span",{class:"text-sm"},"Art Book",-1),U=[G,L],q={class:"max-w-xl mx-auto mt-10"},A={key:0,class:"flex items-center space-y-3"},D=r("h2",{class:"text-lg md:text-xl mx-1 font-extrabold"},"Progress Reports",-1),O=[D],I={key:1,class:"flex justify-center mx-1 mt-10"},Y=r("span",{class:"text-slate-500"},"No Progress Reports Found",-1),J=[Y],K={key:2,class:"mt-3"},Q={class:"bg-white shadow rounded-lg border"},W={class:"divide-y divide-slate-200 dark:divide-zink-500 px-6 py-4"},X={class:"flex items-center gap-3 py-2 first:pt-0 last:pb-0"},Z={class:"grow"},ee={class:"font-medium"},re={class:"shrink-0"},te={key:0,class:"flex items-center justify-between pt-5 animate-pulse"},se=r("div",null,[r("div",{class:"h-2.5 bg-gray-300 rounded-full dark:bg-gray-600 w-32 mb-2.5"})],-1),oe=r("div",{class:"h-2.5 bg-gray-300 rounded-full dark:bg-gray-700 w-16"},null,-1),ae=[se,oe],ie={components:{simplebar:_},data(){return{generate:{id:"",running:!1},loading:{progress_reports:!1}}},methods:{showProgressReport(i,e){this.generate.running||(this.generate.running=!0,h.get(route("progress_report.full_reports"),{responseType:"blob",params:{progress_report_id:i,student_fee:e}}).then(t=>{const s=new Blob([t.data],{type:"application/pdf"}),n=URL.createObjectURL(s);window.open(n,"_blank"),this.generate.running=!1}).catch(t=>{console.error("Error fetching PDF:",t),this.generate.running=!1}))},handlePRScroll(){const i=this.$refs.progress_report_container.$el.querySelector(".simplebar-content-wrapper"),e=i.scrollTop,t=i.scrollHeight,s=i.clientHeight;e+s>=t-100&&this.$page.props.progress_reports.next_page_url&&(this.loading.progress_reports||(this.loading.progress_reports=!0,h.get(route("parent.student_progress_reports"),{params:{page:this.$page.props.progress_reports.current_page+1}}).then(n=>{n.data.data.forEach(u=>{this.$page.props.progress_reports.data.push(u)}),this.$page.props.progress_reports.current_page=n.data.current_page,this.$page.props.progress_reports.next_page_url=n.data.next_page_url,this.loading.progress_reports=!1})))}}},er=Object.assign(ie,{__name:"ProgressReports",setup(i){return(e,t)=>(o(),a(f,null,[l(c(b),{title:"Progress Reports"}),r("div",k,[r("span",null,g(e.$page.props.session_data.current_active_programme.name),1)]),l(v,null,{default:m(()=>[r("div",C,[l(c(_),{"data-simplebar-auto-hide":"true"},{default:m(()=>[r("div",P,[r("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.stories")?"font-extrabold":""]),onClick:t[0]||(t[0]=s=>e.$inertia.get(e.route("parent.stories",e.$page.props.session_data.current_active_programme.encrypted_id)))},j,2),r("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.progress_reports")?"font-extrabold":""]),onClick:t[1]||(t[1]=s=>e.$inertia.get(e.route("parent.progress_reports")))},V,2),r("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.invoices")?"font-extrabold":""]),onClick:t[2]||(t[2]=s=>e.$inertia.get(e.route("parent.invoices")))},F,2),e.$page.props.session_data.current_active_programme.id==3||e.$page.props.session_data.current_active_programme.id==5?(o(),a("div",{key:0,class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.art_gallery")?"font-extrabold":""]),onClick:t[3]||(t[3]=s=>e.$inertia.get(e.route("parent.art_gallery")))},E,2)):p("",!0),e.$page.props.session_data.current_active_programme.id==3||e.$page.props.session_data.current_active_programme.id==5?(o(),a("div",{key:1,class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.art_book")?"font-extrabold":""]),onClick:t[4]||(t[4]=s=>e.$inertia.get(e.route("parent.art_book")))},U,2)):p("",!0)])]),_:1})]),r("div",q,[e.$page.props.progress_reports.data.length?(o(),a("div",A,O)):p("",!0),e.$page.props.progress_reports.data.length?p("",!0):(o(),a("div",I,J)),e.$page.props.progress_reports.data.length?(o(),a("div",K,[r("div",Q,[l(c(_),{"data-simplebar-auto-hide":"true",class:"max-h-96",onScroll:e.handlePRScroll,ref:"progress_report_container"},{default:m(()=>[r("ul",W,[(o(!0),a(f,null,$(e.$page.props.progress_reports.data,(s,n)=>(o(),a("li",X,[r("div",Z,[r("h6",ee,g(c(y)(s.month).format("MMMM Y")),1)]),r("div",re,[l(w,{class:"py-1 px-4",onClick:u=>e.showProgressReport(s.id,s.student_fee_id)},{default:m(()=>[x(g(e.generate.id==s.id&&e.generate.running?"Generating...":"View"),1)]),_:2},1032,["onClick"])])]))),256)),e.loading.progress_reports?(o(),a("div",te,ae)):p("",!0)])]),_:1},8,["onScroll"])])])):p("",!0)])]),_:1})],64))}});export{er as default};
